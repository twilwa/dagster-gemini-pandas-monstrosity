"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[704,120],{26704:function(n,e,t){t.r(e),t.d(e,{CONCURRENCY_LIMIT_FRAGMENT:function(){return M},CONCURRENCY_STEP_FRAGMENT:function(){return J},ConcurrencyLimits:function(){return ConcurrencyLimits},FREE_CONCURRENCY_SLOTS_MUTATION:function(){return G},INSTANCE_CONCURRENCY_LIMITS_QUERY:function(){return B},InstanceConcurrencyPage:function(){return InstanceConcurrencyPage},InstanceConcurrencyPageContent:function(){return q},RUN_QUEUE_CONFIG_FRAGMENT:function(){return Y},RunConcurrencyContent:function(){return RunConcurrencyContent}});var r=t(81862),i=t(58467),c=t(73235),o=t(82550),s=t(22970),u=t(52322),l=t(40794),a=t(33379),d=t(60138),x=t(22139),m=t(63832),y=t(28888),p=t(17131),h=t(81308),j=t(95223),f=t(94092),g=t(9001),C=t(76139),b=t(92364),v=t(12084),_=t(54266),S=t(57830),I=t(37783),O=t(44678),L=t(10952),R=t(34822),K=t(43180),T=t(25195),E=t(2784),w=t(47933),N=t(74897),k=t(4120),F=t(19211),D=t(55237),P=t(46032),V=t(68028),A=t(28252),Q=t(21485),U=t(6315),$=t(38917),z=t(88846);function _templateObject(){var n=(0,c._)(["\n  fragment ConcurrencyStepFragment on PendingConcurrencyStep {\n    runId\n    stepKey\n    enqueuedTimestamp\n    assignedTimestamp\n    priority\n  }\n"]);return _templateObject=function(){return n},n}function _templateObject1(){var n=(0,c._)(["\n  fragment ConcurrencyLimitFragment on ConcurrencyKeyInfo {\n    concurrencyKey\n    slotCount\n    claimedSlots {\n      runId\n      stepKey\n    }\n    pendingSteps {\n      ...ConcurrencyStepFragment\n    }\n  }\n  ","\n"]);return _templateObject1=function(){return n},n}function _templateObject2(){var n=(0,c._)(["\n  fragment RunQueueConfigFragment on RunQueueConfig {\n    maxConcurrentRuns\n    tagConcurrencyLimitsYaml\n  }\n"]);return _templateObject2=function(){return n},n}function _templateObject3(){var n=(0,c._)(["\n  query InstanceConcurrencyLimitsQuery {\n    instance {\n      id\n      info\n      supportsConcurrencyLimits\n      runQueuingSupported\n      runQueueConfig {\n        ...RunQueueConfigFragment\n      }\n      minConcurrencyLimitValue\n      maxConcurrencyLimitValue\n      concurrencyLimits {\n        ...ConcurrencyLimitFragment\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return _templateObject3=function(){return n},n}function _templateObject4(){var n=(0,c._)(["\n  mutation SetConcurrencyLimit($concurrencyKey: String!, $limit: Int!) {\n    setConcurrencyLimit(concurrencyKey: $concurrencyKey, limit: $limit)\n  }\n"]);return _templateObject4=function(){return n},n}function _templateObject5(){var n=(0,c._)(["\n  mutation DeleteConcurrencyLimit($concurrencyKey: String!) {\n    deleteConcurrencyLimit(concurrencyKey: $concurrencyKey)\n  }\n"]);return _templateObject5=function(){return n},n}function _templateObject6(){var n=(0,c._)(["\n  mutation FreeConcurrencySlots($runId: String!, $stepKey: String) {\n    freeConcurrencySlots(runId: $runId, stepKey: $stepKey)\n  }\n"]);return _templateObject6=function(){return n},n}function _templateObject7(){var n=(0,c._)(["\n  query ConcurrencyKeyDetailsQuery($concurrencyKey: String!) {\n    instance {\n      id\n      concurrencyLimit(concurrencyKey: $concurrencyKey) {\n        ...ConcurrencyLimitFragment\n      }\n    }\n  }\n  ","\n"]);return _templateObject7=function(){return n},n}function _templateObject8(){var n=(0,c._)(["\n  query RunsForConcurrencyKeyQuery($filter: RunsFilter, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          status\n        }\n      }\n    }\n  }\n"]);return _templateObject8=function(){return n},n}var q=E.memo(function(){(0,V.Px)(),(0,A.j)("Concurrency");var n=(0,l.a)(B,{notifyOnNetworkStatusChange:!0}),e=(0,D.C4)(n,D.dT),t=n.data;return(0,u.jsx)(u.Fragment,{children:t?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(x.x,{margin:{bottom:64},children:(0,u.jsx)(RunConcurrencyContent,{refreshState:e,hasRunQueue:!!(null==t?void 0:t.instance.runQueuingSupported),runQueueConfig:null==t?void 0:t.instance.runQueueConfig})}),(0,u.jsx)(ConcurrencyLimits,{instanceConfig:t.instance.info,limits:t.instance.concurrencyLimits,hasSupport:t.instance.supportsConcurrencyLimits,refetch:n.refetch,minValue:t.instance.minConcurrencyLimitValue,maxValue:t.instance.maxConcurrencyLimitValue})]}):(0,u.jsx)(x.x,{padding:{vertical:64},children:(0,u.jsx)(m.$,{purpose:"section"})})})}),InstanceConcurrencyPage=function(){var n=E.useContext(N.N).pageTitle;return(0,u.jsxs)(y.T,{children:[(0,u.jsx)(p.m,{title:(0,u.jsx)(h.X6,{children:n}),tabs:(0,u.jsx)(k.Z,{tab:"concurrency"})}),(0,u.jsx)(q,{})]})};e.default=InstanceConcurrencyPage;var RunConcurrencyContent=function(n){var e=n.hasRunQueue,t=n.runQueueConfig,r=n.onEdit,i=n.refreshState;if(!e)return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(x.x,{padding:{vertical:16,horizontal:24},border:"bottom",flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,u.jsx)(h.pm,{children:"Run concurrency"}),i?(0,u.jsx)(D.xi,{refreshState:i}):null]}),(0,u.jsxs)("div",{children:["Run concurrency is not supported with this run coordinator. To enable run concurrency limits, configure your instance to use the ",(0,u.jsx)(h.fv,{children:"QueuedRunCoordinator"})," in your"," ",(0,u.jsx)(h.fv,{children:"dagster.yaml"}),". See the"," ",(0,u.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://docs.dagster.io/deployment/dagster-instance#queuedruncoordinator",children:"QueuedRunCoordinator documentation"})," ","for more information."]})]});var c=(0,u.jsxs)(x.x,{padding:{vertical:16,horizontal:24},children:["Run concurrency can be set in your run queue settings. See the"," ",(0,u.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://docs.dagster.io/guides/limiting-concurrency-in-data-pipelines#configuring-run-level-concurrency",children:"run concurrency documentation"})," ","for more information."]}),o=t?(0,u.jsx)(j.fJ,{children:(0,u.jsxs)("tbody",{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Max concurrent runs:"}),(0,u.jsx)("td",{children:t.maxConcurrentRuns})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Tag concurrency limits:"}),(0,u.jsx)("td",{children:t.tagConcurrencyLimitsYaml?(0,u.jsx)(f.u,{value:t.tagConcurrencyLimitsYaml,options:{readOnly:!0,lineNumbers:!0,mode:"yaml"}}):"-"})]})]})}):null;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(RunConcurrencyLimitHeader,{onEdit:r,refreshState:i}),c,o]})},RunConcurrencyLimitHeader=function(n){var e=n.onEdit,t=n.refreshState;return(0,u.jsxs)(x.x,{flex:{justifyContent:"space-between",alignItems:"center"},padding:{vertical:16,horizontal:24},border:"bottom",children:[(0,u.jsx)(h.pm,{children:"Run concurrency"}),(0,u.jsxs)(x.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[t?(0,u.jsx)(D.xi,{refreshState:t}):null,e?(0,u.jsx)(g.zx,{icon:(0,u.jsx)(C.JO,{name:"edit"}),onClick:function(){return e()},children:"Edit configuration"}):null]})]})},ConcurrencyLimits=function(n){var e=n.instanceConfig,t=n.hasSupport,r=n.limits,c=n.refetch,s=n.minValue,l=n.maxValue,a=(0,i._)(E.useState(),2),d=a[0],m=a[1],y=(0,i._)(E.useState(void 0),2),p=y[0],h=y[1],j=E.useCallback(function(){h(void 0)},[h]),f=Object.fromEntries(r.map(function(n){return[n.concurrencyKey,n.slotCount]})),g=E.useMemo(function(){return(0,o._)(r).sort(function(n,e){return P.Bl.compare(n.concurrencyKey,e.concurrencyKey)})},[r]),onAdd=function(){m({actionType:"add"})},onEdit=function(n){m({actionType:"edit",concurrencyKey:n,concurrencyLimit:f[n]})},onDelete=function(n){m({actionType:"delete",concurrencyKey:n})};return!t&&e&&e.includes("SqliteEventLogStorage")?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(ConcurrencyLimitHeader,{}),(0,u.jsx)(x.x,{margin:24,children:(0,u.jsx)(b.t,{icon:"error",title:"No concurrency support",description:"This instance does not support global concurrency limits. You will need to configure a different storage implementation (e.g. Postgres/MySQL) to use this feature."})})]}):!1===t?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(ConcurrencyLimitHeader,{}),(0,u.jsx)(x.x,{margin:24,children:(0,u.jsx)(b.t,{icon:"error",title:"No concurrency support",description:"This instance does not currently support global concurrency limits. You may need to run `dagster instance migrate` to add the necessary tables to your dagster storage to support this feature."})})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(ConcurrencyLimitHeader,{onAdd:onAdd}),0===r.length?(0,u.jsx)(x.x,{margin:24,children:(0,u.jsx)(b.t,{icon:"error",title:"No concurrency limits",description:(0,u.jsxs)(u.Fragment,{children:["No concurrency limits have been configured for this instance.\xa0",(0,u.jsx)(v.Z,{onClick:function(){return onAdd()},children:"Add a concurrency limit"}),"."]})})}):(0,u.jsxs)(_.i,{children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{style:{width:"260px"},children:"Concurrency key"}),(0,u.jsx)("th",{style:{width:"20%"},children:"Total slots"}),(0,u.jsx)("th",{style:{width:"20%"},children:"Assigned steps"}),(0,u.jsx)("th",{style:{width:"20%"},children:"Pending steps"}),(0,u.jsx)("th",{style:{width:"20%"},children:"All steps"}),(0,u.jsx)("th",{})]})}),(0,u.jsx)("tbody",{children:g.map(function(n){return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:n.concurrencyKey}),(0,u.jsx)("td",{children:n.slotCount}),(0,u.jsx)("td",{children:n.pendingSteps.filter(function(n){return!!n.assignedTimestamp}).length}),(0,u.jsx)("td",{children:n.pendingSteps.filter(function(n){return!n.assignedTimestamp}).length}),(0,u.jsxs)("td",{children:[(0,u.jsx)("span",{style:{marginRight:16},children:n.pendingSteps.length}),(0,u.jsx)(S.V,{intent:"primary",interactive:!0,children:(0,u.jsx)(v.Z,{onClick:function(){h(n.concurrencyKey)},children:"View all"})})]}),(0,u.jsx)("td",{children:(0,u.jsx)(ConcurrencyLimitActionMenu,{concurrencyKey:n.concurrencyKey,onEdit:onEdit,onDelete:onDelete})})]},n.concurrencyKey)})})]}),(0,u.jsx)(AddConcurrencyLimitDialog,{open:(null==d?void 0:d.actionType)==="add",onClose:function(){return m(void 0)},onComplete:c,minValue:null!=s?s:1,maxValue:null!=l?l:1e3}),(0,u.jsx)(DeleteConcurrencyLimitDialog,{concurrencyKey:d&&"delete"===d.actionType?d.concurrencyKey:"",open:(null==d?void 0:d.actionType)==="delete",onClose:function(){return m(void 0)},onComplete:c}),(0,u.jsx)(EditConcurrencyLimitDialog,{open:(null==d?void 0:d.actionType)==="edit",onClose:function(){return m(void 0)},onComplete:c,concurrencyKey:(null==d?void 0:d.actionType)==="edit"?d.concurrencyKey:"",minValue:null!=s?s:1,maxValue:null!=l?l:1e3}),(0,u.jsx)(ConcurrencyStepsDialog,{title:(0,u.jsxs)("span",{children:["Concurrency steps for ",(0,u.jsx)("strong",{children:p})]}),onClose:j,concurrencyKey:p,onUpdate:c})]})},ConcurrencyLimitHeader=function(n){var e=n.onAdd;return(0,u.jsxs)(x.x,{flex:{justifyContent:"space-between",alignItems:"center"},padding:{vertical:16,horizontal:24},border:"top-and-bottom",children:[(0,u.jsxs)(x.x,{flex:{alignItems:"center",direction:"row",gap:8},children:[(0,u.jsx)(h.pm,{children:"Global op/asset concurrency"}),(0,u.jsx)(S.V,{children:"Experimental"})]}),e?(0,u.jsx)(g.zx,{icon:(0,u.jsx)(C.JO,{name:"add_circle"}),onClick:function(){return e()},children:"Add concurrency limit"}):null]})},ConcurrencyLimitActionMenu=function(n){var e=n.concurrencyKey,t=n.onDelete,r=n.onEdit;return(0,u.jsx)(I.J,{content:(0,u.jsxs)(O.v2,{children:[(0,u.jsx)(O.sN,{icon:"edit",text:"Edit",onClick:function(){return r(e)}}),(0,u.jsx)(O.sN,{icon:"delete",intent:"danger",text:"Delete",onClick:function(){return t(e)}})]}),position:"bottom-left",children:(0,u.jsx)(g.zx,{icon:(0,u.jsx)(C.JO,{name:"expand_more"})})})},isValidLimit=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!n)return!1;var r=parseInt(n);return!isNaN(r)&&String(r)===n.trim()&&r>=e&&r<=t},AddConcurrencyLimitDialog=function(n){var e,t=n.open,c=n.onClose,o=n.onComplete,l=n.maxValue,d=n.minValue,m=(0,i._)(E.useState(!1),2),y=m[0],p=m[1],h=(0,i._)(E.useState(""),2),j=h[0],f=h[1],C=(0,i._)(E.useState(""),2),b=C[0],v=C[1];E.useEffect(function(){f(""),v("")},[t]);var _=(0,i._)((0,a.D)(H),1)[0],S=(e=(0,r._)(function(){return(0,s.Jh)(this,function(n){switch(n.label){case 0:return p(!0),[4,_({variables:{concurrencyKey:b,limit:parseInt(j.trim())}})];case 1:return n.sent(),p(!1),o(),c(),[2]}})}),function(){return e.apply(this,arguments)});return(0,u.jsxs)(L.Vq,{isOpen:t,title:"Add concurrency limit",onClose:c,children:[(0,u.jsxs)(L.a7,{children:[(0,u.jsx)(x.x,{margin:{bottom:4},children:"Concurrency key:"}),(0,u.jsx)(x.x,{margin:{bottom:16},children:(0,u.jsx)(R.oi,{value:b||"",onChange:function(n){return v(n.target.value)},placeholder:"Concurrency key"})}),(0,u.jsxs)(x.x,{margin:{bottom:4},children:["Concurrency limit (",d,"-",l,"):"]}),(0,u.jsx)(x.x,{children:(0,u.jsx)(R.oi,{value:j||"",onChange:function(n){return f(n.target.value)},placeholder:"".concat(d," - ").concat(l)})})]}),(0,u.jsxs)(L.cN,{children:[(0,u.jsx)(g.zx,{intent:"none",onClick:c,children:"Cancel"}),(0,u.jsx)(g.zx,{intent:"primary",onClick:S,disabled:!isValidLimit(j.trim(),d,l)||!b||y,children:y?"Adding...":"Add limit"})]})]})},EditConcurrencyLimitDialog=function(n){var e,t=n.concurrencyKey,c=n.open,o=n.onClose,l=n.onComplete,d=n.minValue,m=n.maxValue,y=(0,i._)(E.useState(!1),2),p=y[0],j=y[1],f=(0,i._)(E.useState(""),2),C=f[0],b=f[1];E.useEffect(function(){b("")},[c]);var v=(0,i._)((0,a.D)(H),1)[0],_=(e=(0,r._)(function(){return(0,s.Jh)(this,function(n){switch(n.label){case 0:return j(!0),[4,v({variables:{concurrencyKey:t,limit:parseInt(C.trim())}})];case 1:return n.sent(),j(!1),l(),o(),[2]}})}),function(){return e.apply(this,arguments)}),S=(0,u.jsxs)(u.Fragment,{children:["Edit ",(0,u.jsx)(h.fv,{children:t})]});return(0,u.jsxs)(L.Vq,{isOpen:c,title:S,onClose:o,children:[(0,u.jsxs)(L.a7,{children:[(0,u.jsx)(x.x,{margin:{bottom:4},children:"Concurrency key:"}),(0,u.jsx)(x.x,{margin:{bottom:16},children:(0,u.jsx)("strong",{children:t})}),(0,u.jsxs)(x.x,{margin:{bottom:4},children:["Concurrency limit (",d,"-",m,"):"]}),(0,u.jsx)(x.x,{children:(0,u.jsx)(R.oi,{value:C||"",onChange:function(n){return b(n.target.value)},placeholder:"".concat(d," - ").concat(m)})})]}),(0,u.jsxs)(L.cN,{children:[(0,u.jsx)(g.zx,{intent:"none",onClick:o,children:"Close"}),p?(0,u.jsx)(g.zx,{intent:"primary",disabled:!0,children:"Updating..."}):(0,u.jsx)(g.zx,{intent:"primary",onClick:_,disabled:!isValidLimit(C.trim(),d,m),children:"Update limit"})]})]})},DeleteConcurrencyLimitDialog=function(n){var e,t=n.concurrencyKey,c=n.open,o=n.onClose,l=n.onComplete,d=(0,i._)(E.useState(!1),2),x=d[0],m=d[1],y=(0,i._)((0,a.D)(Z),1)[0],p=(e=(0,r._)(function(){return(0,s.Jh)(this,function(n){switch(n.label){case 0:return m(!0),[4,y({variables:{concurrencyKey:t}})];case 1:return n.sent(),m(!1),l(),o(),[2]}})}),function(){return e.apply(this,arguments)}),j=(0,u.jsxs)(u.Fragment,{children:["Delete ",(0,u.jsx)(h.fv,{children:t})]});return(0,u.jsxs)(L.Vq,{isOpen:c,title:j,onClose:o,children:[(0,u.jsxs)(L.a7,{children:["Delete concurrency limit\xa0",(0,u.jsx)("strong",{children:t}),"?"]}),(0,u.jsxs)(L.cN,{children:[(0,u.jsx)(g.zx,{intent:"none",onClick:o,children:"Close"}),x?(0,u.jsx)(g.zx,{intent:"danger",disabled:!0,children:"Deleting..."}):(0,u.jsx)(g.zx,{intent:"danger",onClick:p,children:"Delete limit"})]})]})},ConcurrencyActionMenu=function(n){var e=n.pendingStep,t=n.onUpdate,c=(0,i._)((0,a.D)(G),1)[0];return(0,u.jsx)(I.J,{content:(0,u.jsxs)(O.v2,{children:[(0,u.jsx)(O.sN,{icon:"status",text:"Free concurrency slot for step",onClick:(0,r._)(function(){var n;return(0,s.Jh)(this,function(r){switch(r.label){case 0:return[4,c({variables:{runId:e.runId,stepKey:e.stepKey}})];case 1:if(!(null===(n=r.sent().data)||void 0===n?void 0:n.freeConcurrencySlots))return[3,3];return t(),[4,(0,F.B7)({intent:"success",icon:"copy_to_clipboard_done",message:"Freed concurrency slot"})];case 2:r.sent(),r.label=3;case 3:return[2]}})})},"free-concurrency-slots-step"),(0,u.jsx)(O.sN,{icon:"status",text:"Free all concurrency slots for run",onClick:(0,r._)(function(){var n;return(0,s.Jh)(this,function(r){switch(r.label){case 0:return[4,(0,F.B7)({message:"Freeing concurrency slots..."})];case 1:return r.sent(),[4,c({variables:{runId:e.runId}})];case 2:if(!(null===(n=r.sent().data)||void 0===n?void 0:n.freeConcurrencySlots))return[3,4];return t(),[4,(0,F.B7)({intent:"success",icon:"copy_to_clipboard_done",message:"Freed concurrency slots"})];case 3:r.sent(),r.label=4;case 4:return[2]}})})},"free-concurrency-slots-run")]}),position:"bottom-right",children:(0,u.jsx)(g.zx,{rightIcon:(0,u.jsx)(C.JO,{name:"expand_more"}),children:"Actions"})})},ConcurrencyStepsDialog=function(n){var e=n.concurrencyKey,t=n.onClose,r=n.title,i=n.onUpdate,c=(0,l.a)(W,{variables:{concurrencyKey:e||""},skip:!e});(0,D.C4)(c,D.dT);var o=c.data,s=E.useCallback(function(){c.refetch(),i()},[c,i]);return(0,u.jsxs)(L.Vq,{isOpen:!!e,title:r,onClose:t,style:{minWidth:"400px",maxWidth:"1000px",width:"90vw",maxHeight:"90vh"},children:[(0,u.jsx)(x.x,{padding:{vertical:16},flex:{grow:1},style:{overflowY:"auto"},children:o?(0,u.jsx)(PendingStepsTable,{keyInfo:o.instance.concurrencyLimit,refresh:s}):(0,u.jsx)(x.x,{padding:{vertical:64},children:(0,u.jsx)(m.$,{purpose:"section"})})}),(0,u.jsx)(L.cN,{children:(0,u.jsx)(g.zx,{intent:"none",onClick:t,children:"Close"})})]})},PendingStepsTable=function(n){var e,t=n.keyInfo,r=n.refresh,i=(0,o._)(new Set(t.pendingSteps.map(function(n){return n.runId}))),c=(0,l.a)(X,{variables:{filter:{runIds:i}},skip:!t.pendingSteps.length}),s={};((null===(e=c.data)||void 0===e?void 0:e.pipelineRunsOrError.__typename)==="Runs"?c.data.pipelineRunsOrError.results:[]).forEach(function(n){s[n.id]=n.status});var a=(0,o._)(t.pendingSteps);a.sort(function(n,e){return n.priority&&e.priority&&n.priority!==e.priority?n.priority-e.priority:n.enqueuedTimestamp-e.enqueuedTimestamp});var d=a.filter(function(n){return!!n.assignedTimestamp}),m=a.filter(function(n){return!n.assignedTimestamp}),y=(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Run ID"}),(0,u.jsx)("th",{children:"Step key"}),(0,u.jsx)("th",{children:"Assigned"}),(0,u.jsx)("th",{children:"Queued"}),(0,u.jsx)("th",{children:(0,u.jsxs)(x.x,{flex:{alignItems:"center",direction:"row",gap:4},children:["Priority",(0,u.jsx)(K.u,{placement:"top",content:"Priority can be set on each op/asset using the 'dagster/priority' tag. Higher priority steps will be assigned slots first.",children:(0,u.jsx)(C.JO,{name:"info",color:T.md()})})]})}),(0,u.jsx)("th",{})]})});return a.length?(0,u.jsxs)(_.i,{children:[y,(0,u.jsx)("tbody",{style:{backgroundColor:T.B5()},children:d.map(function(n){return(0,u.jsx)(PendingStepRow,{step:n,statusByRunId:s,onUpdate:r},n.runId+n.stepKey)})}),(0,u.jsx)("tbody",{children:m.map(function(n){return(0,u.jsx)(PendingStepRow,{step:n,statusByRunId:s,onUpdate:r},n.runId+n.stepKey)})})]}):(0,u.jsxs)(_.i,{children:[y,(0,u.jsx)("tbody",{children:(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:6,children:(0,u.jsx)(x.x,{flex:{alignItems:"center",justifyContent:"center"},style:{color:T.$()},padding:16,children:"There are no active or pending steps for this concurrency key."})})})})]})},PendingStepRow=function(n){var e=n.step,t=n.statusByRunId,r=n.onUpdate,i=t[e.runId];return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:i?(0,u.jsx)(w.rU,{to:"/runs/".concat(e.runId),children:(0,u.jsxs)(x.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,u.jsx)(Q.O_,{status:i,size:10}),(0,u.jsx)(h.fv,{children:(0,$.EI)({id:e.runId})}),U.hd.has(i)?(0,u.jsx)(K.u,{placement:"top",content:"Slots for canceled / failed runs can automatically be freed by configuring a run monitoring setting.",children:(0,u.jsx)(C.JO,{name:"info",color:T.md()})}):null]})}):(0,u.jsx)(h.fv,{children:(0,$.EI)({id:e.runId})})}),(0,u.jsx)("td",{children:(0,u.jsx)(h.fv,{children:e.stepKey})}),(0,u.jsx)("td",{children:e.assignedTimestamp?(0,u.jsx)(z.Q,{startUnix:e.assignedTimestamp,endUnix:null}):"-"}),(0,u.jsx)("td",{children:e.enqueuedTimestamp?(0,u.jsx)(z.Q,{startUnix:e.enqueuedTimestamp,endUnix:null}):"-"}),(0,u.jsx)("td",{children:e.priority}),(0,u.jsx)("td",{children:(0,u.jsx)(ConcurrencyActionMenu,{pendingStep:e,onUpdate:r})})]})},J=(0,d.Ps)(_templateObject()),M=(0,d.Ps)(_templateObject1(),J),Y=(0,d.Ps)(_templateObject2()),B=(0,d.Ps)(_templateObject3(),M,Y),H=(0,d.Ps)(_templateObject4()),Z=(0,d.Ps)(_templateObject5()),G=(0,d.Ps)(_templateObject6()),W=(0,d.Ps)(_templateObject7(),M),X=(0,d.Ps)(_templateObject8())},4120:function(n,e,t){t.d(e,{Z:function(){return InstanceTabs}});var r=t(52322),i=t(22139),c=t(56024),o=t(2784),s=t(74897),u=t(78945),l=t(55237),a=t(76139),d=t(25195),x=t(77334),m=t(29255),y=(0,o.memo)(function(){var n=(0,o.useContext)(m.Z).daemons;return n?(0,r.jsx)(x.a,{content:n.content,position:"bottom",modifiers:{offset:{enabled:!0,options:{offset:[0,28]}}},children:(0,r.jsx)(a.JO,{name:"warning",color:d.qr()})}):null}),p=t(43180),h=t(63832),j=(0,o.memo)(function(n){var e=n.placeholder,t=(0,o.useContext)(m.Z).codeLocations;return t?"spinner"===t.type?(0,r.jsx)(p.u,{content:t.content,placement:"bottom",children:(0,r.jsx)(h.$,{purpose:"body-text",fillColor:d.md()})}):(0,r.jsx)(x.a,{content:t.content,position:"bottom",modifiers:{offset:{enabled:!0,options:{offset:[0,28]}}},children:(0,r.jsx)(a.JO,{name:"warning",color:d.qr()})}):e?(0,r.jsx)("div",{style:{width:"16px"}}):null}),f=t(40049),InstanceTabs=function(n){var e=n.refreshState,t=n.tab,a=(0,o.useContext)(s.N).healthTitle,d=(0,u._)();return(0,r.jsxs)(i.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,r.jsxs)(c.mQ,{selectedTabId:t,children:[(0,r.jsx)(f.f,{id:"locations",title:"Code locations",to:"/locations",icon:(0,r.jsx)(j,{placeholder:!1})}),(0,r.jsx)(f.f,{id:"health",title:a,to:"/health",icon:(0,r.jsx)(y,{})}),d?(0,r.jsx)(f.f,{id:"concurrency",title:"Concurrency limits",to:"/concurrency"}):null,d?(0,r.jsx)(f.f,{id:"config",title:"Configuration",to:"/config"}):null]}),e?(0,r.jsx)(i.x,{padding:{bottom:8},children:(0,r.jsx)(l.xi,{refreshState:e})}):null]})}}}]);
//# sourceMappingURL=704.5c001df0420b48e9.js.map
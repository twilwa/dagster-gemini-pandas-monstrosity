"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76],{12518:function(e,n,r){r.d(n,{I:function(){return ScheduleOrSensorTag}});var s=r(58467),t=r(52322),i=r(57830),o=r(12084),c=r(25195),l=r(22139),a=r(43180),d=r(3842),u=r(16861),h=r(2784),x=r(47933),p=r(17668),j=r(66207),m=r(54483),f=r(23054),g=r(38153),ScheduleOrSensorTag=function(e){var n=e.repoAddress,r=e.schedules,l=void 0===r?[]:r,a=e.sensors,d=void 0===a?[]:a,u=e.showSwitch,x=void 0===u||u,j=(0,s._)((0,h.useState)(!1),2),m=j[0],f=j[1],g=l.length,y=d.length;return g>1||y>1||g&&y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.V,{icon:g>1?"schedule":"sensors",children:(0,t.jsx)(o.Z,{onClick:function(){return f(!0)},color:c.Es(),children:g&&y?"".concat(g+y," schedules/sensors"):g?"".concat(g," schedules"):"".concat(y," sensors")})}),(0,t.jsx)(p.f,{isOpen:m,onClose:function(){return f(!1)},repoAddress:n,schedules:l,sensors:d,showSwitch:x})]}):g?(0,t.jsx)(MatchingSchedule,{schedule:l[0],repoAddress:n,showSwitch:x}):y?(0,t.jsx)(MatchingSensor,{sensor:d[0],repoAddress:n,showSwitch:x}):(0,t.jsx)("div",{style:{display:"none"},children:"No schedules or sensors"})},MatchingSchedule=function(e){var n=e.schedule,r=e.repoAddress,s=e.showSwitch,o=n.cronSchedule,c=n.executionTimezone,u="RUNNING"===n.scheduleState.status,h=(0,t.jsx)(i.V,{intent:u?"primary":"none",icon:"schedule",children:(0,t.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,t.jsx)(x.rU,{to:(0,g.$U)(r,"/schedules/".concat(n.name)),style:{overflow:"hidden",textOverflow:"ellipsis"},children:(0,m.A)(o,c||"UTC")}),s?(0,t.jsx)(j.M,{size:"small",repoAddress:r,schedule:n}):null]})});return n.cronSchedule?(0,t.jsx)(a.u,{placement:"top-start",content:(0,t.jsxs)(l.x,{flex:{direction:"column",gap:4},children:[(0,t.jsxs)("div",{children:["Name: ",(0,t.jsx)("strong",{children:n.name})]}),(0,t.jsxs)("div",{children:["Cron:"," ",(0,t.jsxs)("span",{style:{fontFamily:d.b.monospace,marginLeft:"4px"},children:["(",n.cronSchedule,")"]})]}),(0,t.jsxs)("div",{children:["Timezone: ",(0,t.jsx)("strong",{children:n.executionTimezone||"UTC"})]})]}),children:h}):h},MatchingSensor=function(e){var n=e.sensor,r=e.repoAddress,s=e.showSwitch,o="RUNNING"===n.sensorState.status;return(0,t.jsx)(i.V,{intent:o?"primary":"none",icon:"sensors",children:(0,t.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,t.jsx)(x.rU,{to:(0,g.$U)(r,"/sensors/".concat(n.name)),style:{maxWidth:200,overflow:"hidden"},children:(0,t.jsx)(u.g,{text:n.name})}),s?(0,t.jsx)(f.c,{size:"small",repoAddress:r,sensor:n}):null]})})}},56043:function(e,n,r){r.d(n,{r:function(){return ResourceRoot},$:function(){return succinctType}});var s=r(85333),t=r(6692),i=r(73235),o=r(52322),c=r(40794),l=r(60138),a=r(22139),d=r(25195),u=r(28888),h=r(17131),x=r(81308),p=r(57830),j=r(9676),m=r(59692),f=r(12084),g=r(10735),y=r(43180),b=r(54266),v=r(92364),R=r(76139),w=r(16861);r(2784);var U=r(7267),O=r(47933),S=r(56024),_=r(40049),E=r(38153),N={configuration:"Configuration",uses:"Uses"},ResourceTabs=function(e){var n=e.repoAddress,r=e.resourceName,s=e.numUses,t=(0,U.$B)(["/locations/:repoPath/resources/:name/:tab?"]),i=(null==t?void 0:t.params.tab)&&N[null==t?void 0:t.params.tab]||"Configuration";return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(S.mQ,{size:"large",selectedTabId:i,children:[(0,o.jsx)(_.f,{id:"Configuration",title:"Configuration",to:(0,E.$U)(n,"/resources/".concat(r))},"configuration"),(0,o.jsx)(_.f,{id:"Uses",title:(0,o.jsxs)(a.x,{flex:{gap:4,alignItems:"center"},children:["Uses",(0,o.jsx)(p.V,{intent:"none",minimal:!0,children:s})]}),to:(0,E.$U)(n,"/resources/".concat(r,"/uses"))},"uses")]})})},T=r(66904),$=r(91195),A=r(68028),D=r(28090),L=r(28252),J=r(63386),C=r(90894),I=r(44),P=r(56121);function _templateObject(){var e=(0,i._)(["\n  fragment ResourceDetailsFragment on ResourceDetails {\n    name\n    description\n    configFields {\n      name\n      description\n      configTypeKey\n      isRequired\n      defaultValueAsJson\n    }\n    configuredValues {\n      key\n      value\n      type\n    }\n    nestedResources {\n      name\n      type\n      resource {\n        name\n        resourceType\n        description\n      }\n    }\n    parentResources {\n      name\n      resource {\n        name\n        resourceType\n        description\n      }\n    }\n    assetKeysUsing {\n      path\n    }\n    schedulesUsing\n    sensorsUsing\n    jobsOpsUsing {\n      job {\n        id\n        name\n      }\n      opsUsing {\n        handleID\n        solid {\n          name\n        }\n      }\n    }\n    resourceType\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,i._)(["\n  query ResourceRootQuery($resourceSelector: ResourceSelector!) {\n    topLevelResourceDetailsOrError(resourceSelector: $resourceSelector) {\n      ...ResourceDetailsFragment\n      ...PythonErrorFragment\n    }\n  }\n  ","\n  ","\n"]);return _templateObject1=function(){return e},e}var succinctType=function(e){return(null==e?void 0:e.split(".").pop())||null},resourceDisplayName=function(e){return e?e.name.startsWith("_nested_")?succinctType(null==e?void 0:e.resourceType):e.name:null},SectionHeader=function(e){return(0,o.jsx)(a.x,{padding:{left:24,vertical:16},background:d.gJ(),border:"all",children:e.children})},ResourceRoot=function(e){(0,A.Px)();var n,r,i,l,b=e.repoAddress,v=(0,U.UO)().resourceName;(0,L.j)("Resource: ".concat(v));var R=(0,t._)((0,s._)({},(0,P.$)(b)),{resourceName:v}),w=(0,c.a)(z,{variables:{resourceSelector:R}}),O=(null===(n=w.data)||void 0===n?void 0:n.topLevelResourceDetailsOrError.__typename)==="ResourceDetails"&&resourceDisplayName(null===(r=w.data)||void 0===r?void 0:r.topLevelResourceDetailsOrError)||v,S=(null===(i=w.data)||void 0===i?void 0:i.topLevelResourceDetailsOrError.__typename)==="ResourceDetails"?w.data.topLevelResourceDetailsOrError.parentResources.length+w.data.topLevelResourceDetailsOrError.assetKeysUsing.length+w.data.topLevelResourceDetailsOrError.jobsOpsUsing.length+w.data.topLevelResourceDetailsOrError.schedulesUsing.length+w.data.topLevelResourceDetailsOrError.sensorsUsing.length:0,_=null===(l=(0,U.$B)(["/locations/:repoPath/resources/:name/:tab?"]))||void 0===l?void 0:l.params.tab;return(0,o.jsxs)(u.T,{style:{height:"100%",overflow:"hidden"},children:[(0,o.jsx)(h.m,{title:(0,o.jsx)(x.X6,{children:O}),tags:(0,o.jsxs)(p.V,{icon:"resource",children:["Resource in ",(0,o.jsx)(J.b,{repoAddress:b})]}),tabs:(0,o.jsx)(ResourceTabs,{repoAddress:b,resourceName:v,numUses:S})}),(0,o.jsx)(C.g,{queryResult:w,allowStaleData:!0,children:function(e){var n=e.topLevelResourceDetailsOrError;if("ResourceDetails"!==n.__typename){var r=null;return"PythonError"===n.__typename&&(r=n.message),(0,o.jsx)(j.b,{intent:"warning",title:(0,o.jsxs)(m.Z,{direction:"row",spacing:4,children:[(0,o.jsx)("div",{children:"Could not load resource."}),r&&(0,o.jsx)(f.Z,{color:d.Es(),underline:"always",onClick:function(){(0,T._K)({title:"Python error",body:r})},children:"View error"})]})})}var s=succinctType(n.resourceType);return(0,o.jsx)("div",{style:{height:"100%",display:"flex"},children:(0,o.jsx)(g.O,{identifier:"resource-explorer",firstInitialPercent:50,firstMinSize:400,first:(0,o.jsx)(a.x,{padding:{bottom:48},style:{overflowY:"auto"},children:"uses"===_?(0,o.jsx)(ResourceUses,{resourceDetails:n,repoAddress:b,numUses:S}):(0,o.jsx)(ResourceConfig,{resourceDetails:n,repoAddress:b})}),second:(0,o.jsxs)(a.x,{padding:{bottom:48},style:{overflowY:"auto"},children:[(0,o.jsxs)(a.x,{flex:{gap:4,direction:"column"},margin:{left:24,right:12,vertical:16},children:[(0,o.jsx)(x.X6,{children:O}),(0,o.jsx)(y.u,{content:n.resourceType||"",children:(0,o.jsx)(x.fv,{children:s})})]}),(0,o.jsx)(a.x,{border:"top-and-bottom",background:d.gJ(),padding:{vertical:8,horizontal:24},style:{fontSize:"12px",fontWeight:500},children:"Description"}),(0,o.jsx)(a.x,{padding:{horizontal:24,vertical:16},children:n.description?(0,o.jsx)(I.U,{children:n.description.split("\n").map(function(e){return e.replace(/^    /,"")}).join("\n")}):"None"})]})})})}})]})},ResourceConfig=function(e){var n=e.resourceDetails,r=e.repoAddress,s=Object.fromEntries(n.configuredValues.map(function(e){return[e.key,{value:e.value,type:e.type}]})),t=n.nestedResources;return(0,o.jsxs)(o.Fragment,{children:[t.length>0&&(0,o.jsxs)(a.x,{children:[(0,o.jsx)(SectionHeader,{children:(0,o.jsx)(x.pm,{children:"Resource dependencies"})}),(0,o.jsxs)(b.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{width:120},children:"Key"}),(0,o.jsx)("th",{style:{width:180},children:"Resource"})]})}),(0,o.jsx)("tbody",{children:t.map(function(e){var n="TOP_LEVEL"===e.type&&e.resource?(0,o.jsx)(ResourceEntry,{url:(0,E.$U)(r,"/resources/".concat(e.name)),name:resourceDisplayName(e.resource)||"",description:e.resource.description||void 0},e.name):(0,o.jsx)(ResourceEntry,{name:e.name},e.name);return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.name})}),(0,o.jsx)("td",{colSpan:2,children:n})]},e.name)})})]})]}),(0,o.jsxs)(a.x,{children:[(0,o.jsx)(SectionHeader,{children:(0,o.jsx)(x.pm,{children:"Configuration"})}),(0,o.jsxs)(b.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{width:120},children:"Key"}),(0,o.jsx)("th",{style:{width:90},children:"Type"}),(0,o.jsx)("th",{style:{width:90},children:"Value"})]})}),(0,o.jsx)("tbody",{children:0===n.configFields.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:3,children:(0,o.jsx)(a.x,{padding:{vertical:8},children:(0,o.jsx)(v.t,{icon:"settings",title:"No configuration",description:"This resource has no configuration fields."})})})}):n.configFields.map(function(e){var n,r=e.defaultValueAsJson,t=s.hasOwnProperty(e.name)?s[e.name].type:null,i=s.hasOwnProperty(e.name)?s[e.name].value:r,c="VALUE"===t&&r===i;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsxs)(a.x,{flex:{direction:"column",gap:4,alignItems:"flex-start"},children:[(0,o.jsx)("strong",{children:e.name}),(0,o.jsx)("div",{style:{fontSize:12,color:d.$()},children:e.description})]})}),(0,o.jsx)("td",{children:"StringSourceType"===(n=e.configTypeKey)?"String":"IntSourceType"===n?"Int":"BoolSourceType"===n?"Bool":n}),(0,o.jsx)("td",{children:(0,o.jsxs)(a.x,{flex:{direction:"row",gap:16},children:[(0,o.jsx)(y.u,{content:(0,o.jsxs)(o.Fragment,{children:["Default: ",r]}),canShow:!c&&!!r,children:"ENV_VAR"===t?(0,o.jsx)(p.V,{children:i}):i}),c&&(0,o.jsx)(p.V,{children:"Default"}),"ENV_VAR"===t&&(0,o.jsx)(p.V,{intent:"success",children:"Env var"})]})})]},e.name)})})]})]})]})},ResourceUses=function(e){var n=e.resourceDetails,r=e.repoAddress;if(0===e.numUses)return(0,o.jsx)(a.x,{padding:{vertical:16},children:(0,o.jsx)(v.t,{icon:"list",title:"No uses",description:"This resource is not used by any assets or resources."})});var s=n.parentResources;return(0,o.jsxs)(o.Fragment,{children:[s.length>0&&(0,o.jsxs)(a.x,{children:[(0,o.jsx)(SectionHeader,{children:(0,o.jsx)(x.pm,{children:"Parent resources"})}),(0,o.jsxs)(b.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{children:(0,o.jsx)("th",{children:"Resource"})})}),(0,o.jsx)("tbody",{children:s.map(function(e){return e.resource&&(0,o.jsx)("tr",{children:(0,o.jsx)("td",{children:(0,o.jsx)(ResourceEntry,{url:(0,E.$U)(r,"/resources/".concat(e.name)),name:resourceDisplayName(e.resource)||"",description:e.resource.description||void 0})})},e.name)})})]})]}),n.assetKeysUsing.length>0&&(0,o.jsxs)(a.x,{children:[(0,o.jsx)(SectionHeader,{children:(0,o.jsx)(x.pm,{children:"Assets"})}),(0,o.jsxs)(b.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{children:(0,o.jsx)("th",{children:"Asset key"})})}),(0,o.jsx)("tbody",{children:n.assetKeysUsing.map(function(e){return(0,o.jsx)("tr",{children:(0,o.jsx)("td",{children:(0,o.jsx)(D.R,{path:e.path,icon:"asset"},e.path.join("/"))})},e.path.join("/"))})})]})]}),n.jobsOpsUsing.length>0&&(0,o.jsxs)(a.x,{children:[(0,o.jsx)(SectionHeader,{children:(0,o.jsx)(x.pm,{children:"Jobs"})}),(0,o.jsxs)(b.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Job name"}),(0,o.jsx)("th",{children:"Ops"})]})}),(0,o.jsx)("tbody",{children:n.jobsOpsUsing.map(function(e){return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[(0,o.jsx)(R.JO,{name:"job",color:d.md()}),(0,o.jsx)(O.rU,{to:(0,E.$U)(r,"/jobs/".concat(e.job.name)),children:(0,o.jsx)(w.g,{text:e.job.name})})]})}),(0,o.jsx)("td",{children:(0,o.jsx)(a.x,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:e.opsUsing.map(function(n){return(0,o.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[(0,o.jsx)(R.JO,{name:"op",color:d.md()}),(0,o.jsx)(O.rU,{to:(0,E.$U)(r,"/jobs/".concat(e.job.name,"/").concat(n.handleID.split(".").join("/"))),children:(0,o.jsx)(w.g,{text:n.solid.name})})]},n.handleID)})})})]},e.job.name)})})]})]}),[{name:"Schedules",objects:n.schedulesUsing,icon:(0,o.jsx)(R.JO,{name:"schedule",color:d.md()})},{name:"Sensors",objects:n.sensorsUsing,icon:(0,o.jsx)(R.JO,{name:"sensors",color:d.md()})}].filter(function(e){return e.objects.length>0}).map(function(e){var n=e.name,s=e.objects,t=e.icon;return(0,o.jsxs)("div",{children:[(0,o.jsx)(SectionHeader,{children:(0,o.jsx)(x.pm,{children:n})}),(0,o.jsxs)(b.i,{children:[(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{children:(0,o.jsx)("th",{children:"Name"})})}),(0,o.jsx)("tbody",{children:s.map(function(e){return(0,o.jsx)("tr",{children:(0,o.jsx)("td",{children:(0,o.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[t,(0,o.jsx)(O.rU,{to:(0,E.$U)(r,"/".concat(n.toLowerCase(),"/").concat(e)),children:(0,o.jsx)(w.g,{text:e})})]})})},n+":"+e)})})]})]},n)})]})},ResourceEntry=function(e){var n=e.url,r=e.name,s=e.description;return(0,o.jsxs)(a.x,{flex:{direction:"column"},children:[(0,o.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:4},style:{maxWidth:"100%"},children:[(0,o.jsx)(R.JO,{name:"resource",color:d.L$()}),(0,o.jsx)("div",{style:{maxWidth:"100%",whiteSpace:"nowrap",fontWeight:500},children:n?(0,o.jsx)(O.rU,{to:n,style:{overflow:"hidden"},children:(0,o.jsx)(w.g,{text:r})}):(0,o.jsx)(w.g,{text:r})})]}),(0,o.jsx)(x.aU,{children:s})]})},V=(0,l.Ps)(_templateObject()),z=(0,l.Ps)(_templateObject1(),V,$.B)},98319:function(e,n,r){r.d(n,{K:function(){return VirtualizedResourceRow},f:function(){return VirtualizedResourceHeader}});var s=r(73235),t=r(52322),i=r(22139),o=r(76139),c=r(25195),l=r(16861),a=r(81308),d=r(43180),u=r(47933),h=r(35505),x=r(56043),p=r(55658),j=r(38153);function _templateObject(){var e=(0,s._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n"]);return _templateObject=function(){return e},e}var m="1.5fr 1fr 1fr",VirtualizedResourceRow=function(e){var n=e.name,r=e.description,s=e.repoAddress,h=e.start,m=e.height,g=e.resourceType,y=e.parentResources,b=e.jobsOpsUsing,v=e.assetKeysUsing,R=e.schedulesUsing,w=e.sensorsUsing,U=(0,x.$)(g),O=y.length+b.length+v.length+R.length+w.length;return(0,t.jsx)(p.X2,{$height:m,$start:h,children:(0,t.jsxs)(f,{border:"bottom",children:[(0,t.jsx)(p.E5,{children:(0,t.jsxs)(i.x,{flex:{direction:"column",gap:4},children:[(0,t.jsxs)(i.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,t.jsx)(o.JO,{name:"resource",color:c.md()}),(0,t.jsx)("span",{style:{fontWeight:500},children:(0,t.jsx)(u.rU,{to:(0,j.$U)(s,"/resources/".concat(n)),children:(0,t.jsx)(l.g,{text:n})})})]}),(0,t.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,t.jsx)(a.YS,{style:{color:c.$(),whiteSpace:"nowrap"},children:r})})]})}),(0,t.jsx)(p.E5,{children:(0,t.jsx)(d.u,{content:g,children:(0,t.jsx)(a.fv,{children:U})})}),(0,t.jsx)(p.E5,{children:(0,t.jsx)(u.rU,{to:(0,j.$U)(s,"/resources/".concat(n,"/uses")),children:O})})]})})},VirtualizedResourceHeader=function(){return(0,t.jsxs)(i.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:m,height:"32px",fontSize:"12px",color:c.$()},children:[(0,t.jsx)(p.qN,{children:"Name"}),(0,t.jsx)(p.qN,{children:"Type"}),(0,t.jsx)(p.qN,{children:"Uses"})]})},f=(0,h.ZP)(i.x).withConfig({componentId:"sc-fe08721c-0"})(_templateObject(),m)},76588:function(e,n,r){r.d(n,{L:function(){return O},g:function(){return WorkspaceResourcesRoot}});var s=r(58467),t=r(73235),i=r(52322),o=r(40794),c=r(60138),l=r(22139),a=r(63832),d=r(25195),u=r(92364),h=r(34822),x=r(2784),p=r(85333),j=r(88510),m=r(98319),f=r(55658),VirtualizedResourceTable=function(e){var n=e.repoAddress,r=e.resources,s=(0,x.useRef)(null),t=(0,j.MG)({count:r.length,getScrollElement:function(){return s.current},estimateSize:function(){return 64},overscan:10}),o=t.getTotalSize(),c=t.getVirtualItems();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.f,{}),(0,i.jsx)("div",{style:{overflow:"hidden"},children:(0,i.jsx)(f.W2,{ref:s,children:(0,i.jsx)(f.Nh,{$totalHeight:o,children:c.map(function(e){var s=e.index,t=e.key,o=e.size,c=e.start,l=r[s];return(0,i.jsx)(m.K,(0,p._)({repoAddress:n,height:o,start:c},l),t)})})})})]})},g=r(91195),y=r(55237),b=r(68028),v=r(28252),R=r(20763),w=r(44254),U=r(56121);function _templateObject(){var e=(0,t._)(["\n  fragment ResourceEntryFragment on ResourceDetails {\n    name\n    description\n    resourceType\n    parentResources {\n      name\n    }\n    assetKeysUsing {\n      path\n    }\n    jobsOpsUsing {\n      job {\n        id\n      }\n    }\n    schedulesUsing\n    sensorsUsing\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,t._)(["\n  query WorkspaceResourcesQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        allTopLevelResourceDetails {\n          id\n          ...ResourceEntryFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return _templateObject1=function(){return e},e}var WorkspaceResourcesRoot=function(e){var n=e.repoAddress;(0,b.Px)();var r=(0,w.Uz)(n);(0,v.j)("Resources: ".concat(r));var t=(0,s._)((0,x.useState)(""),2),c=t[0],p=t[1],j=(0,U.$)(n),m=(0,o.a)(S,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:j}}),f=m.data,g=m.loading,O=(0,y.C4)(m,y.dT),_=c.trim().toLocaleLowerCase(),E=_.length>0,N=(0,x.useMemo)(function(){return(null==f?void 0:f.repositoryOrError.__typename)==="Repository"?f.repositoryOrError.allTopLevelResourceDetails:[]},[f]),T=(0,x.useMemo)(function(){var e=_.toLocaleLowerCase();return N.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})},[N,_]);return(0,i.jsxs)(l.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,i.jsx)(R.h,{repoAddress:n,tab:"resources",refreshState:O,queryData:m}),(0,i.jsx)(l.x,{padding:{horizontal:24,vertical:16},children:(0,i.jsx)(h.oi,{icon:"search",value:c,onChange:function(e){return p(e.target.value)},placeholder:"Filter by resource name…",style:{width:"340px"}})}),g&&!f?(0,i.jsx)(l.x,{padding:64,children:(0,i.jsx)(a.$,{purpose:"page"})}):g&&!f?(0,i.jsx)(l.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,i.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,i.jsx)(a.$,{purpose:"body-text"}),(0,i.jsx)("div",{style:{color:d.$()},children:"Loading resources…"})]})}):T.length?(0,i.jsx)(VirtualizedResourceTable,{repoAddress:n,resources:T}):E?(0,i.jsx)(l.x,{padding:{top:20},children:(0,i.jsx)(u.t,{icon:"search",title:"No matching resources",description:(0,i.jsxs)("div",{children:["No resources matching ",(0,i.jsx)("strong",{children:c})," were found in ",r]})})}):(0,i.jsx)(l.x,{padding:{top:20},children:(0,i.jsx)(u.t,{icon:"search",title:"No resources",description:"No resources were found in ".concat(r)})})]})},O=(0,c.Ps)(_templateObject()),S=(0,c.Ps)(_templateObject1(),g.B,O)},9901:function(e,n,r){r.d(n,{I:function(){return VirtualizedJobHeader},b:function(){return VirtualizedJobRow}});var s=r(58467),t=r(73235),i=r(82550),o=r(52322),c=r(83601),l=r(60138),a=r(16861),d=r(22139),u=r(25195),h=r(2784),x=r(47933),p=r(35505),j=r(86839),m=r(46988),f=r(38153),g=r(55237),y=r(44678),b=r(63832),v=r(37783),R=r(43180),w=r(9001),U=r(76139),O=r(54949),S=r(185),_=r(18960),E=r(61935),N=r(95388),T=r(94370),$=r(5035);function _templateObject(){var e=(0,t._)(["\n  query RunReExecutionQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        status\n        pipelineName\n        executionPlan {\n          artifactsPersisted\n          ...ExecutionPlanToGraphFragment\n        }\n      }\n    }\n  }\n  ","\n"]);return _templateObject=function(){return e},e}var JobMenu=function(e){var n=e.job,r=e.isAssetJob,t=e.repoAddress,i=n.runs.length?n.runs[0]:null,l={pipelineName:n.name,repositoryName:t.name,repositoryLocationName:t.location},a=(0,S.DO)(n.name),d=(0,T.D)(),u=(0,O.xz)(t.location),x=u.permissions,p=x.canLaunchPipelineReexecution,j=x.canLaunchPipelineExecution,m=u.disabledReasons,g=(0,s._)((0,c.t)(A),2),_=g[0],D=g[1].data,L=(0,h.useCallback)(function(){(null==i?void 0:i.id)&&_({variables:{runId:i.id}})},[i,_]),J=(null==D?void 0:D.pipelineRunOrError.__typename)==="Run"?null==D?void 0:D.pipelineRunOrError:null,C="loading"===r?(0,o.jsx)(y.sN,{icon:"execute",text:"Loading...",disabled:!0}):!0===r?(0,o.jsx)(y.sN,{icon:a.loading?(0,o.jsx)(b.$,{purpose:"caption-text"}):"execute",text:"Launch new run",disabled:!j,onClick:function(e){return a.onClick(l,e)}}):(0,o.jsx)($.U,{icon:"execute",text:"Launch new run",disabled:!j,to:(0,f.jT)({repoName:t.name,repoLocation:t.location,pipelineName:n.name,isJob:n.isJob,path:"/playground"})}),I=(0,o.jsx)(y.sN,{icon:"replay",text:"Re-execute latest run",onClick:function(){return J?d(J,E.hmq.ALL_STEPS):void 0},disabled:!p||!J||!(0,N.EP)(J)}),P=(0,o.jsx)(y.sN,{icon:"sync_problem",text:"Re-execute latest run from failure",onClick:function(){return J?d(J,E.hmq.FROM_FAILURE):void 0},disabled:!p||!J||!(0,N.VM)(J)});return(0,o.jsxs)(o.Fragment,{children:[a.launchpadElement,(0,o.jsx)(v.J,{onOpened:function(){return L()},content:(0,o.jsxs)(y.v2,{children:[(0,o.jsx)($.U,{to:(0,f.jT)({repoName:t.name,repoLocation:t.location,pipelineName:n.name,isJob:n.isJob}),icon:"job",text:"View job"}),(0,o.jsx)($.U,{to:(0,f.jT)({repoName:t.name,repoLocation:t.location,pipelineName:n.name,isJob:n.isJob,path:"/runs"}),icon:"checklist",text:"View all recent runs"}),j?C:(0,o.jsx)(R.u,{content:m.canLaunchPipelineExecution,display:"block",children:C}),p?I:(0,o.jsx)(R.u,{content:m.canLaunchPipelineReexecution,display:"block",children:I}),p?P:(0,o.jsx)(R.u,{content:m.canLaunchPipelineReexecution,display:"block",children:P})]}),position:"bottom-left",children:(0,o.jsx)(w.zx,{icon:(0,o.jsx)(U.JO,{name:"expand_more"})})})]})},A=(0,l.Ps)(_templateObject(),_.$),D=r(17212),L=r(12518),J=r(98349),C=r(38917),I=r(66207),P=r(23054),V=r(55658);function VirtualizedJobRow_templateObject(){var e=(0,t._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n"]);return VirtualizedJobRow_templateObject=function(){return e},e}function _templateObject1(){var e=(0,t._)(["\n  width: 100%;\n\n  > .bp4-popover2-target {\n    width: 100%;\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,t._)(["\n  query SingleJobQuery($selector: PipelineSelector!) {\n    pipelineOrError(params: $selector) {\n      ... on Pipeline {\n        id\n        name\n        isJob\n        isAssetJob\n        description\n        runs(limit: 5) {\n          id\n          ...RunTimeFragment\n        }\n        schedules {\n          id\n          ...ScheduleSwitchFragment\n        }\n        sensors {\n          id\n          ...SensorSwitchFragment\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return _templateObject2=function(){return e},e}var z="1.5fr 1fr 180px 96px 80px",VirtualizedJobRow=function(e){var n=e.name,r=e.isJob,t=e.repoAddress,l=e.start,u=e.height,p=(0,s._)((0,c.t)(F,{variables:{selector:(0,m._T)(t,n)}}),2),y=p[0],b=p[1];(0,j.v5)(y),(0,g.C4)(b,g.dT);var v=b.data,R=(null==v?void 0:v.pipelineOrError.__typename)==="Pipeline"?null==v?void 0:v.pipelineOrError:void 0,w=(0,h.useMemo)(function(){return R?{schedules:R.schedules,sensors:R.sensors}:{schedules:[],sensors:[]}},[R]),U=w.schedules,O=w.sensors,S=(0,h.useMemo)(function(){if(R){var e=R.runs;if(e.length)return(0,i._)(e)}return[]},[R]);return(0,o.jsx)(V.X2,{$height:u,$start:l,children:(0,o.jsxs)(k,{border:"bottom",children:[(0,o.jsxs)(V.E5,{children:[(0,o.jsx)("div",{style:{maxWidth:"100%",whiteSpace:"nowrap",fontWeight:500},children:(0,o.jsx)(x.rU,{to:(0,f.$U)(t,"/jobs/".concat(n)),children:(0,o.jsx)(a.g,{text:n})})}),(0,o.jsx)(j.HB,{children:(null==R?void 0:R.description)||""})]}),(0,o.jsx)(V.E5,{children:U.length||O.length?(0,o.jsx)(d.x,{flex:{direction:"column",alignItems:"flex-start",gap:8},children:(0,o.jsx)(q,{children:(0,o.jsx)(L.I,{schedules:U,sensors:O,repoAddress:t})})}):(0,o.jsx)(j.mq,{queryResult:b})}),(0,o.jsx)(V.E5,{children:S[0]?(0,o.jsx)(D.Z,{run:S[0],showButton:!1,showHover:!0,showSummary:!1,name:n}):(0,o.jsx)(j.mq,{queryResult:b})}),(0,o.jsx)(V.E5,{children:S.length?(0,o.jsx)(d.x,{padding:{top:4},children:(0,o.jsx)(J.JH,{jobName:n,runs:(0,i._)(S).reverse(),fade:!0})}):(0,o.jsx)(j.mq,{queryResult:b})}),(0,o.jsx)(V.E5,{children:(0,o.jsx)(d.x,{flex:{justifyContent:"flex-end"},style:{marginTop:"-2px"},children:(0,o.jsx)(JobMenu,{job:{name:n,isJob:r,runs:S},isAssetJob:R?R.isAssetJob:"loading",repoAddress:t})})})]})})},VirtualizedJobHeader=function(){return(0,o.jsxs)(d.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:z,height:"32px",fontSize:"12px",color:u.$()},children:[(0,o.jsx)(V.qN,{children:"Name"}),(0,o.jsx)(V.qN,{children:"Schedules/sensors"}),(0,o.jsx)(V.qN,{children:"Latest run"}),(0,o.jsx)(V.qN,{children:"Run history"}),(0,o.jsx)(V.qN,{})]})},k=(0,p.ZP)(d.x).withConfig({componentId:"sc-2ba4ca3c-0"})(VirtualizedJobRow_templateObject(),z),q=p.ZP.div.withConfig({componentId:"sc-2ba4ca3c-1"})(_templateObject1()),F=(0,l.Ps)(_templateObject2(),C.$X,I.J,P.U)},20763:function(e,n,r){r.d(n,{h:function(){return WorkspaceHeader}});var s=r(52322),t=r(17131),i=r(22139),o=r(81308),c=r(25195),l=r(43180),a=r(9001),d=r(76139),u=r(47933),h=r(56024),x=r(38153),p=r(55237),j=r(40049),WorkspaceTabs=function(e){var n=e.repoAddress,r=e.refreshState,t=e.tab;return(0,s.jsxs)(i.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,s.jsxs)(h.mQ,{selectedTabId:t,children:[(0,s.jsx)(j.f,{id:"assets",title:"Assets",to:(0,x.$U)(n,"/assets")}),(0,s.jsx)(j.f,{id:"jobs",title:"Jobs",to:(0,x.$U)(n,"/jobs")}),(0,s.jsx)(j.f,{id:"schedules",title:"Schedules",to:(0,x.$U)(n,"/schedules")}),(0,s.jsx)(j.f,{id:"sensors",title:"Sensors",to:(0,x.$U)(n,"/sensors")}),(0,s.jsx)(j.f,{id:"graphs",title:"Graphs",to:(0,x.$U)(n,"/graphs")}),(0,s.jsx)(j.f,{id:"ops",title:"Ops",to:(0,x.$U)(n,"/ops")}),(0,s.jsx)(j.f,{id:"resources",title:"Resources",to:(0,x.$U)(n,"/resources")})]}),r?(0,s.jsx)(i.x,{padding:{bottom:8},children:(0,s.jsx)(p.xi,{refreshState:r})}):null]})},m=r(44254),f=r(33308),WorkspaceHeader=function(e){var n=e.repoAddress,r=e.tab,h=e.refreshState,x=e.queryData;return(0,s.jsx)(t.m,{title:(0,s.jsxs)(i.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,s.jsx)(o.X6,{children:(0,s.jsx)(u.rU,{to:"/locations",style:{color:c.Ep()},children:"Deployment"})}),(0,s.jsx)(o.X6,{children:"/"}),(0,s.jsx)(o.X6,{style:{color:c.$()},children:(0,m.Uz)(n)})]}),tabs:(0,s.jsx)(WorkspaceTabs,{repoAddress:n,tab:r,refreshState:h,queryData:x}),right:(0,s.jsx)(f.s,{location:n.location,ChildComponent:function(e){var n=e.tryReload,r=e.reloading,t=e.hasReloadPermission;return(0,s.jsx)(l.u,{canShow:!t,content:t?"":f.H,useDisabledButtonTooltipFix:!0,children:(0,s.jsx)(a.zx,{onClick:function(){return n()},loading:r,disabled:!t,icon:(0,s.jsx)(d.JO,{name:"refresh"}),outlined:!0,children:"Reload definitions"})})}})})}}}]);
//# sourceMappingURL=76.bfc0e15a63a30073.js.map
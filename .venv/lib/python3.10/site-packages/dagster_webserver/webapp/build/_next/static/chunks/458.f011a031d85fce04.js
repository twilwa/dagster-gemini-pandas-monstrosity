"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[458],{74772:function(e,n,t){t.r(n),t.d(n,{CodeLocationsPage:function(){return CodeLocationsPage},CodeLocationsPageContent:function(){return CodeLocationsPageContent},default:function(){return ei}});var o=t(58467),i=t(52322),r=t(22139),a=t(34822),s=t(81308),c=t(17131),l=t(2784),d=t(74897),u=t(4120),flatten=function(e){var n=[],t=!0,o=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0)!function(){var e=r.value,t=e.locationOrLoadError;t&&(null==t?void 0:t.__typename)!=="PythonError"?t.repositories.forEach(function(t){n.push({type:"repository",codeLocation:e,repository:t})}):n.push({type:"error",node:e})}()}catch(e){o=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(o)throw i}}return n},filterBySearch=function(e,n){var t=n.toLocaleLowerCase();return e.filter(function(e){return"error"===e.type?e.node.name.toLocaleLowerCase().includes(t):e.codeLocation.name.toLocaleLowerCase().includes(t)||e.repository.name.toLocaleLowerCase().includes(t)})},flattenCodeLocationRows=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=flatten(e),o=filterBySearch(t,n);return{flattened:t,filtered:o}},x=t(68028),h=t(28252),p=t(39852),j=t(63832),f=t(92364),m=t(88510),g=t(73235),v=t(82550),y=t(16861),C=t(9001),L=t(25195),b=t(47933),w=t(35505),_=t(87612),O=t(85333),E=t(6692),R=t(44678),N=t(37783),S=t(76139),k=t(10952),V=t(54266),I=t(94092),z=t(45984),CodeLocationMenu_CodeLocationMenu=function(e){var n,t=e.locationNode,r=(0,o._)((0,l.useState)(!1),2),a=r[0],s=r[1],c=(0,o._)((0,l.useState)(!1),2),d=c[0],u=c[1],x=null,h=null;return(null===(n=t.locationOrLoadError)||void 0===n?void 0:n.__typename)==="RepositoryLocation"&&null!==t.locationOrLoadError.dagsterLibraryVersions&&(x=(0,i.jsx)(R.sN,{icon:"info",text:"View Dagster libraries",onClick:function(){return u(!0)}}),h=(0,i.jsx)(DagsterLibrariesDialog,{libraries:t.locationOrLoadError.dagsterLibraryVersions,isOpen:d,setIsOpen:u})),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(N.J,{position:"bottom-left",content:(0,i.jsxs)(R.v2,{children:[(0,i.jsx)(R.sN,{icon:"info",text:"View configuration",onClick:function(){return s(!0)}}),x]}),children:(0,i.jsx)(C.zx,{icon:(0,i.jsx)(S.JO,{name:"expand_more"})})}),(0,i.jsx)(CodeLocationConfigDialog,{metadata:t.displayMetadata,isOpen:a,setIsOpen:s}),h]})},CodeLocationConfigDialog=function(e){var n=e.isOpen,t=e.setIsOpen,o=e.metadata;return(0,i.jsxs)(k.Vq,{title:"Code location configuration",icon:"info",isOpen:n,onClose:function(){return t(!1)},style:{width:"600px"},children:[(0,i.jsx)(CodeLocationConfig,{displayMetadata:o}),(0,i.jsx)(k.cN,{topBorder:!0,children:(0,i.jsx)(C.zx,{onClick:function(){return t(!1)},intent:"primary",children:"Done"})})]})},DagsterLibrariesDialog=function(e){var n=e.isOpen,t=e.setIsOpen,o=e.libraries;return(0,i.jsxs)(k.Vq,{title:"Dagster library versions",icon:"info",isOpen:n,onClose:function(){return t(!1)},style:{width:"600px"},children:[(0,i.jsxs)(V.i,{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Libray"}),(0,i.jsx)("th",{children:"Version"})]})}),(0,i.jsx)("tbody",{children:o.map(function(e){return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.name}),(0,i.jsx)("td",{children:e.version})]},e.name)})})]}),(0,i.jsx)(k.cN,{topBorder:!0,children:(0,i.jsx)(C.zx,{onClick:function(){return t(!1)},intent:"primary",children:"Done"})})]})},CodeLocationConfig=function(e){var n=e.displayMetadata,t=(0,l.useMemo)(function(){var e=n.reduce(function(e,n){return(0,E._)((0,O._)({},e),(0,_._)({},n.key,n.value))},{});return z.Pz(e)},[n]);return(0,i.jsx)(I.u,{value:t,options:{readOnly:!0,lineNumbers:!0,mode:"yaml"},theme:["config-editor"]})},P=t(81862),M=t(22970),D=t(43180),T=t(57830),$=t(12084),F=t(38153),U=t(35157);function _templateObject(){var e=(0,g._)(["\n  :hover,\n  :active {\n    outline: none;\n    text-decoration: none;\n  }\n"]);return _templateObject=function(){return e},e}var RepositoryCountTags_RepositoryCountTags=function(e){var n=e.repo,t=e.repoAddress,o=n.assetGroups.length,a=n.pipelines.filter(function(e){var n=e.name;return!(0,U.pv)(n)}).length,s=n.schedules.length,c=n.sensors.length;return(0,i.jsxs)(r.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,i.jsx)(D.u,{content:1===o?"1 asset group":"".concat(o," asset groups"),placement:"top",children:(0,i.jsx)(q,{to:(0,F.$U)(t,"/assets"),children:(0,i.jsx)(T.V,{interactive:!0,icon:"asset_group",children:o})})}),(0,i.jsx)(D.u,{content:1===a?"1 job":"".concat(a," jobs"),placement:"top",children:(0,i.jsx)(q,{to:(0,F.$U)(t,"/jobs"),children:(0,i.jsx)(T.V,{interactive:!0,icon:"job",children:a})})}),(0,i.jsx)(D.u,{content:1===s?"1 schedule":"".concat(s," schedules"),placement:"top",children:(0,i.jsx)(q,{to:(0,F.$U)(t,"/schedules"),children:(0,i.jsx)(T.V,{interactive:!0,icon:"schedule",children:s})})}),(0,i.jsx)(D.u,{content:1===c?"1 sensor":"".concat(c," sensors"),placement:"top",children:(0,i.jsx)(q,{to:(0,F.$U)(t,"/sensors"),children:(0,i.jsx)(T.V,{interactive:!0,icon:"sensors",children:c})})})]})},q=(0,w.ZP)(b.rU).withConfig({componentId:"sc-b34b9578-0"})(_templateObject()),B=t(70958),H=t(37160),A=t(44254),W=t(19211),Z=t(47544),J=t(33308),G=t(40092),Q=t(33869);function CodeLocationRowSet_templateObject(){var e=(0,g._)(["\n  width: 100%;\n  color: ",";\n  font-size: 12px;\n\n  .bp4-popover2-target {\n    overflow: hidden;\n  }\n\n  button {\n    background: ",";\n    border: none;\n    color: ",";\n    cursor: pointer;\n    font-size: 12px;\n    overflow: hidden;\n    padding: 0;\n    margin: 0;\n    width: 100%;\n\n    :focus {\n      outline: none;\n    }\n  }\n"]);return CodeLocationRowSet_templateObject=function(){return e},e}var ImageName=function(e){var n=e.metadata,t=(0,Z.m)(),o=n.find(function(e){return"image"===e.key}),r=(null==o?void 0:o.value)||"",a=(0,l.useCallback)((0,P._)(function(){return(0,M.Jh)(this,function(e){switch(e.label){case 0:return t(r),[4,(0,W.B7)({intent:"success",icon:"done",message:"Image string copied!"})];case 1:return e.sent(),[2]}})}),[t,r]);return o?(0,i.jsxs)(X,{flex:{direction:"row",gap:4},children:[(0,i.jsx)("span",{style:{fontWeight:500},children:"image:"}),(0,i.jsx)(D.u,{content:"Click to copy",placement:"top",display:"block",children:(0,i.jsx)("button",{onClick:a,children:(0,i.jsx)(y.g,{text:o.value})})})]}):null},X=(0,w.ZP)(r.x).withConfig({componentId:"sc-bc7561aa-0"})(CodeLocationRowSet_templateObject(),L.$(),L.v8(),L.$()),ModuleOrPackageOrFile=function(e){var n=e.metadata.find(function(e){var n=e.key;return"module_name"===n||"package_name"===n||"python_file"===n});return n?(0,i.jsxs)(r.x,{flex:{direction:"row",gap:4},style:{width:"100%",color:L.$(),fontSize:12},children:[(0,i.jsxs)("span",{style:{fontWeight:500},children:[n.key,":"]}),(0,i.jsx)(y.g,{text:n.value})]}):null},LocationStatus=function(e){var n,t=e.location,a=e.locationOrError,s=(0,o._)((0,l.useState)(!1),2),c=s[0],d=s[1],u=(0,l.useMemo)(function(){return(0,G.je)(t)},[t]),x=(0,G.Dc)({scope:"location",reloadFn:u}),h=x.reloading,p=x.tryReload;return"LOADING"===a.loadStatus?a.locationOrLoadError?(0,i.jsx)(T.V,{minimal:!0,intent:"primary",children:"Updating..."}):(0,i.jsx)(T.V,{minimal:!0,intent:"primary",children:"Loading..."}):(null===(n=a.locationOrLoadError)||void 0===n?void 0:n.__typename)==="PythonError"?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.x,{flex:{alignItems:"center",gap:12},children:[(0,i.jsx)(T.V,{minimal:!0,intent:"danger",children:"Failed"}),(0,i.jsx)($.Z,{onClick:function(){return d(!0)},children:(0,i.jsx)("span",{style:{fontSize:"14px"},children:"View error"})})]}),(0,i.jsx)(B.p,{location:t,isOpen:c,error:a.locationOrLoadError,reloading:h,onDismiss:function(){return d(!1)},onTryReload:function(){return p()}})]}):(0,i.jsx)(T.V,{minimal:!0,intent:"success",children:"Loaded"})},ReloadButton=function(e){var n=e.location;return(0,i.jsx)(J.s,{location:n,ChildComponent:function(e){var n=e.reloading,t=e.tryReload,o=e.hasReloadPermission;return(0,i.jsx)(r.x,{flex:{direction:"row",alignItems:"center",gap:4},children:(0,i.jsx)(D.u,{content:o?"":J.H,canShow:!o,useDisabledButtonTooltipFix:!0,children:(0,i.jsx)(C.zx,{icon:(0,i.jsx)(S.JO,{name:"refresh"}),disabled:!o,loading:n,onClick:function(){return t()},children:"Reload"})})})}})},K=t(55658);function VirtualizedCodeLocationRow_templateObject(){var e=(0,g._)(["\n  display: grid;\n  grid-template-columns: ",";\n"]);return VirtualizedCodeLocationRow_templateObject=function(){return e},e}var Y="3fr 1fr 1fr 240px 160px",ee=l.forwardRef(function(e,n){var t=e.locationNode,o=e.index,r=t.name;return(0,i.jsx)("div",{ref:n,"data-index":o,children:(0,i.jsxs)(et,{border:"bottom",children:[(0,i.jsx)(K.E5,{children:(0,i.jsx)(y.g,{text:r})}),(0,i.jsx)(K.E5,{children:(0,i.jsx)("div",{children:(0,i.jsx)(LocationStatus,{location:r,locationOrError:t})})}),(0,i.jsx)(K.E5,{children:(0,i.jsx)("div",{style:{whiteSpace:"nowrap"},children:(0,i.jsx)(Q.C,{unixTimestamp:t.updatedTimestamp})})}),(0,i.jsx)(K.E5,{children:"â€“"}),(0,i.jsx)(K.E5,{children:(0,i.jsxs)(C.zH,{children:[(0,i.jsx)(ReloadButton,{location:r}),(0,i.jsx)(CodeLocationMenu_CodeLocationMenu,{locationNode:t})]})})]})})}),en=l.forwardRef(function(e,n){var t=e.codeLocation,o=e.repository,a=e.index,s=(0,H.kQ)(o.name,o.location.name),c=(0,v._)(t.displayMetadata).concat((0,v._)(o.displayMetadata));return(0,i.jsx)("div",{ref:n,"data-index":a,children:(0,i.jsxs)(et,{border:"bottom",children:[(0,i.jsx)(K.E5,{children:(0,i.jsxs)(r.x,{flex:{direction:"column",gap:4},children:[(0,i.jsx)("div",{style:{fontWeight:500},children:(0,i.jsx)(b.rU,{to:(0,F.$U)(s),children:(0,i.jsx)(y.g,{text:(0,A.Uz)(s)})})}),(0,i.jsx)(ImageName,{metadata:c}),(0,i.jsx)(ModuleOrPackageOrFile,{metadata:c})]})}),(0,i.jsx)(K.E5,{children:(0,i.jsx)("div",{children:(0,i.jsx)(LocationStatus,{location:o.name,locationOrError:t})})}),(0,i.jsx)(K.E5,{children:(0,i.jsx)("div",{style:{whiteSpace:"nowrap"},children:(0,i.jsx)(Q.C,{unixTimestamp:t.updatedTimestamp})})}),(0,i.jsx)(K.E5,{children:(0,i.jsx)(RepositoryCountTags_RepositoryCountTags,{repo:o,repoAddress:s})}),(0,i.jsx)(K.E5,{style:{alignItems:"flex-end"},children:(0,i.jsxs)(C.zH,{children:[(0,i.jsx)(ReloadButton,{location:t.name}),(0,i.jsx)(CodeLocationMenu_CodeLocationMenu,{locationNode:t})]})})]})})}),VirtualizedCodeLocationHeader=function(){return(0,i.jsxs)(r.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:Y,height:"32px",fontSize:"12px",color:L.$()},children:[(0,i.jsx)(K.qN,{children:"Name"}),(0,i.jsx)(K.qN,{children:"Status"}),(0,i.jsx)(K.qN,{children:"Updated"}),(0,i.jsx)(K.qN,{children:"Definitions"}),(0,i.jsx)(K.qN,{style:{textAlign:"right"},children:"Actions"})]})},et=(0,w.ZP)(r.x).withConfig({componentId:"sc-96b751d6-0"})(VirtualizedCodeLocationRow_templateObject(),Y),RepositoryLocationsList=function(e){var n,t,o=e.loading,a=e.codeLocations,s=e.searchValue,c=(0,l.useRef)(null),d=(0,m.MG)({count:a.length,getScrollElement:function(){return c.current},estimateSize:function(){return 64},overscan:10}),u=d.getTotalSize(),x=d.getVirtualItems();return o&&!a.length?(0,i.jsxs)(r.x,{flex:{gap:8,alignItems:"center"},padding:{horizontal:24},children:[(0,i.jsx)(j.$,{purpose:"body-text"}),(0,i.jsx)("div",{children:"Loadingâ€¦"})]}):a.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(VirtualizedCodeLocationHeader,{}),(0,i.jsx)(K.W2,{ref:c,children:(0,i.jsx)(K.Nh,{$totalHeight:u,children:(0,i.jsx)(K.HR,{$start:null!==(t=null===(n=x[0])||void 0===n?void 0:n.start)&&void 0!==t?t:0,children:x.map(function(e){var n=e.index,t=e.key,o=a[n];return"error"===o.type?(0,i.jsx)(ee,{index:n,locationNode:o.node,ref:d.measureElement},t):(0,i.jsx)(en,{index:n,codeLocation:o.codeLocation,repository:o.repository,ref:d.measureElement},t)})})})})]}):s?(0,i.jsx)(r.x,{padding:{vertical:32},children:(0,i.jsx)(f.t,{icon:"folder",title:"No matching code locations",description:(0,i.jsxs)("div",{children:["No code locations were found for search query ",(0,i.jsx)("strong",{children:s}),"."]})})}):(0,i.jsx)(r.x,{padding:{vertical:32},children:(0,i.jsx)(f.t,{icon:"folder",title:"No code locations",description:"When you add a code location, your definitions will appear here."})})},eo=t(46988),CodeLocationsPageContent=function(){(0,x.Px)(),(0,h.j)("Code locations");var e=l.useContext(eo.C5),n=e.locationEntries,t=e.loading,c=(0,o._)(l.useState(""),2),d=c[0],u=c[1],j=l.useCallback(function(e){u(e.target.value)},[]),f=d.toLocaleLowerCase(),m=l.useMemo(function(){return flattenCodeLocationRows(n,f)},[n,f]),g=m.flattened,v=m.filtered,y=g.length,C=y>10;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.x,{padding:{vertical:16,horizontal:24},flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},style:{height:"64px"},children:[C?(0,i.jsx)(a.oi,{icon:"search",value:d,onChange:j,placeholder:"Filter code locations by nameâ€¦",style:{width:"400px"}}):(0,i.jsx)(s.pm,{id:"repository-locations",children:t||!y?"Code locations":1===y?"1 code location":"".concat(y," code locations")}),(0,i.jsxs)(r.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[C?(0,i.jsx)("div",{children:"".concat(y," code locations")}):null,(0,i.jsx)(p.i,{})]})]}),(0,i.jsx)(RepositoryLocationsList,{loading:t,codeLocations:v,searchValue:d})]})},CodeLocationsPage=function(){var e=l.useContext(d.N).pageTitle;return(0,i.jsxs)(r.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,i.jsx)(c.m,{title:(0,i.jsx)(s.X6,{children:e}),tabs:(0,i.jsx)(u.Z,{tab:"locations"})}),(0,i.jsx)(CodeLocationsPageContent,{})]})},ei=CodeLocationsPage},78945:function(e,n,t){t.d(n,{_:function(){return useCanSeeConfig}});var o=t(73235),i=t(40794),r=t(60138);function _templateObject(){var e=(0,o._)(["\n  query InstanceConfigHasInfo {\n    instance {\n      id\n      hasInfo\n    }\n  }\n"]);return _templateObject=function(){return e},e}var useCanSeeConfig=function(){var e=(0,i.a)(a).data;return!!(null==e?void 0:e.instance.hasInfo)},a=(0,r.Ps)(_templateObject())}}]);
//# sourceMappingURL=458.f011a031d85fce04.js.map
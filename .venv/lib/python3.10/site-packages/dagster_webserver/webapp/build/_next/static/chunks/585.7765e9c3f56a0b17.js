"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[585],{28888:function(e,t,n){n.d(t,{T:function(){return r}});var i=n(73235);function _templateObject(){var e=(0,i._)(["\n  height: 100%;\n  overflow-y: auto;\n  padding-bottom: 64px;\n  width: 100%;\n"]);return _templateObject=function(){return e},e}var r=n(35505).ZP.div.withConfig({componentId:"sc-2cf5acf-0"})(_templateObject())},78585:function(e,t,n){n.r(t),n.d(t,{ASSETS_CATALOG_ROOT_QUERY:function(){return n0},AssetsCatalogRoot:function(){return AssetsCatalogRoot},default:function(){return nX}});var i,r,s,a,o=n(73235),l=n(52322),d=n(40794),c=n(60138),u=n(28888),p=n(22139),x=n(63832),h=n(25195),m=n(2784),f=n(7267),g=n(41222),j=n(85333),v=n(6692),y=n(58467),b=n(64595),A=n(92364),_=n(9676),w=n(57830),E=n(47933),O=n(82550),P=n(81308),C=n(99596),S=n(37783),z=n(44678),I=n(82585),N=n(9001),K=n(76139),k=n(59692),R=n(44242),M=n(71235),T=n(98073),D=n(80528),L=n(81367),F=n(74711),$=n(49086),V=n(58701),U=n(35157),q=n(67913),W=n(90818),J=n(21485),B=n(38917),Z=n(46988),H=n(37160),AssetEventDetail=function(e){var t,n=e.event,i=e.assetKey,r=e.hidePartitionLinks,s=(null===(t=n.runOrError)||void 0===t?void 0:t.__typename)==="Run"?n.runOrError:null,a=null==s?void 0:s.repositoryOrigin,o=a?(0,H.kQ)(a.repositoryName,a.repositoryLocationName):null,d=(0,Z.Ux)(o),c="MaterializationEvent"===n.__typename?n.assetLineage:[];return(0,l.jsxs)(p.x,{padding:{horizontal:24,bottom:24},style:{flex:1},children:[(0,l.jsxs)(p.x,{padding:{vertical:24},border:"bottom",flex:{alignItems:"center",gap:12},children:[(0,l.jsx)(P.X6,{children:(0,l.jsx)(V.E,{timestamp:{ms:Number(n.timestamp)}})}),(0,$.C)(n)?(0,l.jsx)(L.U,{tags:n.tags}):void 0]}),(0,l.jsxs)(p.x,{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:16},border:"bottom",padding:{vertical:16},children:[(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},children:[(0,l.jsx)(P.pm,{children:"Event"}),"MaterializationEvent"===n.__typename?(0,l.jsxs)(p.x,{flex:{gap:4},children:[(0,l.jsx)(K.JO,{name:"materialization"}),"Materialization"]}):(0,l.jsxs)(p.x,{flex:{gap:4},children:[(0,l.jsx)(K.JO,{name:"observation"}),"Observation"]})]}),n.partition&&(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},children:[(0,l.jsx)(P.pm,{children:"Partition"}),void 0!==r&&r?n.partition:(0,l.jsx)(E.rU,{to:(0,F.p)(i,{view:"partitions",partition:n.partition}),children:n.partition})]}),(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},style:{minHeight:64},children:[(0,l.jsx)(P.pm,{children:"Run"}),s?(0,l.jsxs)(p.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,l.jsx)(J.hk,{runId:s.id,status:s.status}),(0,l.jsx)(E.rU,{to:(0,B.tA)(s,n),children:(0,l.jsx)(P.fv,{children:(0,B.EI)(s)})})]}):"—"]}),(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},children:[(0,l.jsx)(P.pm,{children:"Job"}),s&&!(0,U.pv)(s.pipelineName)?(0,l.jsxs)(p.x,{children:[(0,l.jsx)(p.x,{children:(0,l.jsx)(W.h,{showIcon:!0,pipelineName:s.pipelineName,pipelineHrefContext:o||"repo-unknown",snapshotId:s.pipelineSnapshotId,isJob:(0,Z.E8)(d,s.pipelineName)})}),(0,l.jsxs)(k.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,l.jsx)(K.JO,{name:"linear_scale",color:h.md()}),(0,l.jsx)(E.rU,{to:(0,B.tA)(s,n),children:n.stepKey})]})]}):"—"]})]}),n.description&&(0,l.jsxs)(p.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,l.jsx)(P.pm,{children:"Description"}),(0,l.jsx)(q.d,{description:n.description})]}),(0,l.jsxs)(p.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,l.jsx)(P.pm,{children:"Metadata"}),(0,l.jsx)(R.J,{event:n,showDescriptions:!0})]}),"MaterializationEvent"===n.__typename&&(0,l.jsxs)(p.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,l.jsx)(P.pm,{children:"Source data"}),(0,l.jsx)(D.EA,{timestamp:n.timestamp,assetKey:i})]}),(0,l.jsxs)(p.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,l.jsx)(P.pm,{children:"System tags"}),(0,l.jsx)(M.M,{event:n,collapsible:!0})]}),c.length>0&&(0,l.jsxs)(p.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,l.jsx)(P.pm,{children:"Parent materializations"}),(0,l.jsx)(T.i,{elements:c,timestamp:n.timestamp})]})]})},AssetEventDetailEmpty=function(){return(0,l.jsxs)(p.x,{padding:{horizontal:24},style:{flex:1},children:[(0,l.jsx)(p.x,{padding:{vertical:24},border:"bottom",flex:{alignItems:"center",justifyContent:"space-between"},children:(0,l.jsx)(P.X6,{color:h.$(),children:"No event selected"})}),(0,l.jsxs)(p.x,{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:16},border:"bottom",padding:{vertical:16},children:[(0,l.jsx)(p.x,{flex:{gap:4,direction:"column"},children:(0,l.jsx)(P.pm,{children:"Event"})}),(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},style:{minHeight:64},children:[(0,l.jsx)(P.pm,{children:"Run"}),"—"]}),(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},children:[(0,l.jsx)(P.pm,{children:"Job"}),"—"]})]}),(0,l.jsxs)(p.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,l.jsx)(P.pm,{children:"Metadata"}),(0,l.jsx)(R.J,{event:null,showDescriptions:!0})]})]})},G=n(18017),Q=n(16861),Y=n(54266),X=n(10952),ee=n(28879),et=n.n(ee),en=n(35505),ei=n(36031);function _templateObject(){var e=(0,o._)(["\n  &:hover {\n    background: ",";\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,o._)(["\n  width: 100%;\n  margin: -2px -2px -3px;\n  tr td {\n    font-size: 14px;\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,o._)(["\n  padding: 4px;\n  margin: -4px;\n  cursor: pointer;\n  border: 0;\n  background: transparent;\n  outline: none;\n\n  "," {\n    margin: -2px -5px;\n    transform: ",";\n    opacity: 0.25;\n  }\n\n  :focus {\n    outline: none;\n\n    "," {\n      background: ",";\n      opacity: 0.5;\n    }\n  }\n"]);return _templateObject2=function(){return e},e}var AssetEventsTable=function(e){var t=e.hasPartitions,n=e.hasLineage,i=e.groups,r=e.focused,s=e.setFocused;return(0,l.jsxs)(Y.i,{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[t&&(0,l.jsx)("th",{style:{minWidth:100},children:"Partition"}),(0,l.jsx)("th",{style:{minWidth:150},children:"Timestamp"}),(0,l.jsx)("th",{style:{minWidth:150},children:"Job"}),(0,l.jsx)("th",{style:{width:100},children:"Run"})]})}),(0,l.jsx)("tbody",{children:i.map(function(e){return(0,l.jsxs)(m.Fragment,{children:[(0,l.jsx)(ea,{onClick:function(t){t.target instanceof HTMLElement&&t.target.closest("a")||null==s||s(r!==e?e:void 0)},children:(0,l.jsx)(es,{group:e,hasPartitions:t,hasLineage:n,isFocused:r===e})}),r===e?(0,l.jsx)(er,{hasLineage:n,group:e}):void 0]},e.timestamp||e.partition)})})]})},NoneSpan=function(){return(0,l.jsx)("span",{style:{color:h.$()},children:"None"})},er=m.memo(function(e){var t=e.group,n=e.hasLineage,i=t.latest,r=t.timestamp;if(!i)return(0,l.jsx)("tr",{});var s="MaterializationEvent"===i.__typename?i.assetLineage:[],a="MaterializationEvent"===i.__typename?t.all.filter(function(e){return"ObservationEvent"===e.__typename&&Number(e.timestamp)>Number(i.timestamp)}):[];return(0,l.jsx)("tr",{style:{background:h.gJ()},children:(0,l.jsxs)("td",{colSpan:6,style:{fontSize:14,padding:0},children:[i.description&&(0,l.jsx)(p.x,{padding:{horizontal:24,vertical:12},children:i.description}),i.metadataEntries.length||n?(0,l.jsx)(eo,{children:(0,l.jsxs)("tbody",{children:[i.metadataEntries.map(function(e){return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{style:{maxWidth:300},children:e.label}),(0,l.jsx)("td",{children:(0,l.jsx)(ei.BL,{entry:e,expandSmallValues:!0})}),(0,l.jsx)("td",{style:{opacity:.7},children:e.description})]},"metadata-".concat(e.label))}),a.map(function(e){return(0,l.jsx)(m.Fragment,{children:e.metadataEntries.map(function(t){return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:t.label}),(0,l.jsx)("td",{children:(0,l.jsx)(ei.BL,{entry:t,expandSmallValues:!0})}),(0,l.jsxs)("td",{style:{opacity:.7},children:[(0,l.jsxs)(p.x,{flex:{gap:8,alignItems:"center"},children:[(0,l.jsx)(K.JO,{name:"observation",size:16}),(0,l.jsxs)("span",{children:["".concat(e.stepKey," in "),(0,l.jsx)(E.rU,{to:"/runs/".concat(e.runId,"?timestamp=").concat(e.timestamp),children:(0,l.jsx)(P.fv,{children:(0,B.EI)({id:e.runId})})})," (".concat(et()(Number(e.timestamp)).from(Number(r),!0)," later)")]})]}),t.description]})]},"metadata-".concat(e.timestamp,"-").concat(t.label))})},e.timestamp)}),n&&r?(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"Parent Materializations"}),(0,l.jsx)("td",{children:(0,l.jsx)(T.i,{elements:s,timestamp:r})})]}):null]})}):(0,l.jsx)(p.x,{padding:{horizontal:24,vertical:12},children:"No materialization event metadata"})]})})}),es=m.memo(function(e){var t=e.group,n=e.hasPartitions,i=e.hasLineage,r=e.isFocused,s=t.latest,a=t.partition,o=t.timestamp,d=t.all,c=r?{paddingLeft:4,borderLeft:"4px solid ".concat(h.yM())}:{paddingLeft:8},u=(null==s?void 0:s.runOrError.__typename)==="Run"?s.runOrError:void 0,x=null==u?void 0:u.repositoryOrigin,m=x?(0,H.kQ)(x.repositoryName,x.repositoryLocationName):null,f=(0,Z.Ux)(m);return s?u?(0,l.jsxs)(l.Fragment,{children:[n&&(0,l.jsx)("td",{style:(0,j._)({whiteSpace:"nowrap"},c),children:(0,l.jsxs)(k.Z,{direction:"row",spacing:2,children:[(0,l.jsx)(DisclosureTriangle,{open:r}),a||(0,l.jsx)(NoneSpan,{})]})}),(0,l.jsx)("td",{style:n?{}:c,children:(0,l.jsxs)(k.Z,{direction:"row",spacing:4,children:[!n&&(0,l.jsx)(DisclosureTriangle,{open:r}),(0,l.jsxs)(k.Z,{direction:"column",spacing:4,children:[(0,l.jsx)(V.E,{timestamp:{ms:Number(o)}}),(null==d?void 0:d.length)>1?(0,l.jsx)(AllIndividualEventsButton,{hasPartitions:n,hasLineage:i,events:d,children:"View ".concat(d.length," events")}):"MaterializationEvent"===s.__typename?(0,l.jsxs)(p.x,{flex:{gap:8,alignItems:"center"},style:{color:h.$()},children:[(0,l.jsx)(K.JO,{name:"materialization",size:16,color:h.$()}),"Materialization"]}):(0,l.jsxs)(p.x,{flex:{gap:8,alignItems:"center"},style:{color:h.$()},children:[(0,l.jsx)(K.JO,{name:"observation",size:16,color:h.$()})," Observation"]})]})]})}),(0,l.jsx)("td",{children:!(0,U.pv)(u.pipelineName)&&(0,l.jsxs)(p.x,{margin:{bottom:4},children:[(0,l.jsx)(p.x,{padding:{left:8},children:(0,l.jsx)(W.h,{showIcon:!0,pipelineName:u.pipelineName,pipelineHrefContext:m||"repo-unknown",snapshotId:u.pipelineSnapshotId,isJob:(0,Z.E8)(f,u.pipelineName)})}),(0,l.jsxs)(k.Z,{direction:"row",padding:{left:8},spacing:8,alignItems:"center",children:[(0,l.jsx)(K.JO,{name:"linear_scale",color:h.$()}),(0,l.jsx)(E.rU,{to:(0,B.tA)(u,s),children:s.stepKey})]})]})}),(0,l.jsx)("td",{children:(0,l.jsxs)(p.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,l.jsx)(J.hk,{runId:u.id,status:u.status}),(0,l.jsx)(E.rU,{to:"/runs/".concat(u.id,"?timestamp=").concat(o),children:(0,l.jsx)(P.fv,{children:(0,B.EI)(u)})})]})})]}):(0,l.jsx)("span",{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("td",{style:{whiteSpace:"nowrap",paddingLeft:24},children:a||(0,l.jsx)(NoneSpan,{})}),(0,l.jsx)("td",{colSpan:3})]})}),ea=en.ZP.tr.withConfig({componentId:"sc-5606ac49-0"})(_templateObject(),h._c()),eo=en.ZP.table.withConfig({componentId:"sc-5606ac49-1"})(_templateObject1()),AllIndividualEventsButton=function(e){var t=e.disabled,n=e.hasLineage,i=e.hasPartitions,r=e.events,s=e.children,a=(0,y._)(m.useState(!1),2),o=a[0],d=a[1],c=(0,y._)(m.useState(),2),u=c[0],x=c[1],h=m.useMemo(function(){return r.map(function(e){return{latest:e,partition:e.partition||void 0,timestamp:e.timestamp,all:[]}})},[r]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(N.zx,{disabled:t,onClick:function(){return d(!0)},children:s}),(0,l.jsxs)(X.Vq,{isOpen:o,canEscapeKeyClose:!0,canOutsideClickClose:!0,onClose:function(){return d(!1)},style:{width:"80%",minWidth:"800px"},title:function(){if(i&&r[0]){var e=r[0].partition;if(e)return"Materialization and observation events for ".concat(e)}return"Materialization and observation events"}(),children:[o&&(0,l.jsx)(p.x,{padding:{bottom:8},onClick:function(e){return e.stopPropagation()},children:(0,l.jsx)(AssetEventsTable,{hasLineage:n,hasPartitions:i,focused:u,setFocused:x,groups:h})}),(0,l.jsx)(X.cN,{children:(0,l.jsx)(N.zx,{intent:"primary",onClick:function(){return d(!1)},children:"OK"})})]})]})},DisclosureTriangle=function(e){var t=e.open,n=e.onClick;return(0,l.jsx)(el,{onClick:n,$open:t,children:(0,l.jsx)(K.JO,{name:"arrow_drop_down",size:24})})},el=en.ZP.button.withConfig({componentId:"sc-5606ac49-2"})(_templateObject2(),K.a1,function(e){return e.$open?"rotate(0deg)":"rotate(-90deg)"},K.a1,h.Ep()),ed=n(43089),ec=n(26480),eu=n(14952),ep=n(79998),ex=n(61935);function AssetPartitionDetail_templateObject(){var e=(0,o._)(["\n  query AssetPartitionDetailQuery($assetKey: AssetKeyInput!, $partitionKey: String!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      ... on AssetNode {\n        id\n        opNames\n        latestRunForPartition(partition: $partitionKey) {\n          id\n          ...AssetPartitionLatestRunFragment\n        }\n        assetMaterializations(partitions: [$partitionKey]) {\n          ... on MaterializationEvent {\n            runId\n            ...AssetMaterializationFragment\n          }\n        }\n        assetObservations(partitions: [$partitionKey]) {\n          ... on ObservationEvent {\n            runId\n            ...AssetObservationFragment\n          }\n        }\n      }\n    }\n  }\n  fragment AssetPartitionLatestRunFragment on Run {\n    id\n    status\n    endTime\n  }\n\n  ","\n  ","\n"]);return AssetPartitionDetail_templateObject=function(){return e},e}function AssetPartitionDetail_templateObject1(){var e=(0,o._)(["\n  query AssetPartitionStaleQuery($assetKey: AssetKeyInput!, $partitionKey: String!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      ... on AssetNode {\n        id\n        staleStatus(partition: $partitionKey)\n        staleCauses(partition: $partitionKey) {\n          key {\n            path\n          }\n          reason\n          category\n          dependency {\n            path\n          }\n        }\n      }\n    }\n  }\n"]);return AssetPartitionDetail_templateObject1=function(){return e},e}var AssetPartitionDetailLoader=function(e){var t=(0,d.a)(eh,{variables:{assetKey:e.assetKey,partitionKey:e.partitionKey}}),n=(0,d.a)(em,{variables:{assetKey:e.assetKey,partitionKey:e.partitionKey}}),i=(0,m.useMemo)(function(){var e,n;return(null===(n=t.data)||void 0===n?void 0:null===(e=n.assetNodeOrError)||void 0===e?void 0:e.__typename)!=="AssetNode"?{materializations:[],observations:[],hasLineage:!1,latestRunForPartition:null}:{stepKey:(0,U.Ec)(t.data.assetNodeOrError),latestRunForPartition:t.data.assetNodeOrError.latestRunForPartition,materializations:(0,O._)(t.data.assetNodeOrError.assetMaterializations).sort(function(e,t){return Number(t.timestamp)-Number(e.timestamp)}),observations:(0,O._)(t.data.assetNodeOrError.assetObservations).sort(function(e,t){return Number(t.timestamp)-Number(e.timestamp)}),hasLineage:t.data.assetNodeOrError.assetMaterializations.some(function(e){return e.assetLineage.length>0})}},[t.data]),r=i.materializations,s=i.observations,a=i.hasLineage,o=i.latestRunForPartition,c=(0,m.useMemo)(function(){var e,t;return(null===(t=n.data)||void 0===t?void 0:null===(e=t.assetNodeOrError)||void 0===e?void 0:e.__typename)!=="AssetNode"?{staleCauses:[],staleStatus:ex.D9X.FRESH}:{staleStatus:n.data.assetNodeOrError.staleStatus,staleCauses:n.data.assetNodeOrError.staleCauses}},[n.data]),u=c.staleStatus,p=c.staleCauses,x=r[0];return t.loading||!t.data?(0,l.jsx)(AssetPartitionDetailEmpty,{partitionKey:e.partitionKey}):(0,l.jsx)(AssetPartitionDetail,{hasLineage:a,hasStaleLoadingState:n.loading,latestRunForPartition:o,staleStatus:u,staleCauses:p,assetKey:e.assetKey,group:{latest:x||null,timestamp:null==x?void 0:x.timestamp,partition:e.partitionKey,all:(0,O._)(r).concat((0,O._)(s)).sort(function(e,t){return Number(t.timestamp)-Number(e.timestamp)})}})},eh=(0,c.Ps)(AssetPartitionDetail_templateObject(),ep.ZC,ep.T8),em=(0,c.Ps)(AssetPartitionDetail_templateObject1()),AssetPartitionDetail=function(e){var t,n=e.assetKey,i=e.stepKey,r=e.group,s=e.hasLineage,a=e.hasLoadingState,o=e.hasStaleLoadingState,d=e.latestRunForPartition,c=e.staleCauses,u=e.staleStatus,m=e.changedReasons,f=r.latest,g=r.partition,j=r.all,v=(null==f?void 0:null===(t=f.runOrError)||void 0===t?void 0:t.__typename)==="Run"?f.runOrError:null,y=(null==d?void 0:d.id)!==(null==v?void 0:v.id)?d:null,b=(null==y?void 0:y.status)===ex.VOA.STARTED?"has started and is refreshing this partition.":(null==y?void 0:y.status)===ex.VOA.STARTING?"is starting and will refresh this partition.":(null==y?void 0:y.status)===ex.VOA.QUEUED?"is queued and is refreshing this partition.":void 0,A=null==v?void 0:v.repositoryOrigin,O=A?(0,H.kQ)(A.repositoryName,A.repositoryLocationName):null,C=(0,Z.Ux)(O),S=(null==f?void 0:f.__typename)==="MaterializationEvent"?r.all.filter(function(e){return"ObservationEvent"===e.__typename&&Number(e.timestamp)>Number(f.timestamp)}):[];return(0,l.jsxs)(p.x,{padding:{horizontal:24,bottom:24},style:{flex:1},children:[(0,l.jsxs)(p.x,{padding:{vertical:24},border:"bottom",flex:{alignItems:"center"},children:[g?(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1fr) auto auto",gap:12,alignItems:"center"},"data-tooltip":g,"data-tooltip-style":ef,children:[(0,l.jsx)(P.X6,{children:(0,l.jsx)(Q.g,{text:g})}),a?(0,l.jsx)(x.$,{purpose:"body-text"}):f?(0,l.jsx)(w.V,{intent:"success",children:"Materialized"}):void 0,o?(0,l.jsx)(x.$,{purpose:"body-text"}):(0,l.jsxs)(p.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,l.jsx)(eu.ov,{liveData:{staleCauses:c,staleStatus:u},assetKey:n}),(0,l.jsx)(ed.VH,{changedReasons:m,assetKey:n})]})]}):(0,l.jsx)(P.X6,{color:h.$(),children:"No partition selected"}),(0,l.jsx)("div",{style:{flex:1}})]}),(null==y?void 0:y.status)===ex.VOA.FAILURE&&(0,l.jsx)(ec.Z,{run:y,stepKey:i,padding:{horizontal:0,vertical:16},border:"bottom"}),y&&b&&(0,l.jsx)(_.b,{intent:"info",icon:(0,l.jsx)(x.$,{purpose:"body-text"}),title:(0,l.jsxs)("div",{style:{fontWeight:400},children:["Run ",(0,l.jsx)(E.rU,{to:"/runs/".concat(y.id),children:(0,B.EI)(y)})," ",b]})}),(0,l.jsxs)(p.x,{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:16,minHeight:76},border:"bottom",padding:{vertical:16},children:[f?(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},children:[(0,l.jsx)(P.pm,{children:"MaterializationEvent"===f.__typename?"Latest materialization":"Latest observation"}),(0,l.jsxs)(p.x,{flex:{gap:4},style:{whiteSpace:"nowrap"},children:["MaterializationEvent"===f.__typename?(0,l.jsx)(K.JO,{name:"materialization"}):(0,l.jsx)(K.JO,{name:"observation"}),(0,l.jsx)(V.E,{timestamp:{ms:Number(f.timestamp)}})]})]}):(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},children:[(0,l.jsx)(P.pm,{children:"Latest materialization"}),(0,l.jsxs)(p.x,{flex:{gap:4},children:[(0,l.jsx)(K.JO,{name:"materialization"}),"None"]})]}),(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},children:[(0,l.jsx)(P.pm,{children:"Run"}),v&&f?(0,l.jsxs)(p.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,l.jsx)(J.hk,{runId:v.id,status:v.status}),(0,l.jsx)(E.rU,{to:(0,B.tA)(v,f),children:(0,l.jsx)(P.fv,{children:(0,B.EI)(v)})})]}):"None"]}),(0,l.jsxs)(p.x,{flex:{gap:4,direction:"column"},children:[(0,l.jsx)(P.pm,{children:"Job"}),f&&v&&!(0,U.pv)(v.pipelineName)?(0,l.jsxs)(p.x,{children:[(0,l.jsx)(p.x,{children:(0,l.jsx)(W.h,{showIcon:!0,pipelineName:v.pipelineName,pipelineHrefContext:O||"repo-unknown",snapshotId:v.pipelineSnapshotId,isJob:(0,Z.E8)(C,v.pipelineName)})}),(0,l.jsxs)(k.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,l.jsx)(K.JO,{name:"linear_scale",color:h.md()}),(0,l.jsx)(E.rU,{to:(0,B.tA)(v,f),children:f.stepKey})]})]}):"None"]}),(0,l.jsx)(p.x,{style:{textAlign:"right"},children:(0,l.jsx)(AllIndividualEventsButton,{hasPartitions:!0,hasLineage:s,events:j,disabled:0===j.length,children:"View all historical events (".concat(j.length,")")})})]}),(0,l.jsxs)(p.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,l.jsx)(P.pm,{children:"Metadata"}),(0,l.jsx)(R.J,{event:f,observations:S,showDescriptions:!0})]}),(0,l.jsxs)(p.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,l.jsx)(P.pm,{children:"Source data"}),(0,l.jsx)(D.EA,{timestamp:null==f?void 0:f.timestamp,assetKey:n})]}),(0,l.jsxs)(p.x,{padding:{top:24},flex:{direction:"column",gap:8},children:[(0,l.jsx)(P.pm,{children:"System tags"}),(0,l.jsx)(M.M,{event:f,collapsible:!0})]})]})},AssetPartitionDetailEmpty=function(e){var t=e.partitionKey;return(0,l.jsx)(AssetPartitionDetail,{assetKey:{path:[""]},group:{all:[],latest:null,timestamp:"0",partition:t},latestRunForPartition:null,hasLineage:!1,hasLoadingState:!0})},ef=JSON.stringify({background:h.gJ(),border:"1px solid ".concat(h.im()),fontSize:"18px",fontWeight:"600",color:h.Ep()}),eg=n(49155),ej=n(37361),ev=n(15282),AssetEvents=function(e){var t=e.assetKey,n=e.assetNode,i=e.params,r=e.setParams,s=e.liveData,a=e.dataRefreshHint,o=(0,ep.fE)(t,i,{assetHasDefinedPartitions:!1}),d=o.xAxis,c=o.materializations,u=o.observations,f=o.loadedPartitionKeys,g=o.refetch,A=o.loading;m.useEffect(function(){i.asOf||g()},[i.asOf,a,g]);var _=(0,y._)((0,ev.U)("asset-event-filters",function(e){return{types:(null==e?void 0:e.types)||ey}}),2),w=_[0],E=_[1],O=null==n?void 0:n.isSource,S=null==n?void 0:n.isSource,z=(0,ej.L)(d,O||w.types.includes("materialization")?c:[],O||w.types.includes("observation")?u:[],f),onSetFocused=function(e){var t="time"===d?{time:(null==e?void 0:e.timestamp)!==i.time&&(null==e?void 0:e.timestamp)||""}:{partition:(null==e?void 0:e.partition)!==i.partition&&(null==e?void 0:e.partition)||""};r((0,j._)({},i,t))},I=z.find(function(e){return i.time?Number(e.timestamp)<=Number(i.time):!!i.partition&&e.partition===i.partition})||z[0],N=!(null==n?void 0:n.partitionDefinition)&&z.some(function(e){return e.partition}),K=c.some(function(e){return e.assetLineage.length>0});return(0,l.jsxs)(l.Fragment,{children:[N&&(0,l.jsxs)(p.x,{flex:{justifyContent:"space-between",alignItems:"center"},border:"bottom",padding:{vertical:16,horizontal:24},style:{marginBottom:-1},children:[(0,l.jsx)(P.pm,{children:"Asset Events"}),(0,l.jsx)("div",{style:{margin:"-6px 0 "},children:(0,l.jsx)(C.h,{activeItems:new Set([d]),buttons:[{id:"partition",label:"By partition"},{id:"time",label:"By timestamp"}],onClick:function(e){return r("time"===e?(0,v._)((0,j._)({},i),{partition:void 0,time:(null==I?void 0:I.timestamp)||""}):(0,v._)((0,j._)({},i),{partition:(null==I?void 0:I.partition)||"",time:void 0}))}})})]}),n&&!n.partitionDefinition&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ec.Z,{stepKey:(0,U.Ec)(n),border:"bottom",run:(null==s?void 0:s.runWhichFailedToMaterialize)||null}),(0,l.jsx)(eg.j,{stepKey:(0,U.Ec)(n),border:"bottom",liveData:s})]}),(0,l.jsxs)(p.x,{style:{flex:1,minHeight:0,outline:"none"},flex:{direction:"row"},onKeyDown:function(e){var t={ArrowDown:1,ArrowUp:-1}[e.key];if(!(!t||!I||e.isDefaultPrevented())){var n=z[z.indexOf(I)+t];n&&(e.preventDefault(),onSetFocused(n))}},tabIndex:-1,children:[(0,l.jsxs)(p.x,{style:{display:"flex",flex:1,minWidth:200},flex:{direction:"column"},background:h.gJ(),children:[O?void 0:(0,l.jsx)(p.x,{flex:{alignItems:"center",gap:16},padding:{vertical:12,horizontal:24},border:"bottom",children:(0,l.jsx)(EventTypeSelect,{value:w.types,onChange:function(e){return E((0,v._)((0,j._)({},w),{types:e}))}})}),A?(0,l.jsx)(p.x,{flex:{alignItems:"center",justifyContent:"center"},style:{flex:1},children:(0,l.jsx)(x.$,{purpose:"section"})}):(0,l.jsx)(G.cJ,{xAxis:d,groups:z,focused:I,setFocused:onSetFocused,assetKey:t})]}),(0,l.jsx)(p.x,{flex:{direction:"column"},style:{flex:3,minWidth:0,overflowY:"auto"},border:"left",children:(0,l.jsx)(b.S,{region:"event",resetErrorOnChange:[I],children:"partition"===d?I?(0,l.jsx)(AssetPartitionDetail,{group:I,hasLineage:K,assetKey:t,stepKey:n?(0,U.Ec)(n):void 0,latestRunForPartition:null,changedReasons:null==n?void 0:n.changedReasons}):(0,l.jsx)(AssetPartitionDetailEmpty,{}):(null==I?void 0:I.latest)?(0,l.jsx)(AssetEventDetail,{assetKey:t,event:I.latest,hidePartitionLinks:S}):(0,l.jsx)(AssetEventDetailEmpty,{})})})]})]})},ey=["observation","materialization"],EventTypeSelect=function(e){var t=e.value,n=e.onChange,i=(0,y._)(m.useState(!1),2),r=i[0],s=i[1],onToggle=function(e){t.includes(e)?n(t.filter(function(t){return t!==e})):n((0,O._)(t).concat([e]))};return(0,l.jsx)(S.J,{isOpen:r,placement:"bottom-start",canEscapeKeyClose:!0,onInteraction:function(e){return s(e)},content:(0,l.jsxs)(z.v2,{style:{width:140},"aria-label":"filter-options",children:[(0,l.jsx)(z.sN,{shouldDismissPopover:!1,onClick:function(){return onToggle("materialization")},text:(0,l.jsx)(p.x,{padding:{horizontal:2},flex:{direction:"row",alignItems:"center"},children:(0,l.jsx)(I.X,{size:"small",checked:t.includes("materialization"),onChange:function(){},label:"Materialization"})})}),(0,l.jsx)(z.sN,{shouldDismissPopover:!1,onClick:function(){return onToggle("observation")},text:(0,l.jsx)(p.x,{padding:{horizontal:2},flex:{direction:"row",alignItems:"center"},children:(0,l.jsx)(I.X,{size:"small",checked:t.includes("observation"),onChange:function(){},label:"Observation"})})})]}),children:(0,l.jsxs)(N.zx,{onClick:function(){return s(function(e){return!e})},icon:(0,l.jsx)(K.JO,{name:"filter_alt"}),rightIcon:(0,l.jsx)(K.JO,{name:"expand_more"}),children:["Type (",t.length,")"]})})},eb=n(24490),eA=n(25793),e_=n(37936),ew=n(5171),eE=n(10424),eO=n(12518),eP=n(66207),eC=n(23054);function AssetNodeInstigatorTag_templateObject(){var e=(0,o._)(["\n  fragment AssetNodeInstigatorsFragment on AssetNode {\n    id\n    targetingInstigators {\n      ... on Schedule {\n        ...ScheduleSwitchFragment\n      }\n      ... on Sensor {\n        ...SensorSwitchFragment\n      }\n    }\n  }\n  ","\n  ","\n"]);return AssetNodeInstigatorTag_templateObject=function(){return e},e}var insitigatorsByType=function(e){var t=e.targetingInstigators;return{schedules:t.filter(function(e){return"Schedule"===e.__typename}),sensors:t.filter(function(e){return"Sensor"===e.__typename})}},AssetNodeInstigatorTag=function(e){var t=e.assetNode,n=e.repoAddress,i=(0,m.useMemo)(function(){return insitigatorsByType(t)},[t]),r=i.schedules,s=i.sensors;return(0,l.jsx)(eO.I,{repoAddress:n,schedules:r,sensors:s,showSwitch:!1})},eS=(0,c.Ps)(AssetNodeInstigatorTag_templateObject(),eP.J,eC.U),ez=n(87084);function AssetNodeList_templateObject(){var e=(0,o._)(["\n  height: 195px;\n  overflow-x: auto;\n  width: 100%;\n  white-space: nowrap;\n"]);return AssetNodeList_templateObject=function(){return e},e}function AssetNodeList_templateObject1(){var e=(0,o._)(["\n  cursor: pointer;\n  width: 260px;\n  flex-shrink: 0;\n  position: relative;\n"]);return AssetNodeList_templateObject1=function(){return e},e}var AssetNodeList=function(e){var t=e.items,n=(0,f.k6)();return null===t?(0,l.jsx)(eI,{flex:{alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(x.$,{purpose:"section"})}):(0,l.jsx)(eI,{flex:{gap:4},padding:{horizontal:12},children:t.map(function(e){return(0,l.jsx)(eN,{onClick:function(t){t.stopPropagation(),n.push((0,F.p)(e.assetKey,{view:"definition"}))},children:(0,l.jsx)(ez.p4,{definition:e,selected:!1})},e.id)})})},eI=(0,en.ZP)(p.x).withConfig({componentId:"sc-c109682c-0"})(AssetNodeList_templateObject()),eN=en.ZP.div.withConfig({componentId:"sc-c109682c-1"})(AssetNodeList_templateObject1()),eK=n(34557),ek=n(16570),eR=n(51887),eM=n(85613),eT=n(98454),eD=n(46032),eL=n(17094),eF=n(63916),e$=n(38153);function AssetNodeDefinition_templateObject(){var e=(0,o._)(["\n  fragment AssetNodeDefinitionFragment on AssetNode {\n    id\n    description\n    groupName\n    graphName\n    opNames\n    opVersion\n    jobNames\n    isSource\n    isExecutable\n    tags {\n      key\n      value\n    }\n    owners {\n      __typename\n      ... on TeamAssetOwner {\n        team\n      }\n      ... on UserAssetOwner {\n        email\n      }\n    }\n    autoMaterializePolicy {\n      policyType\n      rules {\n        className\n        description\n        decisionType\n      }\n    }\n    freshnessPolicy {\n      maximumLagMinutes\n      cronSchedule\n      cronScheduleTimezone\n    }\n    backfillPolicy {\n      description\n    }\n    partitionDefinition {\n      description\n    }\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    requiredResources {\n      resourceKey\n    }\n\n    ...AssetNodeConfigFragment\n    ...AssetNodeFragment\n    ...AssetNodeOpMetadataFragment\n    ...AssetNodeInstigatorsFragment\n  }\n\n  ","\n  ","\n  ","\n  ","\n"]);return AssetNodeDefinition_templateObject=function(){return e},e}var AssetNodeDefinition=function(e){var t,n=e.assetNode,i=e.upstream,r=e.downstream,s=e.dependsOnSelf,a=(0,eE.U6)(n),o=a.assetMetadata,d=a.assetType,c=null===(t=n.configField)||void 0===t?void 0:t.configType,u=c&&"Any"!==c.key?c:null,x=(0,H.kQ)(n.repository.name,n.repository.location.name);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ew.Nj,{assetKey:n.assetKey,loadedFromRepo:x,padded:!0}),(0,l.jsxs)(p.x,{flex:{direction:"row"},style:{flex:1},children:[(0,l.jsxs)(p.x,{style:{flex:1,minWidth:0},flex:{direction:"column"},border:"right",children:[(0,l.jsxs)(p.x,{padding:{vertical:16,horizontal:24},border:"bottom",flex:{justifyContent:"space-between",gap:8},children:[(0,l.jsx)(P.pm,{children:"Description"}),(0,l.jsx)(DescriptionAnnotations,{assetNode:n,repoAddress:x})]}),(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},style:{flex:1,flexBasis:"content",flexGrow:0,minHeight:123},children:n.description?(0,l.jsx)(q.d,{description:n.description,maxHeight:260}):(0,l.jsx)(P.uT,{children:"No description provided"})}),n.opVersion&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"top-and-bottom",children:(0,l.jsx)(P.pm,{children:"Code version"})}),(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},flex:{gap:12,alignItems:"center"},children:(0,l.jsx)(eT.G,{children:n.opVersion})})]}),n.freshnessPolicy&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"top-and-bottom",children:(0,l.jsx)(P.pm,{children:"Freshness policy"})}),(0,l.jsxs)(p.x,{padding:{vertical:16,horizontal:24},flex:{gap:12,alignItems:"flex-start"},children:[(0,l.jsx)(P.uT,{style:{flex:1},children:(0,eR.jY)(n.freshnessPolicy)}),(0,l.jsx)(eR.CW,{policy:n.freshnessPolicy,assetKey:n.assetKey})]})]}),n.autoMaterializePolicy&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"top-and-bottom",children:(0,l.jsx)(P.pm,{children:"Auto-materialize policy"})}),(0,l.jsxs)(p.x,{padding:{vertical:16,horizontal:24},flex:{gap:12,alignItems:"flex-start"},children:[(0,l.jsx)(P.uT,{style:{flex:1},children:(0,eK.r)(n.autoMaterializePolicy)}),(0,l.jsx)(eK.W,{policy:n.autoMaterializePolicy})]})]}),n.backfillPolicy&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"top-and-bottom",children:(0,l.jsx)(P.pm,{children:"Backfill policy"})}),(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},flex:{gap:12,alignItems:"flex-start"},children:(0,l.jsx)(P.uT,{style:{flex:1},children:n.backfillPolicy.description})})]}),(0,l.jsxs)(p.x,{padding:{vertical:16,horizontal:24},border:"top-and-bottom",flex:{justifyContent:"space-between",gap:8},children:[(0,l.jsxs)(P.pm,{children:["Upstream assets",(null==i?void 0:i.length)?" (".concat(i.length,")"):""]}),(0,l.jsx)(E.rU,{to:"?view=lineage&lineageScope=upstream",children:(0,l.jsxs)(p.x,{flex:{gap:4,alignItems:"center"},children:["View upstream graph",(0,l.jsx)(K.JO,{name:"open_in_new",color:h.Es()})]})})]}),s&&(0,l.jsx)(p.x,{padding:{vertical:16,left:24,right:12},border:"bottom",children:(0,l.jsx)(ek.x,{})}),(0,l.jsx)(AssetNodeList,{items:i}),(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"top-and-bottom",flex:{justifyContent:"space-between",gap:8},children:(0,l.jsxs)(P.pm,{children:["Downstream assets",(null==r?void 0:r.length)?" (".concat(r.length,")"):""]})}),(0,l.jsx)(AssetNodeList,{items:r}),(0,l.jsx)("div",{style:{flex:1}})]}),(0,l.jsxs)(p.x,{border:"left-and-right",style:{flex:.5,minWidth:0},flex:{direction:"column"},children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"bottom",children:(0,l.jsx)(P.pm,{children:"Required resources"})}),(0,l.jsxs)(p.x,{padding:{vertical:16,horizontal:24},border:"bottom",children:[(0,O._)(n.requiredResources).sort(function(e,t){return eD.Bl.compare(e.resourceKey,t.resourceKey)}).map(function(e){return(0,l.jsxs)(eF.b1,{children:[(0,l.jsx)(K.JO,{name:"resource",color:h.md()}),x?(0,l.jsx)(E.rU,{to:(0,e$.$U)(x,"/resources/".concat(e.resourceKey)),children:(0,l.jsx)(eF.bZ,{children:e.resourceKey})}):(0,l.jsx)(eF.bZ,{children:e.resourceKey})]},e.resourceKey)}),0===n.requiredResources.length&&(0,l.jsxs)(P.uT,{children:["No required resources to display",(0,l.jsx)(p.x,{padding:{top:4},children:(0,l.jsx)("a",{href:"https://docs.dagster.io/concepts/resources#using-software-defined-assets",children:"View documentation"})})]})]})]}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"bottom",children:(0,l.jsx)(P.pm,{children:"Config"})}),(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"bottom",children:u?(0,l.jsx)(eA.L,{type:u,typesInScope:u.recursiveConfigTypes}):(0,l.jsxs)(P.uT,{children:["No config schema defined",(0,l.jsx)(p.x,{padding:{top:4},children:(0,l.jsx)("a",{href:"https://docs.dagster.io/concepts/assets/software-defined-assets#asset-configuration",children:"View documentation"})})]})})]}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"bottom",children:(0,l.jsx)(P.pm,{children:"Type"})}),d&&"Any"!==d.displayName?(0,l.jsx)(eL.Ot,{type:d}):(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},children:(0,l.jsxs)(P.uT,{children:["No input and output type data defined",(0,l.jsx)(p.x,{padding:{top:4},children:(0,l.jsx)("a",{href:"https://docs.dagster.io/concepts/types#overview",children:"View documentation"})})]})})]}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"top-and-bottom",flex:{justifyContent:"space-between",gap:8},children:(0,l.jsx)(P.pm,{children:"Metadata"})}),(0,l.jsx)(p.x,{style:{flex:1},children:o.length>0?(0,l.jsx)(eE.mQ,{assetMetadata:o,repoLocation:null==x?void 0:x.location}):(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},children:(0,l.jsxs)(P.uT,{children:["No asset definition metadata defined",(0,l.jsx)(p.x,{padding:{top:4},children:(0,l.jsx)("a",{href:"https://docs.dagster.io/concepts/assets/software-defined-assets#attaching-definition-metadata",children:"View documentation"})})]})})})]})]})]})]})},DescriptionAnnotations=function(e){var t=e.assetNode,n=e.repoAddress;return(0,l.jsxs)(p.x,{flex:{alignItems:"center",gap:16,wrap:"wrap"},style:{lineHeight:0},children:[t.jobNames.filter(function(e){return!(0,U.pv)(e)}).map(function(e){return(0,l.jsx)(P.fv,{children:(0,l.jsx)(W.h,{isJob:!0,showIcon:!0,pipelineName:e,pipelineHrefContext:n})},e)}),(0,l.jsx)(eM.d,{assetNode:t,repoAddress:n}),t.isSource?(0,l.jsx)(P.YS,{style:{lineHeight:"16px"},children:"Source Asset"}):t.isExecutable?void 0:(0,l.jsx)(P.YS,{style:{lineHeight:"16px"},children:"External Asset"})]})},eV=(0,c.Ps)(AssetNodeDefinition_templateObject(),e_.r,ez.zU,eE.Ws,eS),eU="lineageGraphZoomLevel",SVGSaveZoomLevel=function(e){var t=e.scale;return(0,m.useEffect)(function(){try{window.localStorage.setItem(eU,JSON.stringify(t))}catch(e){}},[t]),(0,l.jsx)(l.Fragment,{})},eq=n(87405),eW=n(87798),eJ=n(91282),eB=n(32858),eZ=n(15989),eH=n(33161),eG=n(76861);function AssetNodeLineageGraph_templateObject(){var e=(0,o._)(["\n  overflow: visible;\n  border-radius: 0;\n"]);return AssetNodeLineageGraph_templateObject=function(){return e},e}var eQ={direction:"horizontal"},AssetNodeLineageGraph=function(e){var t=e.assetKey,n=e.assetGraphData,i=e.params,r=(0,U.Wu)(t),s=(0,m.useMemo)(function(){var e={};return Object.values(n.nodes).forEach(function(t){var n=(0,U.e6)(t);e[n]=e[n]||[],e[n].push(t)}),{allGroups:Object.keys(e),groupedAssets:e}},[n]),a=s.allGroups,o=s.groupedAssets,d=(0,y._)((0,m.useState)(null),2),c=d[0],u=d[1],h=(0,eH.oJ)(n,a,eQ),g=h.layout,b=h.loading,A=(0,m.useRef)(),_=(0,f.k6)(),onClickAsset=function(e){_.push((0,F.p)(e,(0,v._)((0,j._)({},i),{lineageScope:"neighbors"})))};return((0,m.useEffect)(function(){if(A.current&&g){var e=Number((0,ev.n)(eU));A.current.autocenter(!1,e),A.current.focus()}},[A,g,r]),!g||b)?(0,l.jsx)(p.x,{style:{flex:1},flex:{alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(x.$,{purpose:"page"})}):(0,l.jsx)(eZ.lM,{ref:function(e){return A.current=e||void 0},interactor:eZ.lM.Interactors.PanAndZoom,defaultZoom:"zoom-to-fit",graphWidth:g.width,graphHeight:g.height,onDoubleClick:function(e){var t;null===(t=A.current)||void 0===t||t.autocenter(!0),e.stopPropagation()},maxZoom:eZ.eW,maxAutocenterZoom:eZ.eW,children:function(e,t){var i=e.scale;return(0,l.jsxs)(eY,{width:g.width,height:g.height,children:[A.current&&(0,l.jsx)(SVGSaveZoomLevel,{scale:i}),Object.values(g.groups).filter(function(e){return!(0,eG.we)(e.bounds,t)}).sort(function(e,t){return e.id.length-t.id.length}).map(function(e){return(0,m.createElement)("foreignObject",(0,v._)((0,j._)({},e.bounds),{key:"".concat(e.id,"-outline"),onDoubleClick:function(e){e.stopPropagation()}}),(0,l.jsx)(eJ.z,{$minimal:i<eW.CZ}))}),(0,l.jsx)(eq.i,{selected:null,highlighted:c,edges:g.edges,viewportRect:t,direction:"horizontal"}),Object.values(g.groups).filter(function(e){return!(0,eG.we)(e.bounds,t)}).sort(function(e,t){return e.id.length-t.id.length}).map(function(e){return(0,m.createElement)("foreignObject",(0,v._)((0,j._)({},e.bounds),{key:e.id}),(0,l.jsx)(eJ.Z,{group:(0,v._)((0,j._)({},e),{assets:o[e.id]}),minimal:i<eW.CZ,setHighlighted:u}))}),Object.values(g.nodes).filter(function(e){return!(0,eG.we)(e.bounds,t)}).map(function(e){var t=e.id,s=e.bounds,a=n.nodes[t],o=JSON.parse(t),d={graphData:n,node:a};return(0,m.createElement)("foreignObject",(0,v._)((0,j._)({},s),{key:t,style:{overflow:"visible"},onMouseEnter:function(){return u([t])},onMouseLeave:function(){return u(null)},onClick:function(){return onClickAsset({path:o})},onDoubleClick:function(e){var t;null===(t=A.current)||void 0===t||t.zoomToSVGBox(s,!0,1.2),e.stopPropagation()}}),a?i<eW.CZ?(0,l.jsx)(ez.ef,(0,v._)((0,j._)({},d),{children:(0,l.jsx)(ez.t$,{definition:a.definition,selected:a.id===r,height:s.height})})):(0,l.jsx)(ez.ef,(0,v._)((0,j._)({},d),{children:(0,l.jsx)(ez.p4,{definition:a.definition,selected:a.id===r})})):(0,l.jsx)(eB.w,{assetKey:{path:o}}))})]})}})},eY=en.ZP.svg.withConfig({componentId:"sc-4bf42418-0"})(AssetNodeLineageGraph_templateObject()),eX=n(185),e0=n(34822),LineageDepthControl=function(e){var t=e.value,n=e.max,i=e.onChange,r=(0,y._)((0,m.useState)("".concat(t)),2),s=r[0],a=r[1];(0,m.useLayoutEffect)(function(){a("".concat(t))},[t]);var commitText=function(){i(Number(s)?Math.min(n,Number(s)):t)};return(0,l.jsxs)(p.x,{flex:{gap:8,alignItems:"center"},children:["Graph depth",(0,l.jsxs)(N.zH,{children:[(0,l.jsx)(N.zx,{disabled:t<=1,onClick:function(){return i(t-1)},icon:(0,l.jsx)(K.JO,{name:"dash"})}),(0,l.jsx)(e0.oi,{min:1,max:n,disabled:n<=1,inputMode:"numeric",style:{width:40,marginLeft:-1,textAlign:"center",height:32,padding:6,borderRadius:0,boxShadow:"none",border:"1px solid ".concat(h.im())},value:s,onChange:function(e){return a(e.target.value)},onKeyDown:function(e){return"Enter"===e.key||"Return"===e.key?commitText():void 0},onBlur:function(){return commitText()}},t),(0,l.jsx)(N.zx,{disabled:t>=n,onClick:function(){return i(t+1)},icon:(0,l.jsx)(K.JO,{name:"add"})}),(0,l.jsx)(N.zx,{disabled:t>=n,onClick:function(){return i(n)},children:"All"})]})]})},e1=n(24601);function AssetNodeLineage_templateObject(){var e=(0,o._)(["\n  background: ",";\n  border-radius: 8px;\n  color: ",";\n  align-items: center;\n  display: flex;\n  padding: 4px 8px;\n  gap: 4px;\n  position: absolute;\n  right: 12px;\n  top: 70px;\n  z-index: 2;\n"]);return AssetNodeLineage_templateObject=function(){return e},e}var AssetNodeLineage=function(e){var t=e.params,n=e.setParams,i=e.assetKey,r=e.assetGraphData,s=e.graphQueryItems,a=e.requestedDepth,o=(0,m.useContext)(eb.G),d=o.LineageOptions,c=o.LineageGraph,u=void 0===c?AssetNodeLineageGraph:c,x=(0,m.useMemo)(function(){return(0,e1.BK)(s,i)},[s,i]),h="upstream"===t.lineageScope?x.upstream:"downstream"===t.lineageScope?x.downstream:Math.max(x.upstream,x.downstream),f=Math.max(1,Math.min(h,a));return(0,l.jsxs)(p.x,{style:{width:"100%",flex:1,minHeight:0,position:"relative"},flex:{direction:"column"},children:[(0,l.jsxs)(p.x,{flex:{justifyContent:"space-between",alignItems:"center",gap:12},padding:{left:24,right:12,vertical:12},border:"bottom",children:[(0,l.jsx)(C.h,{activeItems:new Set([t.lineageScope||"neighbors"]),buttons:[{id:"neighbors",label:"Nearest Neighbors",icon:"graph_neighbors"},{id:"upstream",label:"Upstream",icon:"graph_upstream"},{id:"downstream",label:"Downstream",icon:"graph_downstream"}],onClick:function(e){return n((0,v._)((0,j._)({},t),{lineageScope:e,lineageDepth:void 0}))}}),(0,l.jsx)(LineageDepthControl,{value:f,onChange:function(e){return n((0,v._)((0,j._)({},t),{lineageDepth:e}))},max:h}),d&&(0,l.jsx)(d,{assetKey:i,params:t,setParams:n}),(0,l.jsx)("div",{style:{flex:1}}),Object.values(r.nodes).length>1?(0,l.jsx)(eX.XE,{primary:!1,scope:{all:Object.values(r.nodes).map(function(e){return e.definition})}}):(0,l.jsx)(N.zx,{icon:(0,l.jsx)(K.JO,{name:"materialization"}),disabled:!0,children:"Materialize all"})]}),f<h&&(0,l.jsx)(e2,{children:"Not all upstream/downstream assets shown. Increase the depth to show more."}),(0,l.jsx)(u,{params:t,assetKey:i,assetGraphData:r})]})},e2=en.ZP.div.withConfig({componentId:"sc-eb1f7de8-0"})(AssetNodeLineage_templateObject(),h.gJ(),h.$()),e4=n(38058),e8=n(12084),e6=n(24878);function Skeleton_templateObject(){var e=(0,o._)(["\n  width: ",";\n  height: ",";\n  display: block;\n  min-height: 1.5em;\n  border-radius: 6px;\n  background: linear-gradient(\n    90deg,\n    "," 25%,\n    "," 37%,\n    "," 63%\n  );\n  background-size: 400% 100%;\n  animation-name: skeleton-loading;\n  animation-duration: 1.4s;\n  animation-timing-function: ease;\n  animation-iteration-count: infinite;\n\n  @keyframes skeleton-loading {\n    0% {\n      background-position: 100% 50%;\n    }\n    100% {\n      background-position: 0 50%;\n    }\n  }\n"]);return Skeleton_templateObject=function(){return e},e}var e5=en.ZP.div.withConfig({componentId:"sc-bef0a015-0"})(Skeleton_templateObject(),function(e){return Number(e.$width)?"".concat(e.$width,"px"):e.$width?e.$width:"100%"},function(e){return Number(e.$height)?"".concat(e.$height,"px"):e.$height?e.$height:"100%"},e6.x(),e6.dN(),e6.x()),e3=n(86760),e7=n(99322),e9=n(2253),te=n(31310),MaterializationTag=function(e){var t=e.assetKey,n=e.event,i=e.stepKey;return(0,l.jsx)(w.V,{intent:"success",children:(0,l.jsxs)(p.x,{flex:{gap:4,alignItems:"center"},children:[(0,l.jsx)(te.YI,{statusCase:e7.KB.MATERIALIZED}),(0,l.jsx)(e9.T,{assetKey:t,runId:n.runId,event:{timestamp:n.timestamp,stepKey:i},children:(0,l.jsx)(p.x,{style:{color:h.Ap()},flex:{gap:4},children:(0,l.jsx)(V.E,{timestamp:{ms:Number(n.timestamp)}})})})]})})},SimpleStakeholderAssetStatus=function(e){var t=e.liveData,n=e.assetNode;return t?(t.inProgressRunIds||[]).length>0?(0,l.jsxs)(P.YS,{children:["Materializing in"," ",(0,l.jsx)(e9.T,{assetKey:n.assetKey,runId:t.inProgressRunIds[0]})]}):t.runWhichFailedToMaterialize?(0,l.jsx)(w.V,{intent:"danger",children:(0,l.jsxs)(p.x,{flex:{gap:4,alignItems:"center"},children:[(0,l.jsx)(te.YI,{statusCase:e7.KB.FAILED_MATERIALIZATION}),"Failed in",(0,l.jsx)(e9.T,{assetKey:n.assetKey,runId:t.runWhichFailedToMaterialize.id,children:(0,l.jsx)(p.x,{style:{color:h.Yn()},children:(0,B.EI)(t.runWhichFailedToMaterialize)})})]})}):t.lastMaterialization?(0,l.jsx)(MaterializationTag,{assetKey:n.assetKey,event:t.lastMaterialization,stepKey:t.stepKey}):t.lastObservation&&n.isSource?(0,l.jsx)(w.V,{intent:"none",children:(0,l.jsx)(V.E,{timestamp:{ms:Number(t.lastObservation.timestamp)}})}):(0,l.jsx)(P.YS,{color:h.Aw(),children:n.isSource?"Never observed":"Never materialized"}):(0,l.jsx)("span",{})},tt=n(33023),tn=n(22511),ti=n(72254),tr=n(60130);function useLatestPartitionEvents_templateObject(){var e=(0,o._)(["\n  query AssetOverviewMetadataEventsQuery($assetKey: AssetKeyInput!) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        assetMaterializations(limit: 1, partitionInLast: 1) {\n          timestamp\n          runId\n          metadataEntries {\n            ...MetadataEntryFragment\n          }\n        }\n        assetObservations(limit: 1, partitionInLast: 1) {\n          timestamp\n          runId\n          metadataEntries {\n            ...MetadataEntryFragment\n          }\n        }\n      }\n    }\n  }\n\n  ","\n"]);return useLatestPartitionEvents_templateObject=function(){return e},e}var ts=(0,c.Ps)(useLatestPartitionEvents_templateObject(),ei.it),ta=n(66904),to=n(24001),tl=n(76129),td=n(13032),tc=n(63386);function AssetNodeOverview_templateObject(){var e=(0,o._)(["\n  > div {\n    background-color: ",";\n  }\n"]);return AssetNodeOverview_templateObject=function(){return e},e}var AssetNodeOverview=function(e){var t,n,i,r,s,a,o,c,u=e.assetNode,x=e.upstream,f=e.downstream,g=e.liveData,y=e.dependsOnSelf,b=(0,H.kQ)(u.repository.name,u.repository.location.name),A=(0,m.useContext)(Z.C5).locationEntries.find(function(e){var t;return(null===(t=e.locationOrLoadError)||void 0===t?void 0:t.__typename)==="RepositoryLocation"&&e.locationOrLoadError.repositories.some(function(e){return e.name===b.name&&e.location.name===b.location})}),_=(0,eE.U6)(u),C=_.assetType,S=_.assetMetadata,z=(0,m.useMemo)(function(){return insitigatorsByType(u)},[u]),I=z.schedules,N=z.sensors,k=null===(c=u.configField)||void 0===c?void 0:c.configType,M=k&&"Any"!==k.key?k:null,T=u.jobNames.filter(function(e){return!(0,U.pv)(e)}),D=A?1e3*A.updatedTimestamp:void 0,L=(n=null==g?void 0:null===(t=g.lastMaterialization)||void 0===t?void 0:t.timestamp,r=(i=(0,d.a)(ts,{variables:{assetKey:(0,tr.W1)(u)}})).data,s=i.refetch,m.useEffect(function(){s()},[s,n,D]),{materialization:(null==r?void 0:r.assetOrError.__typename)==="Asset"?r.assetOrError.assetMaterializations[0]:void 0,observation:(null==r?void 0:r.assetOrError.__typename)==="Asset"?r.assetOrError.assetObservations[0]:void 0,loading:!r}),F=L.materialization,$=L.observation,V=L.loading,J=(0,td.C)().UserDisplay;if(V)return(0,l.jsx)(AssetNodeOverviewLoading,{});var B=function(e){var t=e.materialization,n=e.definition,i=e.definitionLoadTimestamp,r=null==t?void 0:t.metadataEntries.find(tn.ce),s=t?Number(t.timestamp):void 0,a=null==n?void 0:n.metadataEntries.find(tn.ce),o=null!=r?r:a;if(r&&a){var l=Object.fromEntries(a.schema.columns.map(function(e){return[e.name,e.description]})),d=r.schema.columns.map(function(e){var t=l[e.name]||e.description;return(0,v._)((0,j._)({},e),{description:t})});o=(0,v._)((0,j._)({},r),{schema:(0,v._)((0,j._)({},r.schema),{columns:d})})}return{tableSchema:o,tableSchemaLoadTimestamp:null!=s?s:i}}({materialization:F,definition:u,definitionLoadTimestamp:D}),G=B.tableSchema,Y=B.tableSchemaLoadTimestamp;return(0,l.jsx)(AssetNodeOverviewContainer,{left:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(LargeCollapsibleSection,{header:"Status",icon:"status",children:(0,l.jsxs)(p.x,{flex:{direction:"row"},children:[(0,l.jsxs)(p.x,{flex:{direction:"column",gap:6},style:{width:"50%"},children:[(0,l.jsxs)(P.Tj,{children:["Latest ",(null==u?void 0:u.isSource)?"observation":"materialization"]}),(0,l.jsxs)(p.x,{flex:{gap:8,alignItems:"center"},children:[g?(0,l.jsx)(SimpleStakeholderAssetStatus,{liveData:g,assetNode:u}):(0,l.jsx)(NoValue,{}),u&&u.freshnessPolicy&&(0,l.jsx)(eR.CW,{policy:u.freshnessPolicy,assetKey:u.assetKey})]})]}),(null==g?void 0:g.assetChecks.length)?(0,l.jsxs)(p.x,{flex:{direction:"column",gap:6},style:{width:"50%"},children:[(0,l.jsx)(P.Tj,{children:"Check results"}),(0,l.jsx)(tt.X,{liveData:g,rendering:"tags"})]}):void 0]})}),(0,l.jsx)(LargeCollapsibleSection,{header:"Description",icon:"sticky_note",children:u.description?(0,l.jsx)(q.d,{description:u.description,maxHeight:260}):(0,l.jsx)(SectionEmptyState,{title:"No description found",description:"You can add a description to any asset by adding a `description` argument to it.",learnMoreLink:"https://docs.dagster.io/_apidocs/assets#software-defined-assets"})}),G&&(0,l.jsx)(LargeCollapsibleSection,{header:"Columns",icon:"view_column",children:(0,l.jsx)(tn.w4.Provider,{value:{assetKey:u.assetKey,materializationMetadataEntries:null==F?void 0:F.metadataEntries},children:(0,l.jsx)(tn.po,{schema:G.schema,schemaLoadTimestamp:Y})})}),(0,l.jsx)(LargeCollapsibleSection,{header:"Metadata",icon:"view_list",children:(0,l.jsx)(R.J,{showHeader:!0,showTimestamps:!0,showFilter:!0,hideTableSchema:!0,observations:[],definitionMetadata:S,definitionLoadTimestamp:D,event:F||$||null,emptyState:(0,l.jsx)(SectionEmptyState,{title:"No metadata found",description:"Attach metadata to your asset definition, materializations or observations to see it here.",learnMoreLink:"https://docs.dagster.io/concepts/assets/software-defined-assets#attaching-definition-metadata"})})}),(0,l.jsx)(LargeCollapsibleSection,{header:"Lineage",icon:"account_tree",right:(0,l.jsx)(E.rU,{to:(0,ti.TJ)([u.assetKey]),onClick:function(e){return e.stopPropagation()},children:(0,l.jsx)(p.x,{flex:{gap:4,alignItems:"center"},children:"View in graph"})}),children:(0,l.jsxs)(l.Fragment,{children:[y&&(0,l.jsx)(p.x,{padding:{bottom:12},children:(0,l.jsx)(ek.x,{})}),(0,l.jsxs)(p.x,{flex:{direction:"row"},children:[(0,l.jsxs)(p.x,{flex:{direction:"column",gap:6},style:{width:"50%"},children:[(0,l.jsx)(P.Tj,{children:"Upstream assets"}),(null==x?void 0:x.length)?(0,l.jsx)(AssetLinksWithStatus,{assets:x}):(0,l.jsx)(p.x,{children:(0,l.jsx)(NoValue,{})})]}),(0,l.jsxs)(p.x,{flex:{direction:"column",gap:6},style:{width:"50%"},children:[(0,l.jsx)(P.Tj,{children:"Downstream assets"}),(null==f?void 0:f.length)?(0,l.jsx)(AssetLinksWithStatus,{assets:f}):(0,l.jsx)(p.x,{children:(0,l.jsx)(NoValue,{})})]})]})]})})]}),right:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(LargeCollapsibleSection,{header:"Definition",icon:"info",children:(0,l.jsxs)(p.x,{flex:{direction:"column",gap:12},children:[(0,l.jsx)(AttributeAndValue,{label:"Key",children:(0,l.jsx)(Q.g,{text:(0,U.ll)(u.assetKey)})}),(0,l.jsx)(AttributeAndValue,{label:"Group",children:(0,l.jsx)(w.V,{icon:"asset_group",children:(0,l.jsx)(E.rU,{to:(0,e$.$U)(b,"/asset-groups/".concat(u.groupName)),children:u.groupName})})}),(0,l.jsx)(AttributeAndValue,{label:"Code location",children:(0,l.jsxs)(p.x,{flex:{direction:"column"},children:[(0,l.jsx)(ew.Nj,{assetKey:u.assetKey,loadedFromRepo:b}),(0,l.jsx)(tc.b,{repoAddress:b}),A&&(0,l.jsxs)(P.YS,{color:h.Aw(),children:["Loaded ",et().unix(A.updatedTimestamp).fromNow()]})]})}),(0,l.jsx)(AttributeAndValue,{label:"Owners",children:u.owners&&u.owners.length>0&&(0,l.jsx)(p.x,{flex:{gap:4,alignItems:"center"},children:u.owners.map(function(e,t){return"UserAssetOwner"===e.__typename?(0,l.jsx)(tu,{children:(0,l.jsx)(J,{email:e.email,size:"very-small"},t)},t):(0,l.jsx)(w.V,{icon:"people",children:e.team},t)})})}),(0,l.jsx)(AttributeAndValue,{label:"Compute kind",children:u.computeKind&&(0,l.jsx)(tl.hG,{style:{position:"relative"},definition:u,reduceColor:!0})}),(0,l.jsx)(AttributeAndValue,{label:"Tags",children:u.tags&&u.tags.length>0&&(0,l.jsx)(p.x,{flex:{gap:4,alignItems:"center",wrap:"wrap"},children:u.tags.map(function(e,t){return(0,l.jsxs)(w.V,{children:[e.key,"=",e.value]},t)})})})]})}),(0,l.jsx)(LargeCollapsibleSection,{header:"Automation details",icon:"auto_materialize_policy",children:(a=[{label:"Jobs",children:T.map(function(e){return(0,l.jsx)(W.B,{isJob:!0,showIcon:!0,pipelineName:e,pipelineHrefContext:b},e)})},{label:"Sensors",children:N.length>0&&(0,l.jsx)(eO.I,{repoAddress:b,sensors:N,showSwitch:!1})},{label:"Schedules",children:I.length>0&&(0,l.jsx)(eO.I,{repoAddress:b,schedules:I,showSwitch:!1})},{label:"Auto-materialize policy",children:u.autoMaterializePolicy&&(0,l.jsx)(eK.W,{policy:u.autoMaterializePolicy})},{label:"Freshness policy",children:u.freshnessPolicy&&(0,l.jsx)(P.uT,{children:(0,eR.jY)(u.freshnessPolicy)})}]).every(function(e){return isEmptyChildren(e.children)})?(0,l.jsx)(SectionEmptyState,{title:"No automations found for this asset",description:"Dagster offers several ways to run data pipelines without manual intervention, including traditional scheduling and event-based triggers.",learnMoreLink:"https://docs.dagster.io/concepts/automation#automation"}):(0,l.jsx)(p.x,{flex:{direction:"column",gap:12},children:a.map(function(e){return(0,l.jsx)(AttributeAndValue,(0,j._)({},e),e.label)})})}),(0,l.jsx)(LargeCollapsibleSection,{header:"Compute details",icon:"settings",collapsedByDefault:!0,children:(0,l.jsxs)(p.x,{flex:{direction:"column",gap:12},children:[(0,l.jsx)(AttributeAndValue,{label:"Computed by",children:(0,l.jsx)(w.V,{children:(0,l.jsx)(eM.d,{assetNode:u,repoAddress:b,hideIfRedundant:!1})})}),(0,l.jsx)(AttributeAndValue,{label:"Code version",children:u.opVersion}),(0,l.jsx)(AttributeAndValue,{label:"Resources",children:(0,O._)(u.requiredResources).sort(function(e,t){return eD.Bl.compare(e.resourceKey,t.resourceKey)}).map(function(e){return(0,l.jsx)(w.V,{children:(0,l.jsxs)(p.x,{flex:{gap:4,alignItems:"center"},children:[(0,l.jsx)(K.JO,{name:"resource",color:h.md()}),b?(0,l.jsx)(E.rU,{to:(0,e$.$U)(b,"/resources/".concat(e.resourceKey)),children:e.resourceKey}):e.resourceKey]})},e.resourceKey)})}),(0,l.jsx)(AttributeAndValue,{label:"Config schema",children:M&&(0,l.jsx)(e8.Z,{onClick:function(){(0,ta._K)({title:"Config schema",body:(0,l.jsx)(eA.L,{type:M,typesInScope:M.recursiveConfigTypes})})},children:"View config details"})}),(0,l.jsx)(AttributeAndValue,{label:"Type",children:C&&"Any"!==C.displayName&&(0,l.jsx)(e8.Z,{onClick:function(){(0,ta._K)({title:"Type summary",body:(0,l.jsx)(eL.Ot,{type:C})})},children:"View type details"})}),(0,l.jsx)(AttributeAndValue,{label:"Backfill policy",children:null===(o=u.backfillPolicy)||void 0===o?void 0:o.description})]})})]})})},AssetNodeOverviewContainer=function(e){var t=e.left,n=e.right;return(0,l.jsxs)(p.x,{flex:{direction:"row",gap:8},style:{width:"100%",height:"100%",overflowY:"auto",overflowX:"hidden"},children:[(0,l.jsx)(p.x,{flex:{direction:"column"},padding:{horizontal:24,vertical:12},style:{flex:1,minWidth:0},children:t}),(0,l.jsx)(p.x,{border:{side:"left"},flex:{direction:"column"},padding:{left:24,vertical:12,right:12},style:{width:"30%",minWidth:250},children:n})]})},isEmptyChildren=function(e){return!e||e instanceof Array&&0===e.length},AttributeAndValue=function(e){var t=e.label,n=e.children;return isEmptyChildren(n)?null:(0,l.jsxs)(p.x,{flex:{direction:"column",gap:6,alignItems:"flex-start"},children:[(0,l.jsx)(P.Tj,{children:t}),(0,l.jsx)(P.pN,{style:{maxWidth:"100%"},children:(0,l.jsx)(p.x,{flex:{gap:2},children:n})})]})},NoValue=function(){return(0,l.jsx)(P.pN,{color:h.Aw(),children:"–"})},AssetNodeOverviewNonSDA=function(e){var t=e.assetKey,n=e.lastMaterialization;return(0,l.jsx)(AssetNodeOverviewContainer,{left:(0,l.jsx)(LargeCollapsibleSection,{header:"Status",icon:"status",children:n?(0,l.jsx)(MaterializationTag,{assetKey:t,event:n,stepKey:null}):(0,l.jsx)(P.YS,{color:h.Aw(),children:"Never materialized"})}),right:(0,l.jsx)(LargeCollapsibleSection,{header:"Definition",icon:"info",children:(0,l.jsx)(p.x,{flex:{direction:"column",gap:12},children:(0,l.jsx)(A.t,{description:"This asset doesn't have a software definition in any of your code locations.",icon:"materialization",title:""})})})})},AssetNodeOverviewLoading=function(){return(0,l.jsx)(AssetNodeOverviewContainer,{left:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(LargeCollapsibleSection,{header:"Status",icon:"status",children:(0,l.jsxs)(p.x,{flex:{direction:"column",gap:6},children:[(0,l.jsx)(e5,{$height:20,$width:170}),(0,l.jsx)(e5,{$height:24,$width:240})]})}),(0,l.jsx)(LargeCollapsibleSection,{header:"Description",icon:"sticky_note",children:(0,l.jsxs)(p.x,{flex:{direction:"column",gap:6},children:[(0,l.jsx)(e5,{$height:16,$width:"90%"}),(0,l.jsx)(e5,{$height:16}),(0,l.jsx)(e5,{$height:16,$width:"60%"})]})})]}),right:(0,l.jsx)(LargeCollapsibleSection,{header:"Definition",icon:"info",children:(0,l.jsxs)(p.x,{flex:{direction:"column",gap:12},children:[(0,l.jsx)(AttributeAndValue,{label:(0,l.jsx)(e5,{$width:60}),children:(0,l.jsx)(e5,{$height:20,$width:220})}),(0,l.jsx)(AttributeAndValue,{label:(0,l.jsx)(e5,{$width:80}),children:(0,l.jsx)(e5,{$height:24,$width:180})}),(0,l.jsx)(AttributeAndValue,{label:(0,l.jsx)(e5,{$width:120}),children:(0,l.jsx)(e5,{$height:24,$width:240})})]})})})},LargeCollapsibleSection=function(e){var t=e.header,n=e.icon,i=e.children,r=e.right,s=e.collapsedByDefault,a=void 0!==s&&s,o=(0,y._)((0,ev.U)("collapsible-section-".concat(t),function(e){return!0===e||!1===e?e:a}),2),d=o[0],c=o[1];return(0,l.jsxs)(p.x,{flex:{direction:"column"},children:[(0,l.jsx)(e3.k,{onClick:function(){return c(!d)},children:(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",gap:6},padding:{vertical:12,right:12},border:"bottom",children:[(0,l.jsx)(K.JO,{size:20,name:n}),(0,l.jsx)(P.d1,{style:{flex:1,minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},children:t}),r,(0,l.jsx)(K.JO,{name:"arrow_drop_down",size:20,style:{transform:d?"rotate(-90deg)":"rotate(0deg)"}})]})}),(0,l.jsx)(e4.UO,{isOpen:!d,children:(0,l.jsx)(p.x,{padding:{vertical:12},children:i})})]})},SectionEmptyState=function(e){var t=e.title,n=e.description,i=e.learnMoreLink;return(0,l.jsxs)(p.x,{padding:24,style:{background:h.gJ(),borderRadius:8},flex:{direction:"column",gap:8},children:[(0,l.jsx)(P.Tj,{children:t}),(0,l.jsx)(P.pN,{children:n}),i?(0,l.jsx)("a",{href:i,target:"_blank",rel:"noreferrer",children:"Learn more"}):void 0]})},AssetLinksWithStatus=function(e){var t=e.assets,n=e.displayedByDefault,i=void 0===n?20:n,r=(0,y._)((0,m.useState)(i),2),s=r[0],a=r[1],o=m.useMemo(function(){return t.sort(function(e,t){return(0,U._v)(e.assetKey,t.assetKey)}).slice(0,s)},[t,s]);return(0,l.jsxs)(p.x,{flex:{direction:"column",gap:6},children:[o.map(function(e){return(0,l.jsx)(E.rU,{to:(0,F.p)(e.assetKey),children:(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"auto minmax(0, 1fr)",gap:"6px",alignItems:"center"},children:[(0,l.jsx)(to.z,{node:{assetKey:e.assetKey,definition:e}}),(0,l.jsx)(Q.g,{text:(0,U.ll)(e.assetKey)})]})},(0,U.Je)(e.assetKey))}),(0,l.jsx)(p.x,{children:o.length<t.length?(0,l.jsxs)(N.zx,{small:!0,onClick:function(){return a(Number.MAX_SAFE_INTEGER)},children:["Show ",t.length-o.length," more"]}):o.length>i?(0,l.jsx)(N.zx,{small:!0,onClick:function(){return a(i)},children:"Show less"}):void 0})]})},tu=en.ZP.div.withConfig({componentId:"sc-8f23d812-0"})(AssetNodeOverview_templateObject(),h.wc()),tp=n(43180),tx=n(18149),th=n.n(tx),tm=n(75652),tf=n.n(tm),tg=n(77516),tj=n(7872),tv=n(68052),AssetPartitionStatusCheckboxes=function(e){var t=e.counts,n=e.value,i=e.onChange,r=e.allowed,s=e.disabled;return(0,l.jsx)(p.x,{flex:{direction:"row",alignItems:"center",gap:12},style:{overflow:"hidden"},children:r.map(function(e){return(0,l.jsx)(I.X,{"data-testid":(0,tv.N)("partition-status-".concat(e,"-checkbox")),disabled:s,style:{marginBottom:0,marginLeft:10,minWidth:200},checked:n.includes(e)&&!s,label:"".concat((0,tj.be)(e)," (").concat(t[e],")"),onChange:function(){return i(n.includes(e)?n.filter(function(t){return t!==e}):(0,O._)(n).concat([e]))}},e)})})},ty=n(311),tb=n(1976),tA=n(54877),t_=n(71277),tw=n(55113),tE=n(61599),tO=[tj.yo.MISSING,tj.yo.MATERIALIZING,tj.yo.MATERIALIZED,tj.yo.FAILED].sort();(i=s||(s={}))[i.CREATION=0]="CREATION",i[i.REVERSE_CREATION=1]="REVERSE_CREATION",i[i.ALPHABETICAL=2]="ALPHABETICAL",i[i.REVERSE_ALPHABETICAL=3]="REVERSE_ALPHABETICAL";var AssetPartitions=function(e){var t,n,i,r,s,a,o=e.assetKey,d=e.assetPartitionDimensions,c=e.params,u=e.setParams,f=e.dataRefreshHint,g=(0,tA.mR)([o],f)[0],b=(0,y._)((0,tb.q)({knownDimensionNames:d,modifyQueryString:!0,assetHealth:g,shouldReadPartitionQueryStringParam:!1}),2),A=b[0],_=b[1],w=(0,y._)((0,m.useState)([]),2),E=w[0],C=w[1],I=(0,y._)((0,t_.q)({defaults:{status:(0,O._)(tO).sort().join(",")},encode:function(e){return{status:(0,O._)(e).sort().join(",")}},decode:function(e){return(e.status||"").split(",").filter(function(e){return tO.includes(e)})}}),2),N=I[0],k=I[1],R=A.findIndex(function(e){return(0,ty.nv)(e.dimension)}),M=(0,y._)((n=(t={params:c,setParams:u,dimensionCount:A.length,defaultKeyInDimension:function(e){return dimensionKeysInSelection(e)[0]}}).params,i=t.setParams,r=t.dimensionCount,s=t.defaultKeyInDimension,[a=(0,m.useMemo)(function(){return n.partition?r>1?n.partition.split("|").filter(Boolean):[n.partition]:[]},[r,n.partition]),function(e,t){for(var r=[],o=0;o<e;o++)r.push(a[o]||s(o));t&&r.push(t),i((0,v._)((0,j._)({},n),{partition:r.join("|")}))}]),2),T=M[0],D=M[1],L=(0,m.useMemo)(function(){return g?A.map(function(e,t){return g.rangesForSingleDimension(t,1===t&&T[0]?[(0,tA.mC)(T[0],A[0].dimension)]:-1!==R&&t!==R?A[R].selectedRanges:void 0)}):A.map(function(){return[]})},[g,A,R,T]),dimensionKeysInSelection=function(e){if(!A[e]||-1!==R&&0===A[R].selectedRanges.length)return[];var t,n,i=A[e],r=i.dimension,s=i.selectedRanges,a=r.partitionKeys,o=getSort(E,e,A[e].dimension.type),getSelectionKeys=function(){return tf()(s.flatMap(function(e){var t=e.start,n=e.end;return a.slice(t.idx,n.idx+1)}))};if(th()(tO,N))return sortResults(getSelectionKeys(),o);var l=(0,tA.tP)(L[e],s),d=tf()((t=N.filter(function(e){return e!==tj.yo.MISSING}),l.flatMap(function(e){return t.some(function(t){return e.value.includes(t)})?a.slice(e.start.idx,e.end.idx+1):[]})));if(N.includes(tj.yo.MISSING)){var c=getSelectionKeys();n=a.filter(function(e,t){return c.includes(e)&&(d.includes(e)||!l.some(function(e){return e.start.idx<=t&&e.end.idx>=t&&!e.value.includes(tj.yo.MISSING)}))})}else n=d;return sortResults(n,o)},F=(0,tA.CA)(g,A),$=N.reduce(function(e,t){return e+F[t]},0);return(0,l.jsxs)(l.Fragment,{children:[-1!==R&&(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"bottom",children:(0,l.jsx)(tE.x,{partitionKeys:A[R].dimension.partitionKeys,health:{ranges:L[R]},selected:A[R].selectedKeys,setSelected:function(e){return _(A.map(function(t,n){return n===R?(0,v._)((0,j._)({},t),{selectedKeys:e}):t}))},dimensionType:A[R].dimension.type})}),(0,l.jsxs)(p.x,{padding:{vertical:16,horizontal:24},flex:{direction:"row",justifyContent:"space-between"},border:"bottom",children:[(0,l.jsxs)("div",{"data-testid":(0,tv.N)("partitions-selected"),children:[$.toLocaleString()," Partitions Selected"]}),(0,l.jsx)(AssetPartitionStatusCheckboxes,{counts:F,allowed:tO,value:N,onChange:k})]}),(0,l.jsxs)(p.x,{style:{flex:1,minHeight:0,outline:"none"},flex:{direction:"row"},tabIndex:-1,children:[A.map(function(e,t){var n=getSort(E,t,e.dimension.type);return(0,l.jsxs)(p.x,{style:{display:"flex",flex:1,paddingRight:1,minWidth:200},flex:{direction:"column"},border:"right",background:h.gJ(),"data-testid":(0,tv.N)("partitions-".concat(e.dimension.name)),children:[(0,l.jsxs)(p.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},background:h.v8(),border:"bottom",padding:{horizontal:24,vertical:8},children:[(0,l.jsx)("div",{children:"default"!==e.dimension.name&&(0,l.jsxs)(p.x,{flex:{gap:8,alignItems:"center"},children:[(0,l.jsx)(K.JO,{name:"partition"}),(0,l.jsx)(P.pm,{children:e.dimension.name})]})}),(0,l.jsx)(S.J,{content:(0,l.jsxs)(z.v2,{children:[(0,l.jsx)(z.sN,{text:(0,l.jsx)(tp.u,{content:"The order in which partitions were created",children:(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,l.jsx)("span",{children:"Creation sort"}),(0,l.jsx)(K.JO,{name:"info"})]})}),active:0===n,onClick:function(){C(function(e){var n=(0,O._)(e);return n[t]=0,n})},"data-testId":(0,tv.N)("sort-creation")}),(0,l.jsx)(z.sN,{text:(0,l.jsx)(tp.u,{content:"The order in which partitions were created, reversed",children:(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,l.jsx)("span",{children:"Reverse creation sort"}),(0,l.jsx)(K.JO,{name:"info"})]})}),active:1===n,onClick:function(){C(function(e){var n=(0,O._)(e);return n[t]=1,n})},"data-testId":(0,tv.N)("sort-reverse-creation")}),(0,l.jsx)(z.sN,{text:"Alphabetical sort",active:2===n,onClick:function(){C(function(e){var n=(0,O._)(e);return n[t]=2,n})},"data-testId":(0,tv.N)("sort-alphabetical")}),(0,l.jsx)(z.sN,{text:"Reverse alphabetical sort",active:3===n,onClick:function(){C(function(e){var n=(0,O._)(e);return n[t]=3,(0,O._)(n)})},"data-testId":(0,tv.N)("sort-reverse-alphabetical")})]}),position:"bottom-left",children:(0,l.jsx)(tw.Kz,{style:{marginRight:"-16px"},"data-testid":"sort-".concat(t),children:(0,l.jsx)(K.JO,{name:"sort_by_alpha",color:h.md()})})})]}),g?(0,l.jsx)(tg.k,{partitions:dimensionKeysInSelection(t),statusForPartition:function(n){if(1===t&&T[0])return[g.stateForKey([T[0],n])];var i=e.dimension.partitionKeys.indexOf(n);return(0,tA.h1)(L[t],i).filter(function(e){return N.includes(e)})},focusedDimensionKey:T[t],setFocusedDimensionKey:function(e){D(t,e)}}):(0,l.jsx)(p.x,{flex:{alignItems:"center",justifyContent:"center"},style:{flex:1},children:(0,l.jsx)(x.$,{purpose:"section"})})]},e.dimension.name)}),(0,l.jsx)(p.x,{style:{flex:3,minWidth:0,overflowY:"auto"},flex:{direction:"column"},children:c.partition&&T.length===A.length?(0,l.jsx)(AssetPartitionDetailLoader,{assetKey:o,partitionKey:c.partition}):(0,l.jsx)(AssetPartitionDetailEmpty,{})})]})]})},tP=new Intl.Collator(navigator.language,{sensitivity:"base"});function sortResults(e,t){switch(t){case 0:return e;case 1:return(0,O._)(e).reverse();case 2:return(0,O._)(e).sort(tP.compare);case 3:return(0,O._)(e).sort(function(e,t){return-tP.compare(e,t)})}}function getSort(e,t,n){return void 0===e[t]?n===ex.iVC.TIME_WINDOW?1:0:e[t]}var tC=n(35770),tS=n(68028),AssetPlots=function(e){var t=e.assetKey,n=e.assetHasDefinedPartitions,i=e.params,r=e.setParams,s=(0,tS.Ke)();(0,m.useEffect)(function(){return s("viewAssetPlots")},[s]);var a=(0,ep.fE)(t,i,{assetHasDefinedPartitions:n}),o=a.materializations,d=a.observations,c=a.loadedPartitionKeys,u=a.loading,h=a.xAxis,f=(0,ej.L)(h,o,d,c),g=(0,m.useMemo)(function(){return new Set([h])},[h]);return u?(0,l.jsxs)(p.x,{children:[(0,l.jsx)(p.x,{flex:{justifyContent:"space-between",alignItems:"center"},border:"bottom",padding:{vertical:16,left:24,right:12},style:{marginBottom:-1},children:(0,l.jsx)(P.pm,{children:"Asset plots"})}),(0,l.jsx)(p.x,{padding:{vertical:48},children:(0,l.jsx)(x.$,{purpose:"page"})})]}):(0,l.jsxs)(p.x,{children:[(0,l.jsxs)(p.x,{flex:{justifyContent:"space-between",alignItems:"center"},border:"bottom",padding:{vertical:16,left:24,right:12},style:{marginBottom:-1},children:[(0,l.jsx)(P.pm,{children:"Asset plots"}),n?(0,l.jsx)("div",{style:{margin:"-6px 0 "},children:(0,l.jsx)(C.h,{activeItems:g,buttons:[{id:"partition",label:"Partitions",icon:"partition"},{id:"time",label:"Events",icon:"materialization"}],onClick:function(e){return r("time"===e?(0,v._)((0,j._)({},i),{partition:void 0,time:""}):(0,v._)((0,j._)({},i),{partition:"",time:void 0}))}})}):null]}),(0,l.jsx)(tC.l,{xAxis:h,groups:f})]})},tz=n(7504),tI=n(87612),tN=n(98655),tK=n(83302),tk=n(30301),tR=n(63626);function AutomaterializeLeftPanel_templateObject(){var e=(0,o._)(["\n  position: sticky;\n  bottom: 0;\n  background: ",";\n  border-right: 1px solid ",";\n  box-shadow: inset 0 1px ",";\n  margin-top: -1px;\n  padding-bottom: 16px;\n  padding-top: 16px;\n  > * {\n    margin-top: 0;\n  }\n"]);return AutomaterializeLeftPanel_templateObject=function(){return e},e}function AutomaterializeLeftPanel_templateObject1(){var e=(0,o._)(["\n  background-color: ",";\n  border: none;\n  border-radius: 8px;\n  color: ",";\n  cursor: pointer;\n  margin: 2px 0;\n  text-align: left;\n  transition:\n    100ms background-color linear,\n    100ms color linear;\n  user-select: none;\n\n  &:hover {\n    background-color: ",";\n  }\n\n  &:focus,\n  &:active {\n    outline: none;\n  }\n\n  padding: 8px 12px;\n"]);return AutomaterializeLeftPanel_templateObject1=function(){return e},e}function AutomaterializeLeftPanel_templateObject2(){var e=(0,o._)(["\n  background-color: ",";\n  border-radius: 50%;\n  width: ","px;\n  height: ","px;\n  margin: ","px;\n"]);return AutomaterializeLeftPanel_templateObject2=function(){return e},e}var AutomaterializeLeftPanel=function(e){var t=e.definition,n=e.evaluations,i=e.paginationProps,r=e.onSelectEvaluation,s=e.selectedEvaluation;return(0,l.jsxs)(p.x,{flex:{direction:"column",grow:1},style:{overflowY:"auto"},children:[(0,l.jsx)(AutomaterializeLeftList,{definition:t,evaluations:n,onSelectEvaluation:r,selectedEvaluation:s}),n.length?(0,l.jsx)(tM,{children:(0,l.jsx)(tK.b$,(0,j._)({},i))}):null]})},AutomaterializeLeftList=function(e){var t=e.evaluations,n=e.onSelectEvaluation,i=e.selectedEvaluation,r=e.definition,s=m.useMemo(function(){var e;return null==r?void 0:null===(e=r.targetingInstigators.find(function(e){return"Sensor"===e.__typename&&e.sensorType===ex.dEY.AUTO_MATERIALIZE}))||void 0===e?void 0:e.name},[r]),a=r?(0,H.kQ)(r.repository.name,r.repository.location.name):null;return(0,l.jsxs)(p.x,{flex:{grow:1,direction:"column"},children:[(0,l.jsx)(p.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,l.jsx)(P.d1,{children:"Evaluations"})}),(0,l.jsxs)(p.x,{padding:{bottom:8,horizontal:12},style:{flex:1,minHeight:0,overflowY:"auto"},flex:{grow:1,direction:"column"},children:[(0,l.jsx)(p.x,{border:"bottom",padding:{top:8,bottom:12,left:12,right:8},children:(0,l.jsxs)(p.x,{flex:{alignItems:"center",gap:4},children:[(0,l.jsx)(K.JO,{name:"sensors",color:h.L$()}),(0,l.jsx)(P.pN,{children:a&&s?(0,l.jsx)(E.rU,{to:(0,e$.$U)(a,"/sensors/".concat(s)),style:{maxWidth:200,overflow:"hidden"},children:(0,l.jsx)(Q.g,{text:s})}):(0,l.jsx)(E.rU,{to:"/overview/automation",children:null!=s?s:"Automation"})})]})}),(0,l.jsxs)(p.x,{flex:{direction:"column",gap:8},children:[0===t.length?(0,l.jsx)(p.x,{padding:{left:12,top:12,right:8},children:(0,l.jsx)(P.YS,{color:h.$(),children:"No evaluations"})}):null,t.map(function(e){var t=(null==i?void 0:i.id)===e.id,s=e.numRequested>0;return(0,l.jsx)(tT,{onClick:function(){n(e)},$selected:t,children:(0,l.jsxs)(p.x,{flex:{direction:"column",gap:4},children:[(0,l.jsxs)(p.x,{flex:{direction:"row",gap:2,alignItems:"center"},children:[(0,l.jsx)(tD,{$color:e.numRequested?h.fA():h.A8()}),(0,l.jsx)("span",{style:e.numRequested?{color:h.Ap()}:void 0,children:(0,l.jsx)(tk.v,{timestamp:e.timestamp})})]}),(0,l.jsx)("div",{style:{paddingLeft:22},children:s?(null==r?void 0:r.partitionDefinition)?(0,l.jsxs)(P.YS,{children:[tR.V.format(e.numRequested)," Requested"]}):(0,l.jsx)(P.YS,{children:"requested"}):(0,l.jsx)(P.YS,{children:"not requested"})})]})},"skip-".concat(e.id))})]}),(0,l.jsx)(p.x,{border:"top",padding:{vertical:20,horizontal:12},margin:{top:12},children:(0,l.jsx)(P.YS,{children:"Evaluations are retained for 30 days"})})]})]})},tM=en.ZP.div.withConfig({componentId:"sc-592e683c-0"})(AutomaterializeLeftPanel_templateObject(),h.gJ(),h.wL(),h.wL()),tT=en.ZP.button.withConfig({componentId:"sc-592e683c-1"})(AutomaterializeLeftPanel_templateObject1(),function(e){return e.$selected?h.Dd():h.v8()},function(e){return e.$selected?h.Ne():h.Ep()},function(e){return e.$selected?h.i3():h.Z$()}),tD=en.ZP.div.withConfig({componentId:"sc-592e683c-2"})(AutomaterializeLeftPanel_templateObject2(),function(e){return e.$color},function(e){var t=e.$size;return void 0===t?10:t},function(e){var t=e.$size;return void 0===t?10:t},function(e){var t=e.$size;return(void 0===t?10:t)/2}),tL=n(30110),tF=n(86832),t$=n(91195),tV=n(56266),tU=n(87424);function AutomaterializeRunsTable_templateObject(){var e=(0,o._)(["\n  query AutomaterializeRunsQuery($filter: RunsFilter) {\n    runsOrError(filter: $filter) {\n      ... on Runs {\n        results {\n          id\n          ...AutomaterializeRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment AutomaterializeRunFragment on Run {\n    id\n    runId\n    ...RunTimeFragment\n  }\n\n  ","\n  ","\n"]);return AutomaterializeRunsTable_templateObject=function(){return e},e}var AutomaterializeRunsTable=function(e){var t=e.runIds,n=(0,d.a)(tq,{variables:{filter:{runIds:t}},skip:!t.length}),i=n.data,r=n.loading,s=n.error;return t.length?s?(0,l.jsx)(P.pN,{children:"An error occurred fetching runs. Check your network status"}):r||!i?null:"PythonError"===i.runsOrError.__typename?(0,l.jsx)(tV.T9,{error:null==i?void 0:i.runsOrError}):"InvalidPipelineRunsFilterError"===i.runsOrError.__typename?(0,l.jsx)(P.pN,{children:i.runsOrError.message}):(0,l.jsx)(p.x,{children:(0,l.jsxs)(Y.i,{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{style:{minWidth:150},children:"Run ID"}),(0,l.jsx)("th",{style:{minWidth:150},children:"Created date"}),(0,l.jsx)("th",{style:{minWidth:100},children:"Status"}),(0,l.jsx)("th",{style:{minWidth:150},children:"Duration"})]})}),(0,l.jsx)("tbody",{children:i.runsOrError.results.map(function(e){return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)(E.rU,{to:"/runs/".concat(e.id),children:(0,l.jsx)(P.fv,{children:(0,B.EI)(e)})})}),(0,l.jsx)("td",{children:(0,l.jsx)(B.Zr,{run:e})}),(0,l.jsx)("td",{children:(0,l.jsx)(tU.M9,{runId:e.runId,status:e.status})}),(0,l.jsx)("td",{children:(0,l.jsx)(B.Tw,{run:e})})]},e.id)})})]})}):(0,l.jsx)(P.pN,{color:h.Aw(),style:{paddingBottom:32},children:"None"})},tq=(0,c.Ps)(AutomaterializeRunsTable_templateObject(),t$.B,B.$X);function GetEvaluationsQuery_templateObject(){var e=(0,o._)(["\n  fragment AssetSubsetFragment on AssetSubset {\n    subsetValue {\n      isPartitioned\n      partitionKeys\n      partitionKeyRanges {\n        start\n        end\n      }\n    }\n  }\n"]);return GetEvaluationsQuery_templateObject=function(){return e},e}function GetEvaluationsQuery_templateObject1(){var e=(0,o._)(["\n  fragment SpecificPartitionAssetConditionEvaluationNodeFragment on SpecificPartitionAssetConditionEvaluationNode {\n    description\n    status\n    uniqueId\n    childUniqueIds\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n  }\n  ","\n"]);return GetEvaluationsQuery_templateObject1=function(){return e},e}function GetEvaluationsQuery_templateObject2(){var e=(0,o._)(["\n  fragment UnpartitionedAssetConditionEvaluationNodeFragment on UnpartitionedAssetConditionEvaluationNode {\n    description\n    startTimestamp\n    endTimestamp\n    status\n    uniqueId\n    childUniqueIds\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n  }\n  ","\n"]);return GetEvaluationsQuery_templateObject2=function(){return e},e}function _templateObject3(){var e=(0,o._)(["\n  fragment PartitionedAssetConditionEvaluationNodeFragment on PartitionedAssetConditionEvaluationNode {\n    description\n    startTimestamp\n    endTimestamp\n    numTrue\n    numFalse\n    numSkipped\n    trueSubset {\n      ...AssetSubsetFragment\n    }\n    candidateSubset {\n      ...AssetSubsetFragment\n    }\n    uniqueId\n    childUniqueIds\n  }\n  ","\n"]);return _templateObject3=function(){return e},e}function _templateObject4(){var e=(0,o._)(["\n  fragment AssetConditionEvaluationRecordFragment on AssetConditionEvaluationRecord {\n    id\n    evaluationId\n    numRequested\n    assetKey {\n      path\n    }\n    runIds\n    timestamp\n    startTimestamp\n    endTimestamp\n    evaluation {\n      rootUniqueId\n      evaluationNodes {\n        ...UnpartitionedAssetConditionEvaluationNodeFragment\n        ...PartitionedAssetConditionEvaluationNodeFragment\n        ...SpecificPartitionAssetConditionEvaluationNodeFragment\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return _templateObject4=function(){return e},e}function _templateObject5(){var e=(0,o._)(["\n  query GetEvaluationsQuery($assetKey: AssetKeyInput!, $limit: Int!, $cursor: String) {\n    assetNodeOrError(assetKey: $assetKey) {\n      __typename\n      ... on AssetNode {\n        id\n        autoMaterializePolicy {\n          rules {\n            description\n            decisionType\n            className\n          }\n        }\n        currentAutoMaterializeEvaluationId\n      }\n    }\n\n    assetConditionEvaluationRecordsOrError(assetKey: $assetKey, limit: $limit, cursor: $cursor) {\n      ... on AssetConditionEvaluationRecords {\n        records {\n          id\n          ...AssetConditionEvaluationRecordFragment\n        }\n      }\n      ... on AutoMaterializeAssetEvaluationNeedsMigrationError {\n        message\n      }\n    }\n  }\n  ","\n"]);return _templateObject5=function(){return e},e}function _templateObject6(){var e=(0,o._)(["\n  query GetEvaluationsSpecificPartitionQuery(\n    $assetKey: AssetKeyInput!\n    $evaluationId: Int!\n    $partition: String!\n  ) {\n    assetConditionEvaluationForPartition(\n      assetKey: $assetKey\n      evaluationId: $evaluationId\n      partition: $partition\n    ) {\n      rootUniqueId\n      evaluationNodes {\n        ...UnpartitionedAssetConditionEvaluationNodeFragment\n        ...PartitionedAssetConditionEvaluationNodeFragment\n        ...SpecificPartitionAssetConditionEvaluationNodeFragment\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return _templateObject6=function(){return e},e}var tW=(0,c.Ps)(GetEvaluationsQuery_templateObject()),tJ=(0,c.Ps)(GetEvaluationsQuery_templateObject1(),ei.it),tB=(0,c.Ps)(GetEvaluationsQuery_templateObject2(),ei.it),tZ=(0,c.Ps)(_templateObject3(),tW),tH=(0,c.Ps)(_templateObject4(),tB,tZ,tJ),tG=(0,c.Ps)(_templateObject5(),tH),tQ=(0,c.Ps)(_templateObject6(),tB,tZ,tJ),tY=n(88510),PolicyEvaluationStatusTag=function(e){var t=e.status;switch(t){case ex.nB.FALSE:return(0,l.jsx)(w.V,{intent:"warning",icon:"cancel",children:"False"});case ex.nB.TRUE:return(0,l.jsx)(w.V,{intent:"success",icon:"check_circle",children:"True"});case ex.nB.SKIPPED:return(0,l.jsx)(w.V,{intent:"none",children:"Skipped"});default:return(0,eD.UT)(t)}},tX=n(55658);function PartitionSegmentWithPopover_templateObject(){var e=(0,o._)(["\n  display: flex;\n  "," {\n    flex: 1;\n  }\n"]);return PartitionSegmentWithPopover_templateObject=function(){return e},e}function PartitionSegmentWithPopover_templateObject1(){var e=(0,o._)(["\n  background-color: ",";\n  height: 8px;\n  width: 8px;\n  border-radius: 50%;\n  transition: background-color 100ms linear;\n\n  :hover {\n    background-color: ",";\n  }\n"]);return PartitionSegmentWithPopover_templateObject1=function(){return e},e}var statusToColors=function(e){switch(e){case ex.nB.TRUE:return{color:h.fA(),hoverColor:h.Lv()};case ex.nB.FALSE:return{color:h.qr(),hoverColor:h.Zi()};case ex.nB.SKIPPED:return{color:h.md(),hoverColor:h.$l()};default:return(0,eD.UT)(e)}},PartitionSegmentWithPopover=function(e){var t,n=e.description,i=e.selectPartition,r=e.status,s=e.subset;if(!s)return null;var a=(null===(t=s.subsetValue.partitionKeys)||void 0===t?void 0:t.length)||0;return(0,l.jsx)(S.J,{interactionKind:"hover",placement:"bottom",hoverOpenDelay:50,hoverCloseDelay:50,content:(0,l.jsx)(PartitionSubsetList,{description:n,status:r,subset:s,selectPartition:i}),children:(0,l.jsxs)(w.V,{intent:a>0?"success":"none",icon:a>0?"check_circle":void 0,children:[tR.V.format(a)," ",r.charAt(0)+r.toLowerCase().slice(1)]})})},PartitionSubsetList=function(e){var t=e.description,n=e.status,i=e.subset,r=e.selectPartition,s=(0,m.useRef)(null),a=(0,y._)((0,m.useState)(""),2),o=a[0],d=a[1],c=(0,m.useMemo)(function(){return statusToColors(null!=n?n:ex.nB.TRUE)},[n]),u=c.color,x=c.hoverColor,h=(0,m.useMemo)(function(){return i.subsetValue.partitionKeys||[]},[i]),f=(0,m.useMemo)(function(){var e=o.toLocaleLowerCase();return h.filter(function(t){return t.toLocaleLowerCase().includes(e)})},[h,o]),g=f.length,j=(0,tY.MG)({count:f.length,getScrollElement:function(){return s.current},estimateSize:function(){return 32},overscan:10}),v=j.getTotalSize(),b=j.getVirtualItems();return(0,l.jsxs)("div",{style:{width:"292px"},children:[(0,l.jsxs)(p.x,{padding:{vertical:8,left:12,right:8},border:"bottom",flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},style:{display:"grid",gridTemplateColumns:"minmax(0, 1fr) auto",gap:8},children:[(0,l.jsx)("strong",{children:(0,l.jsx)(Q.g,{text:t})}),n?(0,l.jsx)(PolicyEvaluationStatusTag,{status:n}):null]}),h.length>4?(0,l.jsx)(t0,{padding:{vertical:4,horizontal:8},children:(0,l.jsx)(e0.oi,{icon:"search",placeholder:"Filter partitions…",value:o,onChange:function(e){return d(e.target.value)}})}):null,(0,l.jsx)("div",{style:{height:g>4?"150px":32*g+16,overflow:"hidden"},children:(0,l.jsx)(tX.W2,{ref:s,children:(0,l.jsx)(z.v2,{children:(0,l.jsx)(tX.Nh,{$totalHeight:v,children:b.map(function(e){var t=e.index,n=e.key,i=e.size,s=e.start,a=f[t];return(0,l.jsx)(tX.X2,{$height:i,$start:s,children:(0,l.jsx)(z.sN,{onClick:function(){r(a)},text:(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,l.jsx)(t1,{$color:u,$hoverColor:x}),(0,l.jsx)("div",{children:(0,l.jsx)(Q.g,{text:a})})]})})},n)})})})})})]})},t0=(0,en.ZP)(p.x).withConfig({componentId:"sc-e7272f78-0"})(PartitionSegmentWithPopover_templateObject(),e0.ai),t1=en.ZP.div.withConfig({componentId:"sc-e7272f78-1"})(PartitionSegmentWithPopover_templateObject1(),function(e){return e.$color},function(e){return e.$hoverColor});function PolicyEvaluationCondition_templateObject(){var e=(0,o._)(["\n  background-color: ",";\n  height: 100%;\n  margin: 0 4px 0 7px; /* 7px to align with center of icon in row above */\n  width: 2px;\n"]);return PolicyEvaluationCondition_templateObject=function(){return e},e}function PolicyEvaluationCondition_templateObject1(){var e=(0,o._)(["\n  font-weight: ",";\n  color: ",";\n"]);return PolicyEvaluationCondition_templateObject1=function(){return e},e}var PolicyEvaluationCondition=function(e){var t=e.depth,n=e.icon,i=e.label,r=e.type,s=e.skipped,a=e.isCollapsed,o=e.hasChildren,d=m.useMemo(function(){return Array(t).fill(null).map(function(e,t){return(0,l.jsx)(t2,{},t)})},[t]);return(0,l.jsxs)(p.x,{padding:{vertical:2,horizontal:8},flex:{direction:"row",alignItems:"center",gap:8},style:{height:"48px"},children:[d,o?(0,l.jsx)(K.JO,{name:"arrow_drop_down",style:{transform:a?"rotate(0deg)":"rotate(-90deg)"}}):null,(0,l.jsx)(K.JO,{name:n,color:h.Bj()}),(0,l.jsx)(t4,{$type:r,$skipped:void 0!==s&&s,children:i})]})},t2=en.ZP.div.withConfig({componentId:"sc-4dae7724-0"})(PolicyEvaluationCondition_templateObject(),h.wL()),t4=en.ZP.div.withConfig({componentId:"sc-4dae7724-1"})(PolicyEvaluationCondition_templateObject1(),function(e){return"group"===e.$type?"600":"400"},function(e){return e.$skipped?h.Tg():h.Ep()}),flattenEvaluations=function(e,t){var n=[],i=0,r=Object.fromEntries(e.evaluation.evaluationNodes.map(function(e){return[e.uniqueId,e]})),append=function(e,s,a){var o=i+1,l=e.childUniqueIds&&e.childUniqueIds.length>0?"group":"leaf";if(n.push({evaluation:e,id:o,parentId:null===s?i:s,depth:a,type:l}),i=o,e.childUniqueIds&&!t.has(e.uniqueId)){var d=i;e.childUniqueIds.forEach(function(e){append(r[e],d,a+1)})}};return append(r[e.evaluation.rootUniqueId],null,0),n},t8=n(88846);function PolicyEvaluationTable_templateObject(){var e=(0,o._)(["\n  & tr td {\n    vertical-align: middle;\n  }\n\n  & tr td:first-child {\n    padding: 2px 16px;\n  }\n\n  & tr th:last-child,\n  & tr td:last-child {\n    box-shadow:\n      inset 1px 1px 0 ",",\n      inset -1px 0 0 "," !important;\n  }\n\n  & tr:last-child td:last-child {\n    box-shadow:\n      inset -1px -1px 0 ",",\n      inset 1px 1px 0 "," !important;\n  }\n"]);return PolicyEvaluationTable_templateObject=function(){return e},e}function PolicyEvaluationTable_templateObject1(){var e=(0,o._)(["\n        && td {\n          box-shadow:\n            inset 0 -1px 0 ",",\n            inset 1px 1px 0 "," !important;\n        }\n\n        && td:last-child {\n          box-shadow:\n            inset -1px -1px 0 ",",\n            inset 1px 1px 0 "," !important;\n        }\n      "]);return PolicyEvaluationTable_templateObject1=function(){return e},e}function PolicyEvaluationTable_templateObject2(){var e=(0,o._)(["\n  cursor: pointer;\n  background-color: ",";\n\n  ","\n"]);return PolicyEvaluationTable_templateObject2=function(){return e},e}var PolicyEvaluationTable=function(e){var t,n=e.evaluationRecord,i=e.definition,r=e.selectPartition,s=(0,y._)(m.useState(new Set),2),a=s[0],o=s[1],d=m.useMemo(function(){return flattenEvaluations(n,a)},[n,a]),c=m.useCallback(function(e){o(function(t){var n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},[]);return(null===(t=d[0])||void 0===t?void 0:t.evaluation.__typename)==="PartitionedAssetConditionEvaluationNode"?(0,l.jsx)(PartitionedPolicyEvaluationTable,{flattenedRecords:d,definition:i,selectPartition:r,toggleCollapsed:c,collapsedRecords:a}):(0,l.jsx)(UnpartitionedPolicyEvaluationTable,{flattenedRecords:d,toggleCollapsed:c,collapsedRecords:a})},UnpartitionedPolicyEvaluationTable=function(e){var t,n=e.flattenedRecords,i=e.collapsedRecords,r=e.toggleCollapsed,s=(0,y._)(m.useState(null),2),a=s[0],o=s[1],d=(null===(t=n[0])||void 0===t?void 0:t.evaluation.__typename)==="SpecificPartitionAssetConditionEvaluationNode";return(0,l.jsxs)(t6,{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Condition"}),(0,l.jsx)("th",{children:"Result"}),d?null:(0,l.jsx)("th",{children:"Duration"}),(0,l.jsx)("th",{children:"Details"})]})}),(0,l.jsx)("tbody",{children:n.map(function(e){var t,n,s,d=e.evaluation,c=e.id,u=e.parentId,p=e.depth,x=e.type,h=d.description,m=d.status,f=d.uniqueId;return"endTimestamp"in d&&(n=d.endTimestamp,s=d.startTimestamp),(0,l.jsxs)(t5,{$highlight:a===c?"hovered":u===a?"highlighted":"none",onMouseEnter:function(){return o(c)},onMouseLeave:function(){return o(null)},onClick:function(){r(f)},children:[(0,l.jsx)("td",{children:(0,l.jsx)(PolicyEvaluationCondition,{icon:"group"===x?"resource":"wysiwyg",label:h,skipped:m===ex.nB.SKIPPED,depth:p,type:x,isCollapsed:!i.has(f),hasChildren:d.childUniqueIds.length>0})}),(0,l.jsx)("td",{children:(0,l.jsx)(PolicyEvaluationStatusTag,{status:m})}),s&&n?(0,l.jsx)("td",{children:(0,l.jsx)(t8.Q,{startUnix:s,endUnix:n,showMsec:!0})}):null,(0,l.jsx)("td",{children:(null===(t=d.metadataEntries)||void 0===t?void 0:t.length)?(0,l.jsx)(ViewDetailsButton,{evaluation:d}):null})]},c)})})]})},ViewDetailsButton=function(e){var t=e.evaluation,n=(0,y._)(m.useState(!1),2),i=n[0],r=n[1];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(X.Vq,{title:"Evaluation metadata",isOpen:i,onClose:function(){r(!1)},children:(0,l.jsx)(R.J,{event:t,showDescriptions:!0})}),(0,l.jsx)(N.zx,{onClick:function(){r(!0)},children:"View details"})]})},PartitionedPolicyEvaluationTable=function(e){var t=e.flattenedRecords,n=e.selectPartition,i=e.collapsedRecords,r=e.toggleCollapsed,s=(0,y._)(m.useState(null),2),a=s[0],o=s[1];return(0,l.jsxs)(t6,{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Condition"}),(0,l.jsx)("th",{children:"Partitions evaluated"}),(0,l.jsx)("th",{children:"Result"}),(0,l.jsx)("th",{children:"Duration"})]})}),(0,l.jsx)("tbody",{children:t.map(function(e){var t,s=e.evaluation,d=e.id,c=e.parentId,u=e.depth,x=e.type,h=s.description,m=s.candidateSubset,f=s.endTimestamp,g=s.startTimestamp,j=s.trueSubset,v=s.uniqueId,y=null==m?void 0:null===(t=m.subsetValue.partitionKeys)||void 0===t?void 0:t.length;return(0,l.jsxs)(t5,{$highlight:a===d?"hovered":c===a?"highlighted":"none",onMouseEnter:function(){return o(d)},onMouseLeave:function(){return o(null)},onClick:function(){r(v)},children:[(0,l.jsx)("td",{children:(0,l.jsx)(PolicyEvaluationCondition,{icon:"group"===x?"resource":"wysiwyg",label:h,depth:u,type:x,isCollapsed:!i.has(s.uniqueId),hasChildren:s.childUniqueIds.length>0})}),(0,l.jsx)("td",{children:y||(0,l.jsxs)(p.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:["All",(0,l.jsx)(tp.u,{content:"Evaluated against all partitions that existed at the time of evaluation",children:(0,l.jsx)(K.JO,{name:"info"})})]})}),(0,l.jsx)("td",{style:{width:0},children:(0,l.jsx)(p.x,{flex:{direction:"row",alignItems:"center",gap:2},style:{width:200},children:(0,l.jsx)(PartitionSegmentWithPopover,{description:h,status:ex.nB.TRUE,subset:j,selectPartition:n})})}),(0,l.jsx)("td",{children:(0,l.jsx)(t8.Q,{startUnix:g,endUnix:f,showMsec:!0})})]},d)})})]})},t6=(0,en.ZP)(Y.i).withConfig({componentId:"sc-657519b6-0"})(PolicyEvaluationTable_templateObject(),h.wL(),h.wL(),h.wL(),h.wL()),t5=en.ZP.tr.withConfig({componentId:"sc-657519b6-1"})(PolicyEvaluationTable_templateObject2(),function(e){switch(e.$highlight){case"hovered":return h._c();case"highlighted":return h.Z$();case"none":return h.v8()}},function(e){return"hovered"===e.$highlight?(0,en.iv)(PolicyEvaluationTable_templateObject1(),h.wL(),h.wL(),h.wL(),h.wL()):""}),t3=n(16148);function AutomaterializeMiddlePanel_templateObject(){var e=(0,o._)(["\n  query FullPartitionsQuery($assetKey: AssetKeyInput!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      ... on AssetNode {\n        id\n        partitionKeysByDimension {\n          name\n          type\n          partitionKeys\n        }\n      }\n    }\n  }\n"]);return AutomaterializeMiddlePanel_templateObject=function(){return e},e}function AutomaterializeMiddlePanel_templateObject1(){var e=(0,o._)(["\n  position: relative;\n\n  "," {\n    width: 370px;\n    padding-left: 32px;\n    height: 36px;\n  }\n"]);return AutomaterializeMiddlePanel_templateObject1=function(){return e},e}function AutomaterializeMiddlePanel_templateObject2(){var e=(0,o._)(["\n  position: absolute;\n  left: 12px;\n  top: 0px;\n  bottom: 0px;\n  pointer-events: none;\n  display: flex;\n  align-items: center;\n"]);return AutomaterializeMiddlePanel_templateObject2=function(){return e},e}var t7=[],t9="selectedPartition",AutomaterializeMiddlePanel=function(e){var t,n,i=e.assetKey,r=e.selectedEvaluationId,s=e.selectedEvaluation,a=e.definition,o=(0,y._)((0,t_.q)({queryKey:t9}),2),c=o[0],u=o[1],x=(0,d.a)(tG,{variables:{assetKey:i,cursor:r?"".concat(r+1):void 0,limit:2},skip:!!s||!!c}),h=x.data,f=x.loading,g=x.error,j=(0,d.a)(tQ,{variables:{assetKey:i,evaluationId:r,partition:c},skip:!r||!c}),v=j.data,b=j.previousData,_=m.useMemo(function(){var e;return null==a?void 0:null===(e=a.targetingInstigators.find(function(e){return"Sensor"===e.__typename&&e.sensorType===ex.dEY.AUTO_MATERIALIZE}))||void 0===e?void 0:e.name},[a]);if(!s&&f&&!h)return(0,l.jsx)(p.x,{flex:{direction:"column",grow:1},children:(0,l.jsx)(p.x,{style:{flex:"0 0 48px"},border:"bottom",padding:{horizontal:16},flex:{alignItems:"center",justifyContent:"space-between"},children:(0,l.jsx)(P.pm,{children:"Result"})})});if(g)return(0,l.jsx)(p.x,{flex:{direction:"column",grow:1},children:(0,l.jsx)(p.x,{flex:{direction:"row",justifyContent:"center"},padding:24,children:(0,l.jsx)(tV.Vx,{children:JSON.stringify(g)})})});if((null==h?void 0:null===(t=h.assetConditionEvaluationRecordsOrError)||void 0===t?void 0:t.__typename)==="AutoMaterializeAssetEvaluationNeedsMigrationError")return(0,l.jsx)(p.x,{flex:{direction:"column",grow:1},children:(0,l.jsx)(p.x,{flex:{direction:"row",justifyContent:"center"},padding:{vertical:24},children:(0,l.jsx)(A.t,{icon:"error",title:"Error",description:h.assetConditionEvaluationRecordsOrError.message})})});var w=(null==h?void 0:null===(n=h.assetConditionEvaluationRecordsOrError)||void 0===n?void 0:n.records)||[],E=null!=s?s:w.find(function(e){return e.evaluationId===r});if(!r&&!w.length){var O=a?(0,H.kQ)(a.repository.name,a.repository.location.name):null;return(0,l.jsx)(p.x,{flex:{direction:"column",grow:1},children:(0,l.jsx)(p.x,{flex:{direction:"row",justifyContent:"center"},padding:{vertical:24},children:(0,l.jsx)(A.t,{icon:"sensors",title:"No evaluations",description:(0,l.jsx)(P.pN,{children:(0,l.jsxs)(p.x,{flex:{direction:"column",gap:8},children:[(0,l.jsx)(P.pN,{children:"This asset’s automation policy has not been evaluated yet. Make sure your automation sensor is running."}),(0,l.jsx)("div",{children:(0,l.jsx)(t3.A,{to:O&&_?(0,e$.$U)(O,"/sensors/".concat(_)):"/overview/automation",children:"Manage sensor"})}),(0,l.jsx)("a",{href:"https://docs.dagster.io/concepts/assets/asset-auto-execution",children:"Learn more about automation policies"})]})})})})})}return(0,l.jsx)(AutomaterializeMiddlePanelWithData,{selectedEvaluation:E,specificPartitionData:v||b,definition:a,selectPartition:u,selectedPartition:c})},AutomaterializeMiddlePanelWithData=function(e){var t=e.selectedEvaluation,n=e.definition,i=e.selectPartition,r=e.specificPartitionData,s=e.selectedPartition,a=null==t?void 0:t.evaluation,o=m.useMemo(function(){return null==a?void 0:a.evaluationNodes.find(function(e){return e.uniqueId===a.rootUniqueId})},[a]),c=(null==o?void 0:o.__typename)==="PartitionedAssetConditionEvaluationNode"?o:null,u=m.useMemo(function(){return(null==t?void 0:t.numRequested)?(null==n?void 0:n.partitionDefinition)?(0,l.jsxs)(p.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,l.jsx)(S.J,{interactionKind:"hover",placement:"bottom",hoverOpenDelay:50,hoverCloseDelay:50,content:(0,l.jsx)(PartitionSubsetList,{description:"Requested assets",subset:c.trueSubset,selectPartition:i}),children:(0,l.jsx)(w.V,{intent:"success",children:(0,l.jsxs)(p.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,l.jsx)(tD,{$color:h.fA(),$size:8}),t.numRequested," Requested"]})})}),1===t.numRequested?(0,l.jsx)(w.V,{icon:"partition",children:c.trueSubset.subsetValue.partitionKeys[0]}):null]}):(0,l.jsx)(w.V,{intent:"success",children:(0,l.jsxs)(p.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,l.jsx)(tD,{$color:h.fA()}),"Requested"]})}):(0,l.jsx)(w.V,{children:(0,l.jsxs)(p.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,l.jsx)(tD,{$color:h.md()}),"Not Requested"]})})},[null==n?void 0:n.partitionDefinition,c,i,null==t?void 0:t.numRequested]),x=(0,d.a)(ne,{variables:n?{assetKey:{path:n.assetKey.path}}:void 0,skip:!(null==n?void 0:n.assetKey)}).data,f=t7;(null==x?void 0:x.assetNodeOrError.__typename)==="AssetNode"&&(f=x.assetNodeOrError.partitionKeysByDimension);var g=m.useMemo(function(){if(1===f.length)return f[0].partitionKeys;if(2===f.length){var e=f[0].partitionKeys,t=f[1].partitionKeys;return e.flatMap(function(e){return t.map(function(t){return"".concat(e,"|").concat(t)})})}if(f.length>2)throw Error("Only 2 dimensions are supported");return[]},[f]);return(0,l.jsxs)(p.x,{flex:{direction:"column",grow:1},children:[(0,l.jsx)(p.x,{style:{flex:"0 0 48px"},padding:{horizontal:16},border:"bottom",flex:{alignItems:"center",justifyContent:"space-between"},children:(0,l.jsx)(P.pm,{children:"Result"})}),t?(0,l.jsxs)(p.x,{padding:{horizontal:24,vertical:12},children:[(0,l.jsx)(p.x,{border:"bottom",padding:{vertical:12},margin:{bottom:12},children:(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:24},children:[(0,l.jsxs)(p.x,{flex:{direction:"column",gap:5},children:[(0,l.jsx)(P.Tj,{children:"Evaluation result"}),(0,l.jsx)("div",{children:u})]}),(null==t?void 0:t.timestamp)?(0,l.jsxs)(p.x,{flex:{direction:"column",gap:5},children:[(0,l.jsx)(P.Tj,{children:"Timestamp"}),(0,l.jsx)(V.E,{timestamp:{unix:null==t?void 0:t.timestamp}})]}):null,(0,l.jsxs)(p.x,{flex:{direction:"column",gap:5},children:[(0,l.jsx)(P.Tj,{children:"Duration"}),(0,l.jsx)("div",{children:(null==t?void 0:t.startTimestamp)&&(null==t?void 0:t.endTimestamp)?(0,eD.XA)((t.endTimestamp-t.startTimestamp)*1e3):"–"})]})]})}),(0,l.jsx)(p.x,{border:"bottom",padding:{vertical:12},margin:{vertical:12},children:(0,l.jsxs)(P.Tj,{children:["Runs launched (",t.runIds.length,")"]})}),(0,l.jsx)(AutomaterializeRunsTable,{runIds:t.runIds}),(0,l.jsx)(p.x,{border:"bottom",padding:{vertical:12},children:(0,l.jsx)(P.Tj,{children:"Policy evaluation"})}),(null==n?void 0:n.partitionDefinition)?(0,l.jsx)(p.x,{padding:{vertical:12},flex:{justifyContent:"flex-end"},children:(0,l.jsxs)(nt,{children:[(0,l.jsx)(tL.fJ,{closeOnSelect:!0,placeholder:"Select a partition to view its result",allTags:g,selectedTags:s?[s]:[],setSelectedTags:function(e){i(e[e.length-1]||null)},renderDropdownItem:function(e,t){return(0,l.jsx)(z.sN,{text:e,onClick:t.toggle})},renderDropdown:function(e){return(0,l.jsx)(p.x,{padding:{top:8,horizontal:4},style:{width:"370px"},children:e})},renderTag:function(e,t){return(0,l.jsx)(tF.m,{textColor:h.$(),fillColor:h.wc(),icon:(0,l.jsx)(K.JO,{name:"partition",color:h.md()}),label:(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:4,justifyContent:"space-between",alignItems:"center",maxWidth:"120px"},"data-tooltip":e,"data-tooltip-style":tL.NB,children:[(0,l.jsx)(Q.g,{text:e}),(0,l.jsx)(p.x,{style:{cursor:"pointer"},onClick:t.remove,children:(0,l.jsx)(K.JO,{name:"close"})})]})},e)},usePortal:!1}),(0,l.jsx)(nn,{children:(0,l.jsx)(K.JO,{name:"search"})})]})}):null,(0,l.jsx)(PolicyEvaluationTable,{evaluationRecord:s&&(null==r?void 0:r.assetConditionEvaluationForPartition)?{evaluation:r.assetConditionEvaluationForPartition}:t,definition:n,selectPartition:i})]}):null]})},ne=(0,c.Ps)(AutomaterializeMiddlePanel_templateObject()),nt=en.ZP.div.withConfig({componentId:"sc-63db9f98-0"})(AutomaterializeMiddlePanel_templateObject1(),tL.NZ),nn=en.ZP.div.withConfig({componentId:"sc-63db9f98-1"})(AutomaterializeMiddlePanel_templateObject2()),ni=n(65767),nr=n(55237);function AssetAutomaterializePolicyPage_templateObject(){var e=(0,o._)(["\n  a span {\n    white-space: normal;\n  }\n"]);return AssetAutomaterializePolicyPage_templateObject=function(){return e},e}var AssetAutomaterializePolicyPage=function(e){var t,n,i=e.assetKey,r=e.definition,s=(0,ni.l)({nextCursorForResult:function(e){var t,n;if((null===(t=e.assetConditionEvaluationRecordsOrError)||void 0===t?void 0:t.__typename)==="AssetConditionEvaluationRecords")return null===(n=e.assetConditionEvaluationRecordsOrError.records[29])||void 0===n?void 0:n.evaluationId.toString()},getResultArray:function(e){var t;return(null==e?void 0:null===(t=e.assetConditionEvaluationRecordsOrError)||void 0===t?void 0:t.__typename)==="AssetConditionEvaluationRecords"?e.assetConditionEvaluationRecordsOrError.records:[]},variables:{assetKey:i},query:tG,pageSize:30}),a=s.queryResult,o=s.paginationProps;(0,nr.C4)(a,nr.dT);var d=(0,m.useMemo)(function(){var e,t,n,i,r;return(null===(t=a.data)||void 0===t?void 0:null===(e=t.assetConditionEvaluationRecordsOrError)||void 0===e?void 0:e.__typename)==="AssetConditionEvaluationRecords"&&(null===(i=a.data)||void 0===i?void 0:null===(n=i.assetNodeOrError)||void 0===n?void 0:n.__typename)==="AssetNode"?null===(r=a.data)||void 0===r?void 0:r.assetConditionEvaluationRecordsOrError.records:[]},[null===(t=a.data)||void 0===t?void 0:t.assetConditionEvaluationRecordsOrError,null===(n=a.data)||void 0===n?void 0:n.assetNodeOrError]),c=!o.hasPrevCursor,u=(0,y._)((0,t_.q)({queryKey:"evaluation",decode:function(e){var t=parseInt(e.evaluation);return isNaN(t)?void 0:t},encode:function(e){return(0,tI._)({evaluation:e},t9,void 0)}}),2),f=u[0],g=u[1],j=(0,m.useMemo)(function(){return void 0===f&&c?d[0]:d.find(function(e){return e.evaluationId===f})},[f,c,d]);return!a.data&&a.loading?(0,l.jsx)(p.x,{style:{height:390},flex:{direction:"row",justifyContent:"center",alignItems:"center"},children:(0,l.jsx)(x.$,{purpose:"page"})}):(0,l.jsxs)(ns,{style:{flex:1,minHeight:0,color:h.$(),overflow:"hidden"},flex:{direction:"column"},children:[(0,l.jsx)(tN.$,{}),(0,l.jsx)(p.x,{flex:{direction:"row"},style:{minHeight:0,flex:1},children:(0,l.jsxs)(p.x,{flex:{direction:"row"},style:{flex:1,minHeight:0},children:[(0,l.jsx)(p.x,{border:"right",flex:{grow:0,direction:"column"},style:{flex:"0 0 296px"},children:(0,l.jsx)(AutomaterializeLeftPanel,{definition:r,evaluations:d,paginationProps:o,onSelectEvaluation:function(e){g(e.evaluationId)},selectedEvaluation:j})}),(0,l.jsx)(p.x,{flex:{grow:1},style:{minHeight:0,overflowY:"auto"},children:(0,l.jsx)(AutomaterializeMiddlePanel,{assetKey:i,selectedEvaluationId:(null==j?void 0:j.evaluationId)||f,selectedEvaluation:j,definition:r},(null==j?void 0:j.evaluationId)||f)})]})})]})},ns=(0,en.ZP)(p.x).withConfig({componentId:"sc-7e2ecf8e-0"})(AssetAutomaterializePolicyPage_templateObject()),AutoMaterializeExperimentalBanner_AutoMaterializeExperimentalBanner=function(){return(0,l.jsx)(_.b,{intent:"info",title:"Auto-materialize policies are experimental",icon:(0,l.jsx)(K.JO,{name:"info",color:h.L$()}),description:(0,l.jsxs)("span",{children:["You can learn more about this new feature and provide feedback"," ",(0,l.jsx)("a",{target:"_blank",href:"https://docs.dagster.io/concepts/assets/asset-auto-execution#auto-materializing-assets-",rel:"noreferrer",children:"here"}),"."]})})},na=m.memo(function(e){var t=e.numRequested,n=e.numSkipped,i=e.numDiscarded,r=e.isPartitionedAsset,s=e.selected,a=[t||r?(0,l.jsx)(P.YS,{color:s?h.Ne():t?h.Ap():h.$(),children:r?"".concat((0,tR.J)(t)," launched"):"Launched"},"requested"):null,n||r?(0,l.jsx)(P.YS,{color:s?h.Ne():n?h.n8():h.$(),children:r?"".concat((0,tR.J)(n)," skipped"):"Skipped"},"skipped"):null,i||r?(0,l.jsx)(P.YS,{color:s?h.Ne():i?h.Yn():h.$(),children:r?"".concat((0,tR.J)(i)," discarded"):"Discarded"},"discarded"):null].filter(function(e){return!!e});return(0,l.jsx)(p.x,{flex:{direction:"row",gap:2,alignItems:"center"},style:{whiteSpace:"nowrap"},children:a.map(function(e,t){return[e,(0,l.jsx)(P.YS,{color:s?h.Ne():h.Aw(),children:"/"},"spacer-".concat(t))]}).flat().slice(0,-1)})});function AutoMaterializePolicyPageOld_AutomaterializeLeftPanel_templateObject(){var e=(0,o._)(["\n  position: sticky;\n  bottom: 0;\n  background: ",";\n  border-right: 1px solid ",";\n  box-shadow: inset 0 1px ",";\n  margin-top: -1px;\n  padding-bottom: 16px;\n  padding-top: 16px;\n  > * {\n    margin-top: 0;\n  }\n"]);return AutoMaterializePolicyPageOld_AutomaterializeLeftPanel_templateObject=function(){return e},e}function AutoMaterializePolicyPageOld_AutomaterializeLeftPanel_templateObject1(){var e=(0,o._)(["\n  background-color: ",";\n  border: none;\n  border-radius: 8px;\n  color: ",";\n  cursor: pointer;\n  margin: 2px 0;\n  text-align: left;\n  transition:\n    100ms background-color linear,\n    100ms color linear;\n  user-select: none;\n\n  &:hover {\n    background-color: ",";\n  }\n\n  &:focus,\n  &:active {\n    outline: none;\n  }\n\n  padding: 8px 12px;\n"]);return AutoMaterializePolicyPageOld_AutomaterializeLeftPanel_templateObject1=function(){return e},e}var AutomaterializeLeftPanel_AutomaterializeLeftPanel=function(e){var t=e.assetHasDefinedPartitions,n=e.evaluations,i=e.paginationProps,r=e.onSelectEvaluation,s=e.selectedEvaluation;return(0,l.jsxs)(p.x,{flex:{direction:"column",grow:1},style:{overflowY:"auto"},children:[(0,l.jsx)(AutomaterializeLeftPanel_AutomaterializeLeftList,{assetHasDefinedPartitions:t,evaluations:n,onSelectEvaluation:r,selectedEvaluation:s}),n.length?(0,l.jsx)(no,{children:(0,l.jsx)(tK.b$,(0,j._)({},i))}):null]})},AutomaterializeLeftPanel_AutomaterializeLeftList=function(e){var t=e.assetHasDefinedPartitions,n=e.evaluations,i=e.onSelectEvaluation,r=e.selectedEvaluation;return(0,l.jsxs)(p.x,{padding:{vertical:8,horizontal:12},style:{flex:1,minHeight:0,overflowY:"auto"},flex:{grow:1,direction:"column"},children:[n.map(function(e){var n=(null==r?void 0:r.evaluationId)===e.evaluationId,s=e.numRequested,a=e.numSkipped,o=e.numDiscarded;return(0,l.jsx)(nl,{onClick:function(){i(e)},$selected:n,children:(0,l.jsxs)(p.x,{flex:{direction:"column",gap:4},children:[(0,l.jsx)(tk.v,{timestamp:e.timestamp}),(0,l.jsx)(na,{numRequested:s,numSkipped:a,numDiscarded:o,isPartitionedAsset:t,selected:n})]})},"skip-".concat(e.timestamp))}),(0,l.jsx)(p.x,{border:"top",padding:{vertical:20,horizontal:12},margin:{top:12},children:(0,l.jsx)(P.YS,{children:"Evaluations are retained for 30 days"})})]})},no=en.ZP.div.withConfig({componentId:"sc-4d3347f3-0"})(AutoMaterializePolicyPageOld_AutomaterializeLeftPanel_templateObject(),h.gJ(),h.wL(),h.wL()),nl=en.ZP.button.withConfig({componentId:"sc-4d3347f3-1"})(AutoMaterializePolicyPageOld_AutomaterializeLeftPanel_templateObject1(),function(e){return e.$selected?h.Dd():h.v8()},function(e){return e.$selected?h.Ne():h.Ep()},function(e){return e.$selected?h.i3():h.Z$()}),nd=n(84495);function AutomaterializeRequestedPartitionsLink_templateObject(){var e=(0,o._)(["\n  query OldRunStatusAndPartitionKey($filter: RunsFilter) {\n    runsOrError(filter: $filter) {\n      ... on Runs {\n        results {\n          id\n          ...OldRunStatusAndTagsFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment OldRunStatusAndTagsFragment on Run {\n    id\n    status\n    tags {\n      key\n      value\n    }\n  }\n\n  ","\n"]);return AutomaterializeRequestedPartitionsLink_templateObject=function(){return e},e}function AutomaterializeRequestedPartitionsLink_templateObject1(){var e=(0,o._)(["\n  :focus {\n    outline: none;\n  }\n"]);return AutomaterializeRequestedPartitionsLink_templateObject1=function(){return e},e}var AutomaterializeRequestedPartitionsLink=function(e){var t=e.runIds,n=e.partitionKeys,i=e.intent,r=(0,y._)(m.useState(!1),2),s=r[0],a=r[1],o=(0,y._)(m.useState(""),2),d=o[0],c=o[1],u=d.toLocaleLowerCase(),x=n.length,h=m.useMemo(function(){return""===u?n:n.filter(function(e){return e.toLocaleLowerCase().includes(u)})},[n,u]),f=m.useMemo(function(){return t?1===x?"1 partition launched":"".concat(x," partitions launched"):1===x?"1 partition":"".concat(x," partitions")},[x,t]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(p.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,l.jsx)(w.V,{intent:i,children:f}),(0,l.jsx)(e8.Z,{onClick:function(){return a(!0)},children:(0,l.jsx)(P.YS,{children:"View details"})})]}),(0,l.jsxs)(X.Vq,{isOpen:s,onClose:function(){return a(!1)},style:{width:"750px",maxWidth:"80vw",minWidth:"500px"},canOutsideClickClose:!0,canEscapeKeyClose:!0,children:[(0,l.jsxs)(p.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},border:"bottom",children:[(0,l.jsx)("div",{style:{fontSize:"16px"},children:1===x?"1 partition":"".concat(x," partitions")}),x>0?(0,l.jsx)(e0.oi,{icon:"search",value:d,onChange:function(e){return c(e.target.value)},placeholder:"Filter by partition…",style:{width:"252px"}}):null]}),(0,l.jsx)("div",{style:{height:"272px",overflow:"hidden"},children:d&&!h.length?(0,l.jsx)(NoMatchesEmptyState,{queryString:d}):t?(0,l.jsx)(PartitionAndRunList,{runIds:t,partitionKeys:h,intent:i}):(0,l.jsx)(VirtualizedPartitionList,{partitionKeys:n})}),(0,l.jsx)(X.cN,{topBorder:!0,children:(0,l.jsx)(N.zx,{onClick:function(){return a(!1)},children:"Close"})})]})]})},PartitionAndRunList=function(e){var t=e.runIds,n=e.partitionKeys,i=(0,d.a)(nc,{variables:{filter:{runIds:t}}}),r=i.data,s=i.loading,a=null==r?void 0:r.runsOrError;if(!a)return s?(0,l.jsxs)(p.x,{padding:32,flex:{direction:"row",justifyContent:"center",gap:12,alignItems:"center"},children:[(0,l.jsx)(x.$,{purpose:"body-text"}),(0,l.jsx)("div",{children:"Loading partitions and runs…"})]}):(0,l.jsx)(p.x,{padding:32,children:(0,l.jsx)(A.t,{icon:"error",title:"Unexpected error",description:"An unexpected error occurred"})});if("PythonError"===a.__typename)return(0,l.jsx)(p.x,{padding:32,children:(0,l.jsx)(A.t,{icon:"error",title:"Python error",description:(0,l.jsx)(N.zx,{onClick:function(){(0,ta._K)({title:"Python error",body:(0,l.jsx)(tV.T9,{error:a})})},children:"View error"})})});if("InvalidPipelineRunsFilterError"===a.__typename||!a.results.length)return(0,l.jsx)(p.x,{padding:32,children:(0,l.jsx)(A.t,{icon:"error",title:"Runs not found",description:"No runs found for these partitions"})});var o=Object.fromEntries(a.results.map(function(e){var t=e.tags.find(function(e){return e.key===nd.H.Partition});return t?[t.value,e]:null}).filter(function(e){return!!e}));return(0,l.jsx)(VirtualizedPartitionList,{partitionKeys:n,runsByPartitionKey:o})},NoMatchesEmptyState=function(e){var t=e.queryString;return(0,l.jsx)(p.x,{padding:32,children:(0,l.jsx)(A.t,{icon:"search",title:"No matching partitions",description:(0,l.jsxs)(l.Fragment,{children:["No matching partitions for ",(0,l.jsx)("strong",{children:t})]})})})},VirtualizedPartitionList=function(e){var t=e.partitionKeys,n=e.runsByPartitionKey,i=m.useRef(null),r=(0,tY.MG)({count:t.length,getScrollElement:function(){return i.current},estimateSize:function(){return 40},overscan:10}),s=r.getTotalSize(),a=r.getVirtualItems(),o=!!n;return(0,l.jsx)(tX.W2,{ref:i,style:{padding:"8px 24px"},children:(0,l.jsx)(tX.Nh,{$totalHeight:s,children:a.map(function(e){var i=e.index,r=e.key,s=e.size,a=e.start,d=t[i],c=n?n[d]:null;return(0,l.jsx)(tX.X2,{$height:s,$start:a,children:(0,l.jsxs)(p.x,{style:{height:"100%"},flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},border:i<t.length-1?"bottom":null,children:[(0,l.jsx)("div",{children:t[i]}),o?(0,l.jsx)("div",{children:c?(0,l.jsx)(nu,{to:"/runs/".concat(c.id),children:(0,l.jsx)(tU.Zr,{runId:c.id,status:c.status})}):(0,l.jsx)(w.V,{children:"Run not found"})}):null]})},r)})})})},nc=(0,c.Ps)(AutomaterializeRequestedPartitionsLink_templateObject(),t$.B),nu=(0,en.ZP)(E.rU).withConfig({componentId:"sc-498ca194-0"})(AutomaterializeRequestedPartitionsLink_templateObject1());function AutomaterializeRunTag_templateObject(){var e=(0,o._)(["\n  query OldRunStatusOnlyQuery($runId: ID!) {\n    runOrError(runId: $runId) {\n      ... on Run {\n        id\n        status\n      }\n    }\n  }\n"]);return AutomaterializeRunTag_templateObject=function(){return e},e}var AutomaterializeRunTag=function(e){var t=e.runId,n=(0,d.a)(np,{variables:{runId:t}}),i=n.data;if(n.loading&&!i)return(0,l.jsx)(w.V,{icon:"spinner",children:"Loading"});var r=null==i?void 0:i.runOrError;return(null==r?void 0:r.__typename)!=="Run"?(0,l.jsx)(w.V,{icon:"error",intent:"danger",children:"Run not found"}):(0,l.jsx)(E.rU,{to:"/runs/".concat(t),children:(0,l.jsx)(tU.Zr,{runId:t,status:r.status})})},np=(0,c.Ps)(AutomaterializeRunTag_templateObject());function AutoMaterializePolicyPageOld_GetEvaluationsQuery_templateObject(){var e=(0,o._)(["\n  query OldGetEvaluationsQuery($assetKey: AssetKeyInput!, $limit: Int!, $cursor: String) {\n    assetNodeOrError(assetKey: $assetKey) {\n      __typename\n      ... on AssetNode {\n        id\n        autoMaterializePolicy {\n          rules {\n            description\n            decisionType\n            className\n          }\n        }\n        currentAutoMaterializeEvaluationId\n      }\n    }\n\n    autoMaterializeAssetEvaluationsOrError(assetKey: $assetKey, limit: $limit, cursor: $cursor) {\n      ... on AutoMaterializeAssetEvaluationRecords {\n        records {\n          id\n          ...AutoMaterializeEvaluationRecordItem\n        }\n      }\n      ... on AutoMaterializeAssetEvaluationNeedsMigrationError {\n        message\n      }\n    }\n  }\n\n  fragment AutoMaterializeEvaluationRecordItem on AutoMaterializeAssetEvaluationRecord {\n    id\n    evaluationId\n    numRequested\n    numSkipped\n    numDiscarded\n    timestamp\n    runIds\n    rulesWithRuleEvaluations {\n      ...RuleWithEvaluationsFragment\n    }\n    rules {\n      description\n      decisionType\n      className\n    }\n  }\n\n  fragment RuleWithEvaluationsFragment on AutoMaterializeRuleWithRuleEvaluations {\n    rule {\n      description\n      decisionType\n      className\n    }\n    ruleEvaluations {\n      evaluationData {\n        ... on TextRuleEvaluationData {\n          text\n        }\n        ... on ParentMaterializedRuleEvaluationData {\n          updatedAssetKeys {\n            path\n          }\n          willUpdateAssetKeys {\n            path\n          }\n        }\n        ... on WaitingOnKeysRuleEvaluationData {\n          waitingOnAssetKeys {\n            path\n          }\n        }\n      }\n      partitionKeysOrError {\n        ... on PartitionKeys {\n          partitionKeys\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n"]);return AutoMaterializePolicyPageOld_GetEvaluationsQuery_templateObject=function(){return e},e}var nx=(0,c.Ps)(AutoMaterializePolicyPageOld_GetEvaluationsQuery_templateObject()),nh=n(3440),nm=n.n(nh);function CollapsibleSection_templateObject(){var e=(0,o._)(["\n  background-color: ",";\n  border: 0;\n  cursor: pointer;\n  padding: 0;\n  margin: 0;\n\n  :focus {\n    outline: none;\n  }\n"]);return CollapsibleSection_templateObject=function(){return e},e}var CollapsibleSection=function(e){var t=e.header,n=e.details,i=e.headerRightSide,r=e.children;return(0,l.jsx)(Collapsible,{header:(0,l.jsxs)(p.x,{flex:{justifyContent:"space-between",gap:12,grow:1},children:[(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",gap:8,grow:1},children:[(0,l.jsx)(P.pm,{children:t}),n?(0,l.jsx)(tp.u,{content:n,placement:"top",children:(0,l.jsx)(K.JO,{color:h.md(),name:"info"})}):null]}),i]}),children:(0,l.jsx)(p.x,{padding:{vertical:12,left:32,right:16},children:r})})},Collapsible=function(e){var t=e.header,n=e.children,i=(0,y._)(m.useState(!1),2),r=i[0],s=i[1];return(0,l.jsxs)(p.x,{flex:{direction:"column"},border:"bottom",children:[(0,l.jsx)(nf,{onClick:function(){return s(!r)},children:(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",gap:6},padding:{vertical:8,horizontal:12},border:"bottom",children:[(0,l.jsx)(K.JO,{name:"arrow_drop_down",style:{transform:r?"rotate(-90deg)":"rotate(0deg)"}}),(0,l.jsx)("div",{children:t})]})}),r?null:n]})},nf=en.ZP.button.withConfig({componentId:"sc-1a7647bc-0"})(CollapsibleSection_templateObject(),h.gJ()),AssetKeysDialog=function(e){var t=e.isOpen,n=e.setIsOpen,i=e.header,r=e.content,s=e.height;return(0,l.jsxs)(X.Vq,{isOpen:t,onClose:function(){return n(!1)},style:{width:"750px",maxWidth:"80vw",minWidth:"500px",transform:"scale(1)"},canOutsideClickClose:!0,canEscapeKeyClose:!0,children:[i,(0,l.jsx)("div",{style:{height:"".concat(void 0===s?272:s,"px"),overflow:"hidden"},children:r}),(0,l.jsx)(X.cN,{topBorder:!0,children:(0,l.jsx)(N.zx,{onClick:function(){return n(!1)},children:"Close"})})]})},AssetKeysDialogHeader=function(e){var t=e.title,n=e.showSearch,i=e.placeholder,r=e.queryString,s=e.setQueryString;return(0,l.jsxs)(p.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},border:"bottom",children:[(0,l.jsx)("div",{style:{fontSize:"16px"},children:t}),n?(0,l.jsx)(e0.oi,{icon:"search",value:r,onChange:function(e){return s(e.target.value)},placeholder:i,style:{width:"252px"}}):null]})},AssetKeysDialogEmptyState=function(e){var t=e.title,n=e.description;return(0,l.jsx)(p.x,{padding:32,children:(0,l.jsx)(A.t,{icon:"search",title:t,description:n})})};(r=a||(a={}))[r.Updated=0]="Updated",r[r.WillUpdate=1]="WillUpdate";var detailTypeToLabel=function(e){switch(e){case 0:return"Updated";case 1:return"Will update"}},useFilterAssetKeys=function(e,t){var n=t.toLocaleLowerCase();return(0,m.useMemo)(function(){return""===n?e:e.filter(function(e){return e.path.some(function(e){return e.toLowerCase().includes(n)})}).sort(U._v)},[e,n])},useFilterPartitionNames=function(e,t){var n=t.toLocaleLowerCase();return(0,m.useMemo)(function(){return""===n?e:e.filter(function(e){return e.toLowerCase().includes(n)})},[e,n])},ng=n(75375),nj=n(28090),ParentUpdatedLink=function(e){var t=e.updatedAssetKeys,n=e.willUpdateAssetKeys,i=(0,y._)((0,m.useState)(!1),2),r=i[0],s=i[1],o=(0,y._)((0,m.useState)(""),2),d=o[0],c=o[1],u=t.length+n.length,x=useFilterAssetKeys(t,d),h=useFilterAssetKeys(n,d),f=x.length+h.length,g=(0,m.useMemo)(function(){return(0,O._)((0,O._)(x).sort(U._v).map(function(e){return{assetKey:e,detailType:a.Updated}})).concat((0,O._)((0,O._)(h).sort(U._v).map(function(e){return{assetKey:e,detailType:a.WillUpdate}})))},[x,h]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e8.Z,{onClick:function(){return s(!0)},children:1===u?"1 parent updated":"".concat(u," parents updated")}),(0,l.jsx)(AssetKeysDialog,{isOpen:r,setIsOpen:s,header:(0,l.jsx)(AssetKeysDialogHeader,{title:1===u?"1 asset":"".concat(u," assets"),showSearch:u>0,placeholder:"Filter by asset key…",queryString:d,setQueryString:c}),content:d&&!f?(0,l.jsx)(AssetKeysDialogEmptyState,{title:"No matching asset keys",description:(0,l.jsxs)(l.Fragment,{children:["No matching asset keys for ",(0,l.jsx)("strong",{children:d})]})}):(0,l.jsx)(ng.Y,{items:g,renderItem:function(e){return(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,l.jsx)(nj.R,{path:e.assetKey.path,icon:"asset"}),(0,l.jsxs)("span",{children:["(",detailTypeToLabel(e.detailType),")"]})]})}})})]})};function VirtualizedAssetPartitionListForDialog_templateObject(){var e=(0,o._)(["\n  background-color: transparent;\n  cursor: pointer;\n  padding: 0;\n  border: 0;\n  display: flex;\n  height: 100%;\n  width: 100%;\n  flex-direction: row;\n  align-items: center;\n  gap: 8px;\n\n  :focus {\n    outline: none;\n  }\n"]);return VirtualizedAssetPartitionListForDialog_templateObject=function(){return e},e}function VirtualizedAssetPartitionListForDialog(e){var t=e.assetKeysByPartition,n=e.renderPartitionDetail,i=e.renderItem,r=(0,y._)(m.useState(function(){return new Set([])}),2),s=r[0],a=r[1],o=m.useRef(null),d=m.useMemo(function(){var e=[];return Object.keys(t).sort(function(e,t){return eD.Bl.compare(e,t)}).forEach(function(n){var i=t[n],r=s.has(n);if(e.push({type:"partition-name",partitionName:n,expanded:r,assetCount:i.length}),r){var a=i.map(function(e){return{type:"asset-key",assetKey:e}});e.push.apply(e,(0,O._)(a))}}),e},[t,s]),c=(0,tY.MG)({count:d.length,getScrollElement:function(){return o.current},estimateSize:function(){return 40},overscan:10}),u=m.useCallback(function(e){a(function(t){var n=new Set(Array.from(t));return t.has(e)?n.delete(e):n.add(e),n})},[]),x=c.getTotalSize(),h=c.getVirtualItems();return(0,l.jsx)(tX.W2,{ref:o,style:{padding:"8px 24px"},children:(0,l.jsx)(tX.Nh,{$totalHeight:x,children:h.map(function(e){var t=e.index,r=e.key,s=e.size,a=e.start,o=d[t];return(0,l.jsx)(tX.X2,{$height:s,$start:a,children:(0,l.jsx)(p.x,{style:{height:"100%"},flex:{direction:"row",alignItems:"center"},border:t<d.length-1?"bottom":null,children:"partition-name"===o.type?(0,l.jsx)(ExpandablePartitionName,{partitionName:o.partitionName,expanded:o.expanded,detail:n(o),onToggle:u}):(0,l.jsx)(p.x,{padding:{left:24},children:i(o.assetKey)})})},r)})})})}var ExpandablePartitionName=function(e){var t=e.partitionName,n=e.detail,i=e.expanded,r=e.onToggle;return(0,l.jsxs)(nv,{onClick:function(){return r(t)},children:[(0,l.jsx)(K.JO,{name:"arrow_drop_down",style:{transform:i?"rotate(0deg)":"rotate(-90deg)"}}),(0,l.jsx)("div",{children:t}),(0,l.jsx)("div",{children:n})]})},nv=en.ZP.button.withConfig({componentId:"sc-cbda4ec8-0"})(VirtualizedAssetPartitionListForDialog_templateObject()),ParentUpdatedPartitionLink=function(e){var t=e.updatedAssetKeys,n=e.willUpdateAssetKeys,i=(0,y._)((0,m.useState)(!1),2),r=i[0],s=i[1],o=(0,y._)((0,m.useState)(""),2),d=o[0],c=o[1],u=(0,m.useMemo)(function(){return Array.from(new Set((0,O._)(Object.keys(t)).concat((0,O._)(Object.keys(n)))))},[t,n]),x=u.length,h=useFilterPartitionNames(u,d),f=(0,m.useMemo)(function(){return Object.fromEntries(h.map(function(e){return[e,(0,O._)((t[e]||[]).slice().sort(U._v).map(function(e){return{assetKey:e,detailType:a.Updated}})).concat((0,O._)((n[e]||[]).slice().sort(U._v).map(function(e){return{assetKey:e,detailType:a.WillUpdate}})))]}))},[t,n,h]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(p.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,l.jsx)(w.V,{children:1===x?"1 partition":"".concat(x," partitions")}),(0,l.jsx)(e8.Z,{onClick:function(){return s(!0)},children:(0,l.jsx)(P.YS,{children:"View details"})})]}),(0,l.jsx)(AssetKeysDialog,{isOpen:r,setIsOpen:s,header:(0,l.jsx)(AssetKeysDialogHeader,{title:1===x?"1 partition":"".concat(x," partitions"),placeholder:"Filter by partition…",queryString:d,setQueryString:c,showSearch:x>0}),content:d&&!h.length?(0,l.jsx)(AssetKeysDialogEmptyState,{title:"No matching partitions",description:(0,l.jsxs)(l.Fragment,{children:["No matching partitions for ",(0,l.jsx)("strong",{children:d})]})}):(0,l.jsx)(VirtualizedAssetPartitionListForDialog,{assetKeysByPartition:f,renderPartitionDetail:function(e){var t=e.assetCount;return 1===t?"(1 parent updated)":"(".concat(t," parents updated)")},renderItem:function(e){return(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,l.jsx)(nj.R,{path:e.assetKey.path,icon:"asset"}),(0,l.jsxs)("span",{children:["(",detailTypeToLabel(e.detailType),")"]})]})}})})]})},WaitingOnAssetKeysLink=function(e){var t=e.assetKeys,n=(0,y._)((0,m.useState)(!1),2),i=n[0],r=n[1],s=(0,y._)((0,m.useState)(""),2),a=s[0],o=s[1],d=t.length,c=useFilterAssetKeys(t,a);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e8.Z,{onClick:function(){return r(!0)},children:1===d?"Waiting on 1 asset":"Waiting on ".concat(d," assets")}),(0,l.jsx)(AssetKeysDialog,{isOpen:i,setIsOpen:r,header:(0,l.jsx)(AssetKeysDialogHeader,{title:1===d?"1 asset":"".concat(d," assets"),queryString:a,setQueryString:o,showSearch:d>0,placeholder:"Filter by asset key…"}),content:a&&!c.length?(0,l.jsx)(AssetKeysDialogEmptyState,{title:"No matching asset keys",description:(0,l.jsxs)(l.Fragment,{children:["No matching asset keys for ",(0,l.jsx)("strong",{children:a})]})}):(0,l.jsx)(ng.Y,{items:c,renderItem:function(e){return(0,l.jsx)(nj.R,{path:e.path,icon:"asset"})}})})]})},WaitingOnAssetKeysPartitionLink=function(e){var t=e.assetKeysByPartition,n=(0,y._)((0,m.useState)(!1),2),i=n[0],r=n[1],s=(0,y._)((0,m.useState)(""),2),a=s[0],o=s[1],d=Object.keys(t),c=d.length,u=useFilterPartitionNames(d,a),x=(0,m.useMemo)(function(){return Object.fromEntries(u.map(function(e){return[e,(0,O._)(t[e]).sort(U._v)]}))},[t,u]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(p.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,l.jsx)(w.V,{intent:"warning",children:1===c?"1 partition":"".concat(c," partitions")}),(0,l.jsx)(e8.Z,{onClick:function(){return r(!0)},children:(0,l.jsx)(P.YS,{children:"View details"})})]}),(0,l.jsx)(AssetKeysDialog,{isOpen:i,setIsOpen:r,header:(0,l.jsx)(AssetKeysDialogHeader,{title:1===c?"1 partition":"".concat(c," partitions"),queryString:a,setQueryString:o,showSearch:c>0,placeholder:"Filter by partition…"}),content:a&&!u.length?(0,l.jsx)(AssetKeysDialogEmptyState,{title:"No matching partitions",description:(0,l.jsxs)(l.Fragment,{children:["No matching partitions for ",(0,l.jsx)("strong",{children:a})]})}):(0,l.jsx)(VirtualizedAssetPartitionListForDialog,{assetKeysByPartition:x,renderPartitionDetail:function(e){var t=e.assetCount;return 1===t?"(Waiting on 1 asset)":"(Waiting on ".concat(t," assets)")},renderItem:function(e){return(0,l.jsx)(nj.R,{path:e.path,icon:"asset"})}})})]})},RuleEvaluationOutcome=function(e){var t=e.text,n=e.met,i=e.rightElement;return(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},style:{height:24},children:[(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,l.jsx)(K.JO,{name:n?"done":"close",color:n?h.Ep():h.$()}),(0,l.jsxs)("div",{style:{color:n?h.Ep():h.$()},children:[t.slice(0,1).toUpperCase(),t.slice(1)]})]}),i]})},ny=[{decisionType:ex.tpz.MATERIALIZE,header:"Materialization conditions met",details:"These conditions trigger a materialization, unless they are blocked by a skip or discard condition."},{decisionType:ex.tpz.SKIP,header:"Skip conditions met",details:"Skips will materialize in a future evaluation, once the skip condition is resolved."},{decisionType:ex.tpz.DISCARD,header:"Discard conditions met",details:"Discarded partitions will not be materialized unless new materialization conditions occur. You may want to run a manual backfill to respond to the materialize conditions.",intent:"danger",partitionedOnly:!0}],RuleEvaluationOutcomes=function(e){var t=e.rules,n=e.ruleEvaluations,i=e.assetHasDefinedPartitions,r=nm()(t,function(e){return e.decisionType});return(0,l.jsx)(l.Fragment,{children:ny.filter(function(e){return r[e.decisionType]&&(i||!e.partitionedOnly)}).map(function(e){return(0,l.jsx)(CollapsibleSection,{header:e.header,details:e.details,children:(0,l.jsx)(p.x,{flex:{direction:"column",gap:8},children:(r[e.decisionType]||[]).map(function(t,r){var s,a=t.description,o=(null===(s=n.find(function(e){var t;return(null===(t=e.rule)||void 0===t?void 0:t.description)===a}))||void 0===s?void 0:s.ruleEvaluations)||[];return(0,l.jsx)(RuleEvaluationOutcome,{text:a,met:o.length>0,rightElement:i?(0,l.jsx)(RightElementForPartitionedEvaluations,{evaluations:o,intent:e.intent}):(0,l.jsx)(RightElementForEvaluations,{evaluations:o,intent:e.intent})},r)})})},e.decisionType)})})},RightElementForEvaluations=function(e){var t=e.evaluations.map(function(e){return e.evaluationData}).find(Boolean);if(!t)return(0,l.jsx)("div",{style:{color:h.Aw()},children:"–"});switch(t.__typename){case"ParentMaterializedRuleEvaluationData":return(0,l.jsx)(ParentUpdatedLink,{updatedAssetKeys:t.updatedAssetKeys||[],willUpdateAssetKeys:t.willUpdateAssetKeys||[]});case"WaitingOnKeysRuleEvaluationData":return(0,l.jsx)(WaitingOnAssetKeysLink,{assetKeys:t.waitingOnAssetKeys||[]});case"TextRuleEvaluationData":return(0,l.jsx)("span",{children:t.text});default:(0,eD.UT)(t)}return(0,l.jsx)("span",{})},partitionKeysOf=function(e){var t;return(null===(t=e.partitionKeysOrError)||void 0===t?void 0:t.__typename)==="PartitionKeys"?e.partitionKeysOrError.partitionKeys:[]},RightElementForPartitionedEvaluations=function(e){var t,n=e.evaluations,i=e.intent,r=n.filter(function(e){return!!e.evaluationData}),s=null===(t=r[0])||void 0===t?void 0:t.evaluationData;if(!s){var a=n.flatMap(partitionKeysOf);return a.length?(0,l.jsx)(AutomaterializeRequestedPartitionsLink,{partitionKeys:a,intent:i}):(0,l.jsx)("div",{style:{color:h.Aw()},children:"–"})}var o=s.__typename;switch(o){case"ParentMaterializedRuleEvaluationData":var d=Object.fromEntries(r.flatMap(function(e){return partitionKeysOf(e).map(function(t){var n;return[t,(null===(n=e.evaluationData)||void 0===n?void 0:n.__typename)==="ParentMaterializedRuleEvaluationData"&&e.evaluationData.updatedAssetKeys||[]]})})),c=Object.fromEntries(r.flatMap(function(e){return partitionKeysOf(e).map(function(t){var n;return[t,(null===(n=e.evaluationData)||void 0===n?void 0:n.__typename)==="ParentMaterializedRuleEvaluationData"&&e.evaluationData.willUpdateAssetKeys||[]]})}));return(0,l.jsx)(ParentUpdatedPartitionLink,{updatedAssetKeys:d,willUpdateAssetKeys:c});case"WaitingOnKeysRuleEvaluationData":var u=Object.fromEntries(r.flatMap(function(e){return partitionKeysOf(e).map(function(t){var n;return[t,(null===(n=e.evaluationData)||void 0===n?void 0:n.__typename)==="WaitingOnKeysRuleEvaluationData"&&e.evaluationData.waitingOnAssetKeys||[]]})}));return(0,l.jsx)(WaitingOnAssetKeysPartitionLink,{assetKeysByPartition:u});case"TextRuleEvaluationData":return(0,l.jsx)("span",{children:s.text});default:(0,eD.UT)(o)}},nb={__typename:"no_conditions_met",evaluationId:0,amount:0,endTimestamp:0,startTimestamp:0},extractRequestedPartitionKeys=function(e){var t=[],n=[];e.forEach(function(e){var i=e.rule,r=e.ruleEvaluations.flatMap(function(e){var t;return(null===(t=e.partitionKeysOrError)||void 0===t?void 0:t.__typename)==="PartitionKeys"?e.partitionKeysOrError.partitionKeys:[]});i.decisionType===ex.tpz.MATERIALIZE?t=t.concat(r):n=n.concat(r)});var i=new Set(n);return new Set(t.filter(function(e){return!i.has(e)}))},AutomaterializeMiddlePanel_AutomaterializeMiddlePanel=function(e){var t,n,i,r=e.assetKey,s=e.assetHasDefinedPartitions,a=e.selectedEvaluationId,o=(0,d.a)(nx,{variables:{assetKey:r,cursor:a?"".concat(a+1):void 0,limit:2}}),c=o.data,u=o.loading,x=o.error;if(u&&!c)return(0,l.jsx)(p.x,{flex:{direction:"column",grow:1},children:(0,l.jsx)(p.x,{style:{flex:"0 0 48px"},border:"bottom",padding:{horizontal:16},flex:{alignItems:"center",justifyContent:"space-between"},children:(0,l.jsx)(P.pm,{children:"Result"})})});if(x)return(0,l.jsx)(p.x,{flex:{direction:"column",grow:1},children:(0,l.jsx)(p.x,{flex:{direction:"row",justifyContent:"center"},padding:24,children:(0,l.jsx)(tV.Vx,{children:JSON.stringify(x)})})});if((null==c?void 0:null===(t=c.autoMaterializeAssetEvaluationsOrError)||void 0===t?void 0:t.__typename)==="AutoMaterializeAssetEvaluationNeedsMigrationError")return(0,l.jsx)(p.x,{flex:{direction:"column",grow:1},children:(0,l.jsx)(p.x,{flex:{direction:"row",justifyContent:"center"},padding:{vertical:24},children:(0,l.jsx)(A.t,{icon:"error",title:"Error",description:c.autoMaterializeAssetEvaluationsOrError.message})})});var h=(null==c?void 0:c.assetNodeOrError.__typename)==="AssetNode"&&(null===(n=c.assetNodeOrError.autoMaterializePolicy)||void 0===n?void 0:n.rules)||[],m=((null==c?void 0:null===(i=c.autoMaterializeAssetEvaluationsOrError)||void 0===i?void 0:i.records)||[]).find(function(e){return e.evaluationId===a})||nb;return(0,l.jsx)(AutomaterializeMiddlePanel_AutomaterializeMiddlePanelWithData,{currentRules:h,assetHasDefinedPartitions:s,selectedEvaluation:m})},AutomaterializeMiddlePanel_AutomaterializeMiddlePanelWithData=function(e){var t=e.currentRules,n=e.selectedEvaluation,i=e.assetHasDefinedPartitions,r=(null==n?void 0:n.__typename)==="AutoMaterializeAssetEvaluationRecord"?n.runIds:[],s=(null==n?void 0:n.__typename)==="AutoMaterializeAssetEvaluationRecord"?n.rulesWithRuleEvaluations:[],a=(null==n?void 0:n.__typename)==="AutoMaterializeAssetEvaluationRecord"&&n.rules?n.rules:t;return(0,l.jsxs)(p.x,{flex:{direction:"column",grow:1},children:[(0,l.jsxs)(p.x,{style:{flex:"0 0 48px"},padding:{horizontal:16},border:"bottom",flex:{alignItems:"center",justifyContent:"space-between"},children:[(0,l.jsx)(P.pm,{children:"Result"}),(0,l.jsx)("div",{children:0===r.length?null:i?(0,l.jsx)(AutomaterializeRequestedPartitionsLink,{runIds:r,partitionKeys:Array.from(extractRequestedPartitionKeys(s)),intent:"success"}):(0,l.jsx)(AutomaterializeRunTag,{runId:r[0]})})]}),(0,l.jsx)(RuleEvaluationOutcomes,{rules:a,ruleEvaluations:s,assetHasDefinedPartitions:i})]})};function AutomaterializeRightPanel_templateObject(){var e=(0,o._)(["\n  query OldGetPolicyInfoQuery($assetKey: AssetKeyInput!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      ... on AssetNode {\n        id\n        freshnessPolicy {\n          maximumLagMinutes\n          cronSchedule\n          cronScheduleTimezone\n        }\n        autoMaterializePolicy {\n          policyType\n          maxMaterializationsPerMinute\n          rules {\n            description\n            decisionType\n          }\n        }\n      }\n    }\n  }\n"]);return AutomaterializeRightPanel_templateObject=function(){return e},e}var AutomaterializeRightPanel=function(e){var t=e.assetKey,n=(0,d.a)(nA,{variables:{assetKey:t}});(0,nr.C4)(n,nr.dT);var i=n.data,r=n.error;return(0,l.jsxs)(p.x,{flex:{direction:"column"},style:{width:"294px",height:"100%"},border:"left",children:[(0,l.jsx)(p.x,{padding:16,border:"bottom",children:(0,l.jsx)(P.pm,{children:"Overview"})}),(0,l.jsx)("div",{style:{overflowY:"auto"},children:r?(0,l.jsx)(p.x,{padding:24,children:(0,l.jsx)(tV.Vx,{children:JSON.stringify(r)})}):i?"AssetNotFoundError"===i.assetNodeOrError.__typename?(0,l.jsx)(f.l_,{to:"/assets"}):(0,l.jsxs)(l.Fragment,{children:[i.assetNodeOrError.autoMaterializePolicy?(0,l.jsx)(RightPanelSection,{title:(0,l.jsxs)(p.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:["Auto-materialize policy",(0,l.jsx)(eK.W,{policy:i.assetNodeOrError.autoMaterializePolicy})]}),children:(0,l.jsx)(P.uT,{style:{flex:1},children:"This asset will be automatically materialized when at least one of the conditions to the left is met and no skip conditions are met."})}):(0,l.jsx)(p.x,{padding:8,children:(0,l.jsx)(A.t,{title:"No auto-materialize policy found",shrinkable:!0,description:(0,l.jsxs)(p.x,{flex:{direction:"column",gap:8},children:[(0,l.jsx)("div",{children:"An auto-materialize policy specifies how Dagster should attempt to keep an asset up-to-date."}),(0,l.jsx)("div",{children:(0,l.jsx)(N.fr,{href:"https://docs.dagster.io/_apidocs/assets#dagster.AutoMaterializePolicy",target:"_blank",rel:"noreferrer",icon:(0,l.jsx)(K.JO,{name:"open_in_new"}),children:"View documentation"})})]})})}),i.assetNodeOrError.freshnessPolicy?(0,l.jsxs)(RightPanelSection,{title:"Freshness policy",children:[(0,l.jsx)(RightPanelDetail,{title:"Maximum lag minutes",value:i.assetNodeOrError.freshnessPolicy.maximumLagMinutes}),(0,l.jsxs)(p.x,{flex:{direction:"column",gap:8},children:["This asset will be considered late if it is not materialized within"," ",i.assetNodeOrError.freshnessPolicy.maximumLagMinutes," minutes of it’s upstream dependencies.",(0,l.jsx)(E.rU,{to:(0,F.p)(t,{view:"lineage",lineageScope:"upstream"}),children:"View upstream assets"})]})]}):(0,l.jsx)(p.x,{padding:8,children:(0,l.jsx)(A.t,{title:"No freshness policy found",shrinkable:!0,description:(0,l.jsxs)(p.x,{flex:{direction:"column",gap:8},children:[(0,l.jsx)("div",{children:"A FreshnessPolicy specifies how up-to-date you want a given asset to be."}),(0,l.jsx)("div",{children:(0,l.jsx)(N.fr,{href:"https://docs.dagster.io/_apidocs/assets#dagster.FreshnessPolicy",target:"_blank",rel:"noreferrer",icon:(0,l.jsx)(K.JO,{name:"open_in_new"}),children:"View documentation"})})]})})})]}):(0,l.jsx)(p.x,{flex:{direction:"row",justifyContent:"center"},padding:{vertical:24},children:(0,l.jsx)(x.$,{purpose:"section"})})})]})},RightPanelSection=function(e){var t=e.title,n=e.children;return(0,l.jsxs)(p.x,{flex:{direction:"column",gap:12},border:"bottom",padding:{vertical:12,horizontal:16},children:[(0,l.jsx)(P.pm,{children:t}),n]})},RightPanelDetail=function(e){var t=e.title,n=e.value;return(0,l.jsxs)(p.x,{flex:{direction:"column",gap:4},children:[(0,l.jsx)("div",{children:t}),(0,l.jsx)(P.fv,{style:{fontSize:"16px",fontWeight:500},children:n})]})},nA=(0,c.Ps)(AutomaterializeRightPanel_templateObject());function AutoMaterializePolicyPageOld_AssetAutomaterializePolicyPage_templateObject(){var e=(0,o._)(["\n  a span {\n    white-space: normal;\n  }\n"]);return AutoMaterializePolicyPageOld_AssetAutomaterializePolicyPage_templateObject=function(){return e},e}var AssetAutomaterializePolicyPageOld=function(e){var t,n,i=e.assetKey,r=e.assetHasDefinedPartitions,s=(0,ni.l)({nextCursorForResult:function(e){var t,n;if((null===(t=e.autoMaterializeAssetEvaluationsOrError)||void 0===t?void 0:t.__typename)==="AutoMaterializeAssetEvaluationRecords")return null===(n=e.autoMaterializeAssetEvaluationsOrError.records[29])||void 0===n?void 0:n.evaluationId.toString()},getResultArray:function(e){var t;return(null==e?void 0:null===(t=e.autoMaterializeAssetEvaluationsOrError)||void 0===t?void 0:t.__typename)==="AutoMaterializeAssetEvaluationRecords"?e.autoMaterializeAssetEvaluationsOrError.records:[]},variables:{assetKey:i},query:nx,pageSize:30}),a=s.queryResult,o=s.paginationProps;(0,nr.C4)(a,nr.dT);var d=(0,m.useMemo)(function(){var e,t,n,i,r;return(null===(t=a.data)||void 0===t?void 0:null===(e=t.autoMaterializeAssetEvaluationsOrError)||void 0===e?void 0:e.__typename)==="AutoMaterializeAssetEvaluationRecords"&&(null===(i=a.data)||void 0===i?void 0:null===(n=i.assetNodeOrError)||void 0===n?void 0:n.__typename)==="AssetNode"?{evaluations:null===(r=a.data)||void 0===r?void 0:r.autoMaterializeAssetEvaluationsOrError.records,currentAutoMaterializeEvaluationId:a.data.assetNodeOrError.currentAutoMaterializeEvaluationId}:{evaluations:[],currentAutoMaterializeEvaluationId:null}},[null===(t=a.data)||void 0===t?void 0:t.autoMaterializeAssetEvaluationsOrError,null===(n=a.data)||void 0===n?void 0:n.assetNodeOrError]).evaluations,c=!o.hasPrevCursor,u=(0,y._)((0,t_.q)({queryKey:"evaluation",decode:function(e){var t=parseInt(e.evaluation);return isNaN(t)?void 0:t}}),2),x=u[0],f=u[1],g=(0,m.useMemo)(function(){return void 0===x&&c?d[0]:d.find(function(e){return e.evaluationId===x})},[x,c,d]);return(0,l.jsxs)(n_,{style:{flex:1,minHeight:0,color:h.$(),overflow:"hidden"},flex:{direction:"column"},children:[(0,l.jsx)(AutoMaterializeExperimentalBanner_AutoMaterializeExperimentalBanner,{}),(0,l.jsxs)(p.x,{flex:{direction:"row"},style:{minHeight:0,flex:1},children:[(0,l.jsxs)(p.x,{flex:{direction:"column",grow:1},children:[(0,l.jsx)(p.x,{flex:{alignItems:"center"},padding:{vertical:16,horizontal:24},border:"bottom",children:(0,l.jsx)(P.pm,{children:"Evaluation history"})}),(0,l.jsxs)(p.x,{flex:{direction:"row"},style:{flex:1,minHeight:0},children:[(0,l.jsx)(p.x,{border:"right",flex:{grow:0,direction:"column"},style:{flex:"0 0 296px"},children:(0,l.jsx)(AutomaterializeLeftPanel_AutomaterializeLeftPanel,{assetHasDefinedPartitions:r,evaluations:d,paginationProps:o,onSelectEvaluation:function(e){f(e.evaluationId)},selectedEvaluation:g})}),(0,l.jsx)(p.x,{flex:{grow:1},style:{minHeight:0,overflowY:"auto"},children:(0,l.jsx)(AutomaterializeMiddlePanel_AutomaterializeMiddlePanel,{assetKey:i,assetHasDefinedPartitions:r,selectedEvaluationId:(null==g?void 0:g.evaluationId)||x})})]})]}),(0,l.jsx)(p.x,{border:"left",children:(0,l.jsx)(AutomaterializeRightPanel,{assetKey:i})})]})]})},n_=(0,en.ZP)(p.x).withConfig({componentId:"sc-227bd85e-0"})(AutoMaterializePolicyPageOld_AssetAutomaterializePolicyPage_templateObject()),nw=n(58341),nE=n(87631),nO=n(6411),CollapsibleSection_CollapsibleSection=function(e){var t=e.header,n=e.headerWrapperProps,i=e.children,r=e.isInitiallyCollapsed,s=e.arrowSide,a=(0,y._)(m.useState(void 0!==r&&r),2),o=a[0],d=a[1];return(0,l.jsxs)(p.x,{flex:{direction:"column"},children:[(0,l.jsx)(p.x,(0,v._)((0,j._)({},n),{flex:(0,j._)({direction:"row",alignItems:"center",gap:6,grow:1},(null==n?void 0:n.flex)||{}),onClick:function(){var e;d(!o),null==n||null===(e=n.onClick)||void 0===e||e.call(n)},children:"left"===(void 0===s?"left":s)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(K.JO,{name:"arrow_drop_down",style:{transform:o?"rotate(-90deg)":"rotate(0deg)"}}),(0,l.jsx)("div",{children:t})]}):(0,l.jsxs)(p.x,{flex:{justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsx)("div",{children:t}),(0,l.jsx)(K.JO,{name:"arrow_drop_down",style:{transform:o?"rotate(-90deg)":"rotate(0deg)"}})]})})),o?null:i]})},nP=n(21106);function AssetCheckDetailModal_templateObject(){var e=(0,o._)(["\n  fragment AssetCheckExecutionFragment on AssetCheckExecution {\n    id\n    runId\n    status\n    stepKey\n    timestamp\n    evaluation {\n      severity\n      timestamp\n      description\n      targetMaterialization {\n        timestamp\n        runId\n      }\n      metadataEntries {\n        ...MetadataEntryFragment\n      }\n    }\n  }\n  ","\n"]);return AssetCheckDetailModal_templateObject=function(){return e},e}function AssetCheckDetailModal_templateObject1(){var e=(0,o._)(["\n  query AssetCheckDetailsQuery(\n    $assetKey: AssetKeyInput!\n    $checkName: String!\n    $limit: Int!\n    $cursor: String\n  ) {\n    assetCheckExecutions(\n      assetKey: $assetKey\n      checkName: $checkName\n      limit: $limit\n      cursor: $cursor\n    ) {\n      id\n      ...AssetCheckExecutionFragment\n    }\n  }\n  ","\n"]);return AssetCheckDetailModal_templateObject1=function(){return e},e}function AssetCheckDetailModal_MetadataCell(e){var t,n,i=e.metadataEntries,r=(0,y._)((0,m.useState)(!1),2),s=r[0],a=r[1];return i&&i.length?!(i.length>1)&&(nz.includes(null===(t=i[0])||void 0===t?void 0:t.__typename)||(null===(n=i[0])||void 0===n?void 0:n.__typename)==="TableMetadataEntry"&&i[0].table.records.length<=1)?(0,l.jsx)(ei.gD,{entries:i}):(0,l.jsxs)("div",{children:[(0,l.jsx)(N.zx,{onClick:function(){return a(!0)},children:"View metadata"}),(0,l.jsxs)(X.Vq,{title:"Metadata",isOpen:s,onClose:function(){return a(!1)},canOutsideClickClose:!0,canEscapeKeyClose:!0,style:{width:"80%",minWidth:"800px"},children:[(0,l.jsx)(X.a7,{children:(0,l.jsx)(ei.gD,{entries:i})}),(0,l.jsx)(X.cN,{topBorder:!0,children:(0,l.jsx)(N.zx,{onClick:function(){return a(!1)},intent:"primary",children:"Close"})})]})]}):(0,l.jsx)("span",{children:" - "})}var nC=(0,c.Ps)(AssetCheckDetailModal_templateObject(),ei.it),nS=(0,c.Ps)(AssetCheckDetailModal_templateObject1(),nC);function MigrationRequired(){return(0,l.jsx)(p.x,{padding:24,children:(0,l.jsx)(A.t,{icon:"warning",title:"Migration required",description:(0,l.jsx)(p.x,{flex:{direction:"column"},children:(0,l.jsxs)(P.pN,{color:h.$(),style:{padding:"6px 0"},children:["A database schema migration is required to use asset checks. Run"," ",(0,l.jsx)(P.fv,{children:"dagster instance migrate"}),"."]})})})})}function AgentUpgradeRequired(){return(0,l.jsx)(p.x,{padding:24,children:(0,l.jsx)(A.t,{icon:"warning",title:"Agent upgrade required",description:(0,l.jsx)(p.x,{flex:{direction:"column"},children:(0,l.jsx)(P.pN,{color:h.$(),style:{padding:"6px 0"},children:"Checks require Dagster Cloud Agent version 1.5 or higher. Upgrade your agent(s) to use checks."})})})})}function NeedsUserCodeUpgrade(){return(0,l.jsx)(p.x,{padding:24,children:(0,l.jsx)(A.t,{icon:"warning",title:"Upgrade required",description:(0,l.jsx)(p.x,{flex:{direction:"column"},children:(0,l.jsx)(P.pN,{color:h.$(),style:{padding:"6px 0"},children:"Checks aren't supported with dagster versions before 1.5. Upgrade the dagster library in this code location to use them."})})})})}var nz=["BoolMetadataEntry","FloatMetadataEntry","IntMetadataEntry","TextMetadataEntry","UrlMetadataEntry","PathMetadataEntry","NullMetadataEntry","TableSchemaMetadataEntry"],nI=n(55782),nN=n(73172);function VirtualizedAssetCheckTable_templateObject(){var e=(0,o._)(["\n  text-overflow: ellipsis;\n  max-width: 100%;\n  overflow: hidden;\n  white-space: nowrap;\n"]);return VirtualizedAssetCheckTable_templateObject=function(){return e},e}function VirtualizedAssetCheckTable_templateObject1(){var e=(0,o._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n"]);return VirtualizedAssetCheckTable_templateObject1=function(){return e},e}function VirtualizedAssetCheckTable_templateObject2(){var e=(0,o._)(["\n  fragment AssetCheckTableFragment on AssetCheck {\n    name\n    description\n    canExecuteIndividually\n    executionForLatestMaterialization {\n      ...AssetCheckExecutionFragment\n    }\n  }\n  ","\n"]);return VirtualizedAssetCheckTable_templateObject2=function(){return e},e}(0,en.ZP)(P.YS).withConfig({componentId:"sc-534f486c-0"})(VirtualizedAssetCheckTable_templateObject()),(0,en.ZP)(p.x).withConfig({componentId:"sc-534f486c-1"})(VirtualizedAssetCheckTable_templateObject1(),"2fr 150px 1fr 1.5fr 120px");var nK=(0,c.Ps)(VirtualizedAssetCheckTable_templateObject2(),nC);function AssetChecks_templateObject(){var e=(0,o._)(["\n  padding: 5px 8px 5px 12px;\n  cursor: pointer;\n  border-radius: 8px;\n  &:hover {\n    background: ",";\n  }\n  ","\n"]);return AssetChecks_templateObject=function(){return e},e}function AssetChecks_templateObject1(){var e=(0,o._)(["\n  query AssetChecksQuery($assetKey: AssetKeyInput!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      ... on AssetNode {\n        id\n        ...ExecuteChecksButtonAssetNodeFragment\n\n        assetChecksOrError {\n          ... on AssetCheckNeedsMigrationError {\n            message\n          }\n          ... on AssetChecks {\n            checks {\n              ...ExecuteChecksButtonCheckFragment\n              ...AssetCheckTableFragment\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return AssetChecks_templateObject1=function(){return e},e}var AssetChecks=function(e){var t,n,i,r,s=e.assetKey,a=(0,d.a)(nM,{variables:{assetKey:s}}),o=a.data;(0,nr.C4)(a,nr.dT);var c=(0,y._)((0,t_.q)({queryKey:"checkDetail"}),2),u=c[0],f=c[1],g=(null==o?void 0:o.assetNodeOrError.__typename)==="AssetNode"?o.assetNodeOrError:null,j=m.useMemo(function(){return(null==o?void 0:o.assetNodeOrError.__typename)!=="AssetNode"||"AssetChecks"!==o.assetNodeOrError.assetChecksOrError.__typename?[]:(0,O._)(o.assetNodeOrError.assetChecksOrError.checks).sort(function(e,t){return eD.Bl.compare(e.name,t.name)})},[o]),v=(0,m.useContext)(eb.G).AssetChecksBanner,b=(0,y._)((0,ev.U)("asset-checks-experimental-banner",function(e){return!!e}),2),_=b[0],w=b[1],C=(0,y._)(m.useState(""),2),S=C[0],z=C[1],I=m.useMemo(function(){return j.filter(function(e){return e.name.toLowerCase().includes(S.toLowerCase())})},[j,S]),N=m.useRef(null),k=(0,tY.MG)({count:I.length,getScrollElement:function(){return N.current},estimateSize:function(){return 48},overscan:10}),R=k.getTotalSize(),M=k.getVirtualItems(),T=m.useMemo(function(){var e;return u&&null!==(e=j.find(function(e){return e.name===u}))&&void 0!==e?e:j[0]},[u,j]);if(!o)return null;if("AssetNode"===o.assetNodeOrError.__typename){var D=o.assetNodeOrError.assetChecksOrError.__typename;switch(D){case"AssetCheckNeedsAgentUpgradeError":return(0,l.jsx)(AgentUpgradeRequired,{});case"AssetCheckNeedsMigrationError":return(0,l.jsx)(MigrationRequired,{});case"AssetCheckNeedsUserCodeUpgrade":return(0,l.jsx)(NeedsUserCodeUpgrade,{});case"AssetChecks":break;default:(0,eD.UT)(D)}}if(!j.length||!T||!g)return(0,l.jsx)(p.x,{flex:{alignItems:"center"},padding:32,children:(0,l.jsx)(A.t,{title:"No checks defined for this asset",icon:"asset_check",description:(0,l.jsxs)(p.x,{flex:{direction:"column",gap:6},children:[(0,l.jsx)(P.pN,{children:"Asset checks can verify properties of a data asset, e.g. that there are no null values in a particular column."}),(0,l.jsx)("a",{href:"https://docs.dagster.io/concepts/assets/asset-checks",children:"Learn more about asset checks"})]})})});var L=T.executionForLatestMaterialization,F=null==L?void 0:null===(t=L.evaluation)||void 0===t?void 0:t.targetMaterialization;return console.log({lastExecution:L}),(0,l.jsxs)(p.x,{flex:{grow:1,direction:"column"},children:[_?null:(0,l.jsx)(p.x,{padding:{horizontal:24,vertical:12},border:"bottom",children:(0,l.jsx)(v,{onClose:function(){w(!0)}})}),(0,l.jsxs)(p.x,{flex:{direction:"row",grow:1},style:{position:"relative"},children:[(0,l.jsxs)(p.x,{flex:{direction:"column"},style:{minWidth:294,width:"20%"},border:"right",children:[(0,l.jsxs)(p.x,{style:{height:56},border:"bottom",flex:{justifyContent:"space-between",alignItems:"center"},padding:{left:24,vertical:12,right:12},children:[(0,l.jsxs)(P.d1,{children:["Checks ",j.length?(0,l.jsxs)(l.Fragment,{children:["(",tR.V.format(j.length),")"]}):null]}),(0,l.jsx)(nN.$$,{assetNode:g,checks:j})]}),(0,l.jsxs)(p.x,{flex:{direction:"column",gap:8,grow:1},padding:{horizontal:16,vertical:12},children:[(0,l.jsx)(e0.oi,{icon:"search",value:S,onChange:function(e){return z(e.target.value)},placeholder:"Filter checks"}),(0,l.jsx)(FixedScrollContainer,{children:(0,l.jsx)(tX.W2,{ref:N,children:(0,l.jsx)(tX.Nh,{$totalHeight:R,children:M.map(function(e){var t=e.index,n=e.size,i=e.start,r=I[t];return(0,l.jsx)(nk,{$height:n,$start:i,$selected:T===r,onClick:function(){f(r.name)},children:(0,l.jsxs)(p.x,{flex:{direction:"column",gap:2},children:[(0,l.jsxs)(p.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,l.jsx)(p.x,{flex:{alignItems:"center",justifyContent:"center"},style:{width:20,height:20},children:function(e){var t,n=e.executionForLatestMaterialization;if(!n)return(0,l.jsx)(K.JO,{name:"status",color:h.md()});var i=n.status,r=(null===(t=n.evaluation)||void 0===t?void 0:t.severity)===ex.gqZ.WARN;switch(i){case ex.peG.EXECUTION_FAILED:return(0,l.jsx)(K.JO,{name:"sync_problem",color:r?h.qr():h.FY()});case ex.peG.FAILED:if(r)return(0,l.jsx)(K.JO,{name:"warning_outline",color:h.qr()});return(0,l.jsx)(K.JO,{name:"cancel",color:h.FY()});case ex.peG.IN_PROGRESS:return(0,l.jsx)(x.$,{purpose:"body-text"});case ex.peG.SKIPPED:return(0,l.jsx)(K.JO,{name:"dot"});case ex.peG.SUCCEEDED:return(0,l.jsx)(K.JO,{name:"check_circle",color:h.fA()});default:(0,eD.UT)(i)}}(r)}),(0,l.jsx)(P.pN,{children:r.name})]}),(0,l.jsx)(p.x,{padding:{horizontal:24},children:(0,l.jsx)(P.YS,{color:h.$(),style:{textTransform:"capitalize"},children:function(e){var t=e.executionForLatestMaterialization;if(!t)return"Not evaluated";var n=t.status;switch(n){case ex.peG.EXECUTION_FAILED:return"Execution failed";case ex.peG.FAILED:return"Failed";case ex.peG.IN_PROGRESS:return"In progress";case ex.peG.SKIPPED:return"Skipped";case ex.peG.SUCCEEDED:return"Succeeded";default:(0,eD.UT)(n)}}(r)})})]})},r.name)})})})})]})]}),(0,l.jsxs)(p.x,{flex:{direction:"column"},style:{flex:1},children:[(0,l.jsxs)(p.x,{style:{height:56},border:"bottom",flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},padding:{vertical:12,horizontal:24},children:[(0,l.jsxs)(p.x,{flex:{direction:"row",gap:6,alignItems:"center"},children:[(0,l.jsx)(K.JO,{name:"asset_check"}),(0,l.jsx)(P.d1,{children:T.name})]}),(0,l.jsx)(nN.$$,{assetNode:g,checks:[T],label:"Execute"})]}),(0,l.jsxs)(p.x,{flex:{grow:1,direction:"column",gap:12},padding:{horizontal:24,vertical:12},children:[(0,l.jsx)(CollapsibleSection_CollapsibleSection,{header:(0,l.jsx)(P.Tj,{children:"About"}),headerWrapperProps:nR,arrowSide:"right",children:(0,l.jsx)(p.x,{padding:{top:12},flex:{gap:12,direction:"column"},children:(0,l.jsx)(P.pN,{children:null!==(r=T.description)&&void 0!==r?r:(0,l.jsx)(P.YS,{color:h.$(),children:"No description provided"})})})}),(0,l.jsxs)(CollapsibleSection_CollapsibleSection,{header:(0,l.jsx)(P.Tj,{children:"Latest execution"}),headerWrapperProps:nR,arrowSide:"right",children:[(null==L?void 0:null===(n=L.evaluation)||void 0===n?void 0:n.description)?(0,l.jsx)(p.x,{padding:{top:12},flex:{gap:12,direction:"column"},children:(0,l.jsx)(P.pN,{children:L.evaluation.description})}):null,(0,l.jsxs)(p.x,{padding:{top:12},flex:{direction:"column",gap:12},children:[(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:24},children:[(0,l.jsxs)(p.x,{flex:{direction:"column",gap:6},children:[(0,l.jsx)(P.Tj,{children:"Evaluation result"}),(0,l.jsx)("div",{children:(0,l.jsx)(nI.q,{execution:T.executionForLatestMaterialization})})]}),L?(0,l.jsxs)(p.x,{flex:{direction:"column",gap:6},children:[(0,l.jsx)(P.Tj,{children:"Timestamp"}),(0,l.jsx)(E.rU,{to:(0,B.tA)({id:L.runId},{stepKey:L.stepKey,timestamp:L.timestamp}),children:(0,l.jsx)(V.E,{timestamp:{unix:L.timestamp}})})]}):null,F?(0,l.jsxs)(p.x,{flex:{direction:"column",gap:6},children:[(0,l.jsx)(P.Tj,{children:"Target materialization"}),(0,l.jsx)(E.rU,{to:"/runs/".concat(F.runId),children:(0,l.jsx)(V.E,{timestamp:{unix:F.timestamp}})})]}):null]}),(null==L?void 0:null===(i=L.evaluation)||void 0===i?void 0:i.metadataEntries.length)?(0,l.jsxs)(p.x,{flex:{direction:"column",gap:6},children:[(0,l.jsx)(P.Tj,{children:"Metadata"}),(0,l.jsx)(ei.gD,{entries:L.evaluation.metadataEntries})]}):null]})]}),(0,l.jsx)(CollapsibleSection_CollapsibleSection,{header:(0,l.jsx)(P.Tj,{children:"Execution history"}),headerWrapperProps:nR,arrowSide:"right",children:(0,l.jsx)(p.x,{padding:{top:12},children:L?(0,l.jsx)(CheckExecutions,{assetKey:s,checkName:u||T.name}):(0,l.jsx)(P.YS,{color:h.$(),children:"No execution history"})})})]})]})]})]})},CheckExecutions=function(e){var t=e.assetKey,n=e.checkName,i=(0,ni.l)({query:nS,variables:{assetKey:t,checkName:n},nextCursorForResult:function(e){var t;if(e)return null===(t=e.assetCheckExecutions[29])||void 0===t?void 0:t.id.toString()},getResultArray:function(e){return e&&e.assetCheckExecutions||[]},pageSize:30}),r=i.queryResult,s=i.paginationProps;(0,nr.C4)(r,nr.dT);var a=m.useMemo(function(){var e;return null===(e=r.data)||void 0===e?void 0:e.assetCheckExecutions.slice(1)},[r]);return a?(0,l.jsx)(p.x,{flex:{direction:"column"},children:function(){if(a)return(0,l.jsxs)("div",{children:[(0,l.jsxs)(Y.i,{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{style:{width:"160px"},children:"Evaluation result"}),(0,l.jsx)("th",{style:{width:"200px"},children:"Timestamp"}),(0,l.jsx)("th",{style:{width:"200px"},children:"Target materialization"}),(0,l.jsx)("th",{children:"Metadata"})]})}),(0,l.jsx)("tbody",{children:a.map(function(e){var t,n,i;return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)(nI.q,{execution:e})}),(0,l.jsx)("td",{children:(null===(t=e.evaluation)||void 0===t?void 0:t.timestamp)?(0,l.jsx)(E.rU,{to:(0,B.tA)({id:e.runId},{stepKey:e.stepKey,timestamp:e.timestamp}),children:(0,l.jsx)(tk.v,{timestamp:e.evaluation.timestamp})}):(0,l.jsx)(tk.v,{timestamp:e.timestamp})}),(0,l.jsx)("td",{children:(null===(n=e.evaluation)||void 0===n?void 0:n.targetMaterialization)?(0,l.jsx)(E.rU,{to:"/runs/".concat(e.evaluation.targetMaterialization.runId),children:(0,l.jsx)(tk.v,{timestamp:e.evaluation.targetMaterialization.timestamp})}):" - "}),(0,l.jsx)("td",{children:(0,l.jsx)(AssetCheckDetailModal_MetadataCell,{metadataEntries:null===(i=e.evaluation)||void 0===i?void 0:i.metadataEntries})})]},e.id)})})]}),(0,l.jsx)("div",{style:{paddingBottom:"16px"},children:(0,l.jsx)(tK.pI,(0,j._)({},s))})]})}()}):(0,l.jsx)(p.x,{flex:{direction:"column"},padding:24,children:(0,l.jsx)(x.$,{purpose:"section"})})},FixedScrollContainer=function(e){var t=e.children,n=(0,nP.S)(),i=n.viewport,r=n.containerProps;return(0,l.jsx)(p.x,(0,v._)((0,j._)({flex:{grow:1}},r),{style:{position:"relative"},children:(0,l.jsx)("div",{style:{position:"absolute",height:i.height,left:0,right:0},children:t})}))},nk=(0,en.ZP)(tX.X2).withConfig({componentId:"sc-f19527cf-0"})(AssetChecks_templateObject(),h._c(),function(e){return e.$selected?"background: ".concat(h.Dd(),";"):""}),nR={border:"bottom",padding:{vertical:12},style:{cursor:"pointer"}},nM=(0,c.Ps)(AssetChecks_templateObject1(),nN.M4,nN.rR,nK),nT=n(81862),nD=n(22970),nL=n(33379),nF=n(58885),n$=n(19211),nV=n(54949),nU=n(21044);function useReportEventsModal_templateObject(){var e=(0,o._)(["\n  mutation ReportEventMutation($eventParams: ReportRunlessAssetEventsParams!) {\n    reportRunlessAssetEvents(eventParams: $eventParams) {\n      ...PythonErrorFragment\n      ... on UnauthorizedError {\n        message\n      }\n      ... on ReportRunlessAssetEventsSuccess {\n        assetKey {\n          path\n        }\n      }\n    }\n  }\n  ","\n"]);return useReportEventsModal_templateObject=function(){return e},e}var ReportEventDialogBody=function(e){var t,n=e.asset,i=e.repoAddress,r=e.isOpen,s=e.setIsOpen,a=e.onEventReported,o=(0,y._)((0,m.useState)(""),2),d=o[0],c=o[1],u=(0,nV.xz)(i.location),x=u.permissions.canReportRunlessAssetEvents,h=u.disabledReasons,f=(0,y._)((0,nL.D)(nq),1)[0],g=(0,y._)((0,m.useState)(Date.now()),2),b=g[0],A=g[1],_=(0,ty.$G)((0,tA.mR)(n.isPartitioned?[n.assetKey]:[],b.toString(),"background")),w=_.dimensions.some(function(e){return e.type===ex.iVC.DYNAMIC}),E=(0,y._)((0,tb.q)({assetHealth:_,modifyQueryString:!1,skipPartitionKeyValidation:w,shouldReadPartitionQueryStringParam:!0}),2),O=E[0],C=E[1],S=(0,m.useMemo)(function(){return(0,ty.ju)(O,function(){return!0})},[O]),z=(t=(0,nT._)(function(){var e,t;return(0,nD.Jh)(this,function(i){switch(i.label){case 0:return[4,f({variables:{eventParams:{eventType:ex.RWz.ASSET_MATERIALIZATION,partitionKeys:n.isPartitioned?S:void 0,assetKey:{path:n.assetKey.path},description:d}}})];case 1:if(!(!(t=null===(e=i.sent().data)||void 0===e?void 0:e.reportRunlessAssetEvents)||"PythonError"===t.__typename))return[3,3];return[4,(0,n$.B7)({message:(0,l.jsx)("div",{children:"An unexpected error occurred. This event was not reported."}),icon:"error",intent:"danger",action:t?{text:"View error",onClick:function(){return(0,ta._K)({body:(0,l.jsx)(tV.T9,{error:t})})}}:void 0})];case 2:case 4:return i.sent(),[3,7];case 3:if("UnauthorizedError"!==t.__typename)return[3,5];return[4,(0,n$.B7)({message:(0,l.jsx)("div",{children:t.message}),icon:"error",intent:"danger"})];case 5:return[4,(0,n$.B7)({message:S.length>1?(0,l.jsx)("div",{children:"Your events have been reported."}):(0,l.jsx)("div",{children:"Your event has been reported."}),icon:"materialization",intent:"success"})];case 6:i.sent(),a(),s(!1),i.label=7;case 7:return[2]}})}),function(){return t.apply(this,arguments)});return(0,l.jsxs)(X.Vq,{style:{width:700},isOpen:r,canEscapeKeyClose:!0,canOutsideClickClose:!0,onClose:function(){return s(!1)},children:[(0,l.jsx)(X.fK,{icon:"info",label:n.isPartitioned?"Report materialization events":"Report materialization event"}),(0,l.jsx)(p.x,{padding:{horizontal:20,top:16,bottom:24},border:n.isPartitioned?{side:"bottom"}:void 0,children:(0,l.jsx)(P.pN,{children:"Let Dagster know about a materialization that happened outside of Dagster. Typically used for testing or for manually fixing incorrect information in the asset catalog, not for normal operations."})}),n.isPartitioned?(0,l.jsx)(nU.B,{isInitiallyOpen:!0,title:(0,l.jsxs)(p.x,{flex:{direction:"row",justifyContent:"space-between"},children:[(0,l.jsx)(P.pm,{children:"Partition selection"}),(0,l.jsx)("span",{children:(0,nF._e)((0,tA.xD)(O))})]}),children:O.map(function(e,t){return(0,l.jsxs)(p.x,{border:"bottom",padding:{vertical:12,horizontal:20},children:[(0,l.jsxs)(p.x,{as:P.pm,flex:{alignItems:"center",gap:8},children:[(0,l.jsx)(K.JO,{name:"partition"}),e.dimension.name]}),(0,l.jsxs)(p.x,{children:["Select partitions to materialize."," ",e.dimension.type===ex.iVC.TIME_WINDOW?"Click and drag to select a range on the timeline.":null]}),(0,l.jsx)(tE.x,{partitionKeys:e.dimension.partitionKeys,health:{ranges:_.rangesForSingleDimension(t,2===O.length?O[1-t].selectedRanges:void 0)},dimensionType:e.dimension.type,selected:e.selectedKeys,setSelected:function(t){return C(function(n){return n.map(function(n){return n.dimension===e.dimension?(0,v._)((0,j._)({},n),{selectedKeys:t}):n})})},partitionDefinitionName:e.dimension.name,repoAddress:i,refetch:(0,nT._)(function(){return(0,nD.Jh)(this,function(e){return[2,A(Date.now())]})})})]},e.dimension.name)})}):void 0,(0,l.jsx)(p.x,{padding:{horizontal:20,top:n.isPartitioned?16:0,bottom:16},flex:{direction:"column",gap:12},children:(0,l.jsxs)(p.x,{flex:{direction:"column",gap:4},children:[(0,l.jsx)(P.YS,{children:"Description"}),(0,l.jsx)(e0.oi,{value:d,onChange:function(e){return c(e.target.value)},placeholder:"Add a description"})]})}),(0,l.jsxs)(X.cN,{topBorder:!0,children:[(0,l.jsx)(N.zx,{onClick:function(){return s(!1)},children:"Cancel"}),(0,l.jsx)(tp.u,{content:h.canReportRunlessAssetEvents,canShow:!x,children:(0,l.jsx)(N.zx,{intent:"primary",onClick:z,disabled:!x,children:S.length>1?"Report ".concat(S.length.toLocaleString()," events"):"Report event"})})]})]})},nq=(0,c.Ps)(useReportEventsModal_templateObject(),t$.B),nW=n(20775),nJ=n(46228);function AssetView_templateObject(){var e=(0,o._)(["\n  query AssetViewDefinitionQuery($assetKey: AssetKeyInput!) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        key {\n          path\n        }\n        assetMaterializations(limit: 1) {\n          timestamp\n          runId\n        }\n        definition {\n          id\n          ...AssetViewDefinitionNode\n        }\n      }\n    }\n  }\n\n  fragment AssetViewDefinitionNode on AssetNode {\n    id\n    groupName\n    partitionDefinition {\n      description\n    }\n    partitionKeysByDimension {\n      name\n    }\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n\n    ...AssetNodeInstigatorsFragment\n    ...AssetNodeDefinitionFragment\n    ...UnderlyingOpsAssetNodeFragment\n  }\n\n  ","\n  ","\n  ","\n"]);return AssetView_templateObject=function(){return e},e}var AssetView=function(e){var t,n,i,r,s,a,o,d,c=e.assetKey,u=e.trace,h=(0,y._)((0,t_.q)({}),2),A=h[0],_=h[1],w=(0,m.useContext)(eb.G),E=w.tabBuilder,O=w.renderFeatureView,P=(0,nW.gV)(),C=P.flagUseNewOverviewPage,S=P.flagUseNewAutomationPage,z=useAssetViewAssetDefinition(c),I=z.definition,N=z.definitionQueryResult,k=z.lastMaterialization,R=(0,m.useMemo)(function(){return E({definition:I,params:A})},[I,A,E]),M=C?"overview":R.some(function(e){return"partitions"===e.id})?"partitions":"events",T=A.view||M,D=function(e,t,n){var i=n.lineageDepth,r=n.lineageScope,s=(0,U.Je)(e);if("definition"===t||"overview"===t)return{query:'+"'.concat(s,'"+'),requestedDepth:1};if("lineage"===t){var a=Number(i)||1,o="+".repeat(a);return{query:"lineage"===t&&"upstream"===r?"".concat(o,'"').concat(s,'"'):"lineage"===t&&"downstream"===r?'"'.concat(s,'"').concat(o):"".concat(o,'"').concat(s,'"').concat(o),requestedDepth:a}}return{query:'"'.concat(s,'"'),requestedDepth:0}}(c,T,A),L=(0,e1.uc)(D.query,{hideEdgesToNodesOutsideQuery:!0}),$=(t=L.assetGraphData,n=(0,U.Wu)(c),(0,m.useMemo)(function(){return t?{upstream:Object.values(t.nodes).filter(function(e){var i;return null===(i=t.upstream[n])||void 0===i?void 0:i[(0,U.Wu)(e.assetKey)]}).map(function(e){return e.definition}),downstream:Object.values(t.nodes).filter(function(e){var i;return null===(i=t.downstream[n])||void 0===i?void 0:i[(0,U.Wu)(e.assetKey)]}).map(function(e){return e.definition})}:{upstream:null,downstream:null}},[t,n])),V=$.upstream,q=$.downstream,W=null===(o=L.assetGraphData)||void 0===o?void 0:o.nodes[(0,U.Wu)(c)],J=(0,nJ.NG)(c),B=J.liveData,Z=J.refresh,G=null===(d=(null==B?void 0:B.lastMaterialization)||k)||void 0===d?void 0:d.timestamp,Q=!A.asOf||Number(G)<=Number(A.asOf),Y=B?(0,tA.em)(B):null==k?void 0:k.timestamp;(0,m.useEffect)(function(){!N.loading&&B&&(null==u||u.endTrace())},[N,B,u]);var X=(i=I?{assetKey:I.assetKey,isPartitioned:I.isPartitioned,repository:I.repository}:null,s=(r=(0,y._)((0,m.useState)(!1),2))[0],a=r[1],{dropdownOptions:(0,m.useMemo)(function(){return[{label:(null==i?void 0:i.isPartitioned)?"Report materialization events":"Report materialization event",icon:(0,l.jsx)(K.JO,{name:"asset_non_sda"}),onClick:function(){return a(!0)}}]},[null==i?void 0:i.isPartitioned]),element:i?(0,l.jsx)(ReportEventDialogBody,{asset:i,isOpen:s,setIsOpen:a,repoAddress:(0,H.kQ)(i.repository.name,i.repository.location.name),onEventReported:Z}):void 0});return(0,l.jsxs)(p.x,{flex:{direction:"column",grow:1},style:{height:"100%",width:"100%",overflowY:"auto"},children:[(0,l.jsx)(g.wn,{assetKey:c,tags:(0,l.jsx)(AssetViewPageHeaderTags,{definition:I,liveData:B,onShowUpstream:function(){return _((0,v._)((0,j._)({},A),{view:"lineage",lineageScope:"upstream"}))}}),tabs:(0,l.jsxs)(p.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,l.jsx)(tz.Sc,{selectedTab:T,tabs:R}),(0,l.jsx)(p.x,{padding:{bottom:8},children:(0,l.jsx)(nJ.Yo,{})})]}),right:(0,l.jsxs)(p.x,{style:{margin:"-4px 0"},children:[I&&I.isObservable?(0,l.jsx)(nO.y,{primary:!0,scope:{all:[I],skipAllTerm:!0}}):I&&I.jobNames.length>0&&V?(0,l.jsx)(eX.XE,{scope:{all:[I]},showChangedAndMissingOption:!1,additionalDropdownOptions:X.dropdownOptions}):void 0,X.element]})}),!Q&&A.asOf&&(0,l.jsx)(HistoricalViewAlert,{asOf:A.asOf,hasDefinition:!!I}),(0,l.jsx)(b.S,{region:"page",resetErrorOnChange:[c,A],children:function(){switch(T){case"overview":return N.loading&&!N.previousData?(0,l.jsx)(AssetNodeOverviewLoading,{}):I?(0,l.jsx)(AssetNodeOverview,{assetNode:I,upstream:V,downstream:q,liveData:B,dependsOnSelf:!!W&&(0,U.Pz)(W)}):(0,l.jsx)(AssetNodeOverviewNonSDA,{assetKey:c,lastMaterialization:k});case"definition":return N.loading&&!N.previousData?(0,l.jsx)(AssetLoadingDefinitionState,{}):I?(0,l.jsx)(AssetNodeDefinition,{assetNode:I,upstream:V,downstream:q,dependsOnSelf:!!W&&(0,U.Pz)(W)}):(0,l.jsx)(AssetNoDefinitionState,{});case"lineage":return L.assetGraphData?(0,l.jsx)(AssetNodeLineage,{params:A,setParams:_,assetKey:c,requestedDepth:D.requestedDepth,assetGraphData:L.assetGraphData,graphQueryItems:L.graphQueryItems}):(0,l.jsx)(p.x,{style:{flex:1},flex:{alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(x.$,{purpose:"page"})});case"partitions":return N.loading&&!N.previousData?(0,l.jsx)(AssetLoadingDefinitionState,{}):(null==I?void 0:I.isSource)?(0,l.jsx)(f.l_,{to:(0,F.p)(c,{view:"events"})}):(0,l.jsx)(AssetPartitions,{assetKey:c,assetPartitionDimensions:null==I?void 0:I.partitionKeysByDimension.map(function(e){return e.name}),dataRefreshHint:Y,params:A,paramsTimeWindowOnly:!!A.asOf,setParams:_});case"events":return N.loading&&!N.previousData?(0,l.jsx)(AssetLoadingDefinitionState,{}):(0,l.jsx)(AssetEvents,{assetKey:c,assetNode:I,dataRefreshHint:Y,params:A,paramsTimeWindowOnly:!!A.asOf,setParams:_,liveData:I?B:void 0});case"plots":return N.loading&&!N.previousData?(0,l.jsx)(AssetLoadingDefinitionState,{}):(0,l.jsx)(AssetPlots,{assetKey:c,assetHasDefinedPartitions:!!(null==I?void 0:I.partitionDefinition),params:A,setParams:_});case"automation":return N.loading&&!N.previousData?(0,l.jsx)(AssetLoadingDefinitionState,{}):S?(0,l.jsx)(AssetAutomaterializePolicyPage,{assetKey:c,definition:I}):(0,l.jsx)(AssetAutomaterializePolicyPageOld,{assetKey:c,assetHasDefinedPartitions:!!(null==I?void 0:I.partitionDefinition)});case"checks":return N.loading&&!N.previousData?(0,l.jsx)(AssetLoadingDefinitionState,{}):(0,l.jsx)(AssetChecks,{assetKey:c,lastMaterializationTimestamp:null==k?void 0:k.timestamp});default:return O({selectedTab:T,assetKey:c,definition:I})}}()})]})},AssetLoadingDefinitionState=function(){return(0,l.jsx)(p.x,{style:{height:390},flex:{direction:"row",justifyContent:"center",alignItems:"center"},children:(0,l.jsx)(x.$,{purpose:"page"})})},AssetNoDefinitionState=function(){return(0,l.jsx)(p.x,{padding:{vertical:32},children:(0,l.jsx)(A.t,{title:"No definition",description:"This asset doesn't have a software definition in any of your code locations.",icon:"materialization"})})},useAssetViewAssetDefinition=function(e){var t=(0,d.a)(nB,{variables:{assetKey:{path:e.path}},notifyOnNetworkStatusChange:!0}),n=(t.data||t.previousData||{}).assetOrError,i=n&&"Asset"===n.__typename?n:null;return i?{definitionQueryResult:t,definition:i.definition,lastMaterialization:i.assetMaterializations?i.assetMaterializations[0]:null}:{definitionQueryResult:t,definition:null,lastMaterialization:null}},nB=(0,c.Ps)(AssetView_templateObject(),eS,eV,eM.D),HistoricalViewAlert=function(e){var t=e.asOf,n=e.hasDefinition,i=(0,f.TH)(),r=i.pathname,s=i.search,a=new URLSearchParams(s);return a.delete("asOf"),a.set("time",t),(0,l.jsx)(p.x,{padding:{vertical:16,horizontal:24},border:"bottom",children:(0,l.jsx)(_.b,{intent:"info",title:(0,l.jsxs)("span",{children:["This is a historical view of materializations as of"," ",(0,l.jsx)("span",{style:{fontWeight:600},children:(0,l.jsx)(V.E,{timestamp:{ms:Number(t)},timeFormat:{showSeconds:!0,showTimezone:!0}})}),"."]}),description:(0,l.jsx)(E.rU,{to:"".concat(r,"?").concat(a.toString()),children:n?"Show definition and latest materializations":"Show latest materializations"})})})},AssetViewPageHeaderTags=function(e){var t=e.definition,n=e.liveData,i=e.onShowUpstream,r=(0,nw.I)(),s=(0,nW.gV)().flagUseNewOverviewPage,a=t?(0,H.kQ)(t.repository.name,t.repository.location.name):null;return s?(0,l.jsxs)(l.Fragment,{children:[t?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eu.ov,{liveData:n,assetKey:t.assetKey,onClick:i}),(0,l.jsx)(ed.VH,{changedReasons:t.changedReasons,assetKey:t.assetKey})]}):null,(null==t?void 0:t.isSource)?(0,l.jsx)(w.V,{children:"Source Asset"}):(null==t?void 0:t.isExecutable)?void 0:(0,l.jsx)(w.V,{children:"External Asset"})]}):(0,l.jsxs)(l.Fragment,{children:[t&&a?(0,l.jsxs)(w.V,{icon:"asset",children:["Asset in ",(0,l.jsx)(tc.b,{repoAddress:a})]}):(0,l.jsx)(w.V,{icon:"asset_non_sda",children:"Asset"}),t&&a&&(0,l.jsx)(AssetNodeInstigatorTag,{assetNode:t,repoAddress:a}),t&&a&&t.groupName&&(0,l.jsx)(w.V,{icon:"asset_group",children:(0,l.jsx)(E.rU,{to:(0,e$.$U)(a,"/asset-groups/".concat(t.groupName)),children:t.groupName})}),"has-global-amp"===r&&(null==t?void 0:t.autoMaterializePolicy)?(0,l.jsx)(nE.m,{}):null,t&&t.freshnessPolicy&&(0,l.jsx)(eR.CW,{policy:t.freshnessPolicy,assetKey:t.assetKey}),t?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eu.ov,{liveData:n,assetKey:t.assetKey,onClick:i}),(0,l.jsx)(ed.VH,{changedReasons:t.changedReasons,assetKey:t.assetKey}),(0,l.jsx)(tl.hG,{style:{position:"relative"},definition:t,reduceColor:!0})]}):null]})},nZ=n(90204),nH="recentlyVisitedAssets",nG=n(28252),nQ=n(83568),nY=n(39852);function AssetsCatalogRoot_templateObject(){var e=(0,o._)(["\n  query AssetsCatalogRootQuery($assetKey: AssetKeyInput!) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        key {\n          path\n        }\n      }\n    }\n  }\n"]);return AssetsCatalogRoot_templateObject=function(){return e},e}var AssetsCatalogRoot=function(){(0,tS.Px)();var e,t=(0,f.UO)(),n=(0,f.k6)(),i=(t["0"]||"").split("/").filter(function(e){return e}).map(decodeURIComponent),r=(0,d.a)(n0,{skip:0===i.length,variables:{assetKey:{path:i}}});(0,nG.j)(i&&i.length?"Assets: ".concat((0,U.ll)({path:i})):"Assets");var s=(0,nQ.se)(i&&0===i.length?"AssetsCatalogRoot":"AssetCatalogAssetView");return(m.useEffect(function(){var e,t,n,s,a,o;i&&i.length&&!1===r.loading&&(null===(e=r.data)||void 0===e?void 0:e.assetOrError.__typename)==="Asset"&&(t={path:i},-1!==(a=(s=(n=localStorage.getItem(nH))?JSON.parse(n):[]).findIndex(function(e){return JSON.stringify(e)===JSON.stringify(t)}))&&s.splice(a,1),s.unshift(t),o=s.slice(0,10),localStorage.setItem(nH,JSON.stringify(o)))},[i,r]),r.loading)?(0,l.jsxs)(u.T,{children:[(0,l.jsx)(g.wn,{assetKey:{path:i}}),(0,l.jsx)(p.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,l.jsxs)(p.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,l.jsx)(x.$,{purpose:"body-text"}),(0,l.jsx)("div",{style:{color:h.$()},children:"Loading assets…"})]})})]}):0===i.length||(null===(e=r.data)||void 0===e?void 0:e.assetOrError.__typename)==="AssetNotFoundError"?(0,l.jsxs)(p.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,l.jsx)(g.wn,{assetKey:{path:i},right:(0,l.jsxs)(p.x,{flex:{gap:12,alignItems:"center"},children:[(0,l.jsx)(g.wP,{}),(0,l.jsx)(nY.i,{label:"Reload definitions"})]})}),(0,l.jsx)(nZ.fv,{prefixPath:i,setPrefixPath:function(e){return n.push((0,F.p)({path:e}))},trace:s})]}):(0,l.jsx)(AssetView,{assetKey:{path:i},trace:s})},nX=AssetsCatalogRoot,n0=(0,c.Ps)(AssetsCatalogRoot_templateObject())},87631:function(e,t,n){n.d(t,{m:function(){return AutomaterializeDaemonStatusTag}});var i=n(52322),r=n(43180),s=n(57830),a=n(47933),o=n(81966),AutomaterializeDaemonStatusTag=function(){var e=(0,o.dx)().paused;return(0,i.jsx)(r.u,{content:e?"Auto-materializing is paused. New materializations will not be triggered by auto-materialization policies.":"",canShow:e,children:(0,i.jsx)(a.rU,{to:"/health",style:{outline:"none"},children:(0,i.jsx)(s.V,{icon:e?"toggle_off":"toggle_on",intent:e?"warning":"success",children:e?"Auto-materialize off":"Auto-materialize on"})})})}},12518:function(e,t,n){n.d(t,{I:function(){return ScheduleOrSensorTag}});var i=n(58467),r=n(52322),s=n(57830),a=n(12084),o=n(25195),l=n(22139),d=n(43180),c=n(3842),u=n(16861),p=n(2784),x=n(47933),h=n(17668),m=n(66207),f=n(54483),g=n(23054),j=n(38153),ScheduleOrSensorTag=function(e){var t=e.repoAddress,n=e.schedules,l=void 0===n?[]:n,d=e.sensors,c=void 0===d?[]:d,u=e.showSwitch,x=void 0===u||u,m=(0,i._)((0,p.useState)(!1),2),f=m[0],g=m[1],j=l.length,v=c.length;return j>1||v>1||j&&v?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.V,{icon:j>1?"schedule":"sensors",children:(0,r.jsx)(a.Z,{onClick:function(){return g(!0)},color:o.Es(),children:j&&v?"".concat(j+v," schedules/sensors"):j?"".concat(j," schedules"):"".concat(v," sensors")})}),(0,r.jsx)(h.f,{isOpen:f,onClose:function(){return g(!1)},repoAddress:t,schedules:l,sensors:c,showSwitch:x})]}):j?(0,r.jsx)(MatchingSchedule,{schedule:l[0],repoAddress:t,showSwitch:x}):v?(0,r.jsx)(MatchingSensor,{sensor:c[0],repoAddress:t,showSwitch:x}):(0,r.jsx)("div",{style:{display:"none"},children:"No schedules or sensors"})},MatchingSchedule=function(e){var t=e.schedule,n=e.repoAddress,i=e.showSwitch,a=t.cronSchedule,o=t.executionTimezone,u="RUNNING"===t.scheduleState.status,p=(0,r.jsx)(s.V,{intent:u?"primary":"none",icon:"schedule",children:(0,r.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,r.jsx)(x.rU,{to:(0,j.$U)(n,"/schedules/".concat(t.name)),style:{overflow:"hidden",textOverflow:"ellipsis"},children:(0,f.A)(a,o||"UTC")}),i?(0,r.jsx)(m.M,{size:"small",repoAddress:n,schedule:t}):null]})});return t.cronSchedule?(0,r.jsx)(d.u,{placement:"top-start",content:(0,r.jsxs)(l.x,{flex:{direction:"column",gap:4},children:[(0,r.jsxs)("div",{children:["Name: ",(0,r.jsx)("strong",{children:t.name})]}),(0,r.jsxs)("div",{children:["Cron:"," ",(0,r.jsxs)("span",{style:{fontFamily:c.b.monospace,marginLeft:"4px"},children:["(",t.cronSchedule,")"]})]}),(0,r.jsxs)("div",{children:["Timezone: ",(0,r.jsx)("strong",{children:t.executionTimezone||"UTC"})]})]}),children:p}):p},MatchingSensor=function(e){var t=e.sensor,n=e.repoAddress,i=e.showSwitch,a="RUNNING"===t.sensorState.status;return(0,r.jsx)(s.V,{intent:a?"primary":"none",icon:"sensors",children:(0,r.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,r.jsx)(x.rU,{to:(0,j.$U)(n,"/sensors/".concat(t.name)),style:{maxWidth:200,overflow:"hidden"},children:(0,r.jsx)(u.g,{text:t.name})}),i?(0,r.jsx)(g.c,{size:"small",repoAddress:n,sensor:t}):null]})})}},65767:function(e,t,n){n.d(t,{l:function(){return useCursorPaginatedQuery}});var i=n(85333),r=n(6692),s=n(58467),a=n(82550),o=n(40794),l=n(2784),d=n(71277);function useCursorPaginatedQuery(e){var t=(0,s._)((0,l.useState)(function(){return[]}),2),n=t[0],c=t[1],u=(0,s._)((0,d.q)({queryKey:"cursor"}),2),p=u[0],x=u[1],h=(0,r._)((0,i._)({},e.variables),{cursor:p,limit:e.pageSize+1}),m=(0,o.a)(e.query,{skip:e.skip,variables:h,notifyOnNetworkStatusChange:!0}),f={hasPrevCursor:!!p,hasNextCursor:e.getResultArray(m.data).length===e.pageSize+1,popCursor:function(){var e=(0,a._)(n);x(e.pop()),c(e)},advanceCursor:function(){p&&c(function(e){return(0,a._)(e).concat([p])});var t=m.data&&e.nextCursorForResult(m.data);t&&x(t)},reset:function(){c([]),x(void 0)}};return{queryResult:m,paginationProps:f}}}}]);
//# sourceMappingURL=585.7765e9c3f56a0b17.js.map
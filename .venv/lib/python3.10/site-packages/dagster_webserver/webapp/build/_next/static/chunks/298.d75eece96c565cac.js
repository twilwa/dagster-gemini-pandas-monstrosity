"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[298],{50298:function(e,n,t){t.r(n),t.d(n,{OverviewRoot:function(){return OverviewRoot},default:function(){return eW}});var r=t(52322),o=t(7267),i=t(58467),s=t(17131),a=t(81308),l=t(9001),c=t(22139),u=t(2784),d=t(85333),v=t(6692),h=t(73235),f=t(40794),p=t(63832),x=t(34822),m=t(25195),j=t(21106),g=t(76139),y=t(57830),w=t(17276),b=t(44678),O=t(88510),_=t(47933),R=t(35505),k=t(56266),C=t(55237),T=t(68028),A=t(46228),S=t(99322),N=t(35157),E=t(16339),L=t(58885),I=t(90204),z=t(74711),F=t(28252),P=t(71277),M=t(63386),W=t(55658),$=t(37160),J=t(38153);function _templateObject(){var e=(0,h._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n  > * {\n    vertical-align: middle;\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,h._)(["\n  font-size: 12px;\n  pointer-events: none;\n  a {\n    color: ",";\n    pointer-events: none;\n    max-width: ",";\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,h._)(["\n  cursor: pointer;\n  &:hover {\n    font-weight: 600;\n  }\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,h._)(["\n  &:hover {\n    text-decoration: none;\n  }\n"]);return _templateObject3=function(){return e},e}var OverviewAssetsRoot=function(e){var n,t,o,s=e.Header,a=e.TabButton;(0,T.Px)(),(0,F.j)("Overview | Assets");var l=(0,f.a)(I.C1,{notifyOnNetworkStatusChange:!0}),d=(0,C.C4)(l,C.dT),v=u.useMemo(function(){var e,n,t;return(null===(e=l.data)||void 0===e?void 0:e.assetsOrError.__typename)==="AssetConnection"?(n=l.data.assetsOrError.nodes,t={},n.forEach(function(e){if(e.definition){var n=e.definition.groupName,r=e.definition.repository.name,o="".concat(n,"||").concat(r),i=t[o]||{groupName:n,repositoryName:r,assets:[]};i.assets.push(e),t[o]=i}}),Object.values(t)):[]},[null===(o=l.data)||void 0===o?void 0:o.assetsOrError]),h=(0,i._)((0,P.q)({queryKey:"q",decode:function(e){return e.searchQuery?JSON.parse(e.searchQuery):""},encode:function(e){return{searchQuery:e?JSON.stringify(e):void 0}}}),2),m=h[0],j=h[1],g=u.useMemo(function(){return""===m?v:v.filter(function(e){return(e.groupName||q).toLowerCase().includes(m.toLowerCase())||e.repositoryName.toLowerCase().includes(m.toLowerCase())})},[v,m]),y=u.useRef(null),w=(0,O.MG)({count:g.length,getScrollElement:function(){return y.current},estimateSize:function(){return 82},overscan:5}),b=w.getTotalSize(),_=w.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{position:"sticky",top:0,zIndex:1},children:[(0,r.jsx)(s,{refreshState:d}),(0,r.jsxs)(c.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",gap:12,grow:0},children:[(0,r.jsx)(a,{selected:"assets"}),(0,r.jsx)(x.oi,{value:m,onChange:function(e){j(e.target.value)},placeholder:"Filter asset groups…"})]})]}),(t=null===(n=l.data)||void 0===n?void 0:n.assetsOrError,!l.data&&l.loading?(0,r.jsx)(c.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,r.jsx)(p.$,{purpose:"page"})}):(null==t?void 0:t.__typename)==="PythonError"?(0,r.jsx)(c.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,r.jsx)(k.T9,{error:t})}):(0,r.jsx)(c.x,{flex:{direction:"column"},style:{overflow:"hidden"},children:(0,r.jsxs)(W.W2,{ref:y,children:[(0,r.jsx)(VirtualHeaderRow,{}),(0,r.jsx)(W.Nh,{$totalHeight:b,children:_.map(function(e){var n=e.index,t=e.key,o=e.size,i=e.start,s=g[n];return(0,r.jsx)(VirtualRow,{start:i,height:o,group:s},t)})})]})}))]})},B="5fr 1fr 1fr 1fr 1fr";function VirtualHeaderRow(){return(0,r.jsxs)(c.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:B,height:"32px",fontSize:"12px",color:m.$(),position:"sticky",top:0,zIndex:1,background:m.v8()},children:[(0,r.jsx)(W.qN,{children:"Group name"}),(0,r.jsx)(W.qN,{children:"Missing"}),(0,r.jsx)(W.qN,{children:"Failed/Overdue"}),(0,r.jsx)(W.qN,{children:"In progress"}),(0,r.jsx)(W.qN,{children:"Materialized"})]})}var q="Ungrouped Assets";function VirtualRow(e){var n,t,o=e.height,i=e.start,s=e.group,a=u.useMemo(function(){return s.assets.map(function(e){return{path:e.key.path}})},[s.assets]),l=(0,A.YP)(a).liveDataByNode,h=u.useMemo(function(){return(0,E.s)(s.assets,l)},[l,s.assets]),f=null===(t=s.assets.find(function(e){var n;return null===(n=e.definition)||void 0===n?void 0:n.repository}))||void 0===t?void 0:null===(n=t.definition)||void 0===n?void 0:n.repository,x=(0,$.kQ)((null==f?void 0:f.name)||"",(null==f?void 0:f.location.name)||""),w=(0,j.S)(),b=w.containerProps,O=w.viewport,R=a.length!==Object.keys(l).length,k=R?"":"0";return(0,r.jsx)(W.X2,{$height:o,$start:i,children:(0,r.jsxs)(U,{border:"bottom",children:[(0,r.jsx)(Cell,{children:(0,r.jsxs)(c.x,{flex:{direction:"row",justifyContent:"space-between",grow:1},children:[(0,r.jsxs)(c.x,{flex:{direction:"column",gap:2,grow:1},children:[(0,r.jsxs)(c.x,{flex:{direction:"row",gap:8},children:[(0,r.jsx)(g.JO,{name:"asset_group"}),s.groupName?(0,r.jsx)(_.rU,{style:{fontWeight:700},to:(0,J.$U)(x,"/asset-groups/".concat(s.groupName)),children:s.groupName}):q]}),(0,r.jsx)("div",(0,v._)((0,d._)({},b),{children:(0,r.jsx)(H,{maxWidth:O.width,children:(0,r.jsx)(M.b,{repoAddress:x,showRefresh:!1})})}))]}),(0,r.jsx)(c.x,{flex:{direction:"column",justifyContent:"center"},children:R?(0,r.jsx)(p.$,{purpose:"body-text"}):null})]})}),(0,r.jsx)(Cell,{children:h.missing.length?(0,r.jsx)(SelectOnHover,{assets:h.missing,getCount:function(e){var n=e.status;return n.case===S.KB.PARTITIONS_MISSING&&n.numMissing||0},adjective:"missing",children:(0,r.jsx)(y.V,{intent:"none",children:(0,r.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{width:"12px",height:"12px",border:"2px solid ".concat(m.im()),borderRadius:"50%"}}),h.missing.length]})})}):k}),(0,r.jsx)(Cell,{children:h.failed.length?(0,r.jsx)(SelectOnHover,{assets:h.failed,getCount:function(e){var n=e.status;return n.case===S.KB.PARTITIONS_FAILED&&n.numFailed||0},adjective:"failed",children:(0,r.jsx)(y.V,{intent:"danger",children:(0,r.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"10px solid red",display:"inline-block"}}),h.failed.length]})})}):k}),(0,r.jsx)(Cell,{children:h.inprogress.length?(0,r.jsx)(SelectOnHover,{assets:h.inprogress,getCount:function(e){var n=e.status;return n.case===S.KB.MATERIALIZING&&n.numMaterializing||0},adjective:"materializing",children:(0,r.jsx)(y.V,{intent:"primary",icon:"spinner",children:h.inprogress.length})}):k}),(0,r.jsx)(Cell,{children:h.successful.length?(0,r.jsx)(SelectOnHover,{assets:h.successful,getCount:function(e){var n=e.status;return n.case===S.KB.PARTITIONS_MATERIALIZED&&n.numMaterialized||0},adjective:"materialized",children:(0,r.jsx)(y.V,{intent:"success",children:(0,r.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{backgroundColor:m.fA(),width:"10px",height:"10px",borderRadius:"50%"}}),h.successful.length]})})}):k})]})})}var U=(0,R.ZP)(c.x).withConfig({componentId:"sc-299f6f76-0"})(_templateObject(),B),Cell=function(e){var n=e.children;return(0,r.jsx)(W.E5,{style:{color:m.Ep()},children:(0,r.jsx)(c.x,{flex:{direction:"row",alignItems:"center",grow:1},children:n})})},H=R.ZP.div.withConfig({componentId:"sc-299f6f76-1"})(_templateObject1(),m.$(),function(e){var n=e.maxWidth;return n?"unset":"".concat(n,"px")});function SelectOnHover(e){var n=e.assets,t=e.children,o=e.getCount,i=e.adjective;return(0,r.jsx)(D,{children:(0,r.jsx)(w.P,{items:n,itemPredicate:function(e,n){return(0,N.ll)(n.asset.key).toLocaleLowerCase().includes(e.toLocaleLowerCase())},itemRenderer:function(e){var n=o(e);return(0,r.jsx)(K,{to:(0,z.p)(e.asset.key),target:"_blank",children:(0,r.jsx)(b.sN,{text:(0,r.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,r.jsx)("div",{style:{paddingLeft:"4px"},children:(0,r.jsx)(g.JO,{name:"asset"})}),(0,r.jsx)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:(0,N.ll)(e.asset.key)}),n&&n>0?(0,r.jsxs)(a.YS,{style:{color:m.$()},children:[(0,L._e)(n)," ",i]}):null]})},(0,N.ll)(e.asset.key))})},onItemSelect:function(){},children:t})})}var D=R.ZP.div.withConfig({componentId:"sc-299f6f76-2"})(_templateObject2()),K=(0,R.ZP)(_.rU).withConfig({componentId:"sc-299f6f76-3"})(_templateObject3()),V=t(56024),Q=t(58341),G=t(81966),X=t(40049),OverviewTabs=function(e){var n=e.refreshState,t=e.tab,o=(0,G.dx)(),i=(0,Q.I)();return(0,r.jsxs)(c.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,r.jsxs)(V.mQ,{selectedTabId:t,children:[(0,r.jsx)(X.f,{id:"activity",title:"Activity",to:"/overview/activity"}),(0,r.jsx)(X.f,{id:"jobs",title:"Jobs",to:"/overview/jobs"}),(0,r.jsx)(X.f,{id:"schedules",title:"Schedules",to:"/overview/schedules"}),(0,r.jsx)(X.f,{id:"sensors",title:"Sensors",to:"/overview/sensors"}),"has-global-amp"===i?(0,r.jsx)(X.f,{id:"amp",title:(0,r.jsxs)(c.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)("div",{children:"Auto-materialize"}),o.loading?(0,r.jsx)(p.$,{purpose:"body-text"}):(0,r.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:!1===o.paused?m.L$():m.md()}})]}),to:"/overview/automation"}):null,(0,r.jsx)(X.f,{id:"resources",title:"Resources",to:"/overview/resources"}),(0,r.jsx)(X.f,{id:"backfills",title:"Backfills",to:"/overview/backfills"})]}),n?(0,r.jsx)(c.x,{padding:{bottom:8},children:(0,r.jsx)(C.xi,{refreshState:n})}):null]})},Z=t(99596),Y=t(64595),ee=t(10952),en=t(75690),et=t(46988),RepoFilterButton=function(){var e=(0,u.useContext)(et.C5),n=e.allRepos,t=e.visibleRepos,o=e.toggleVisible,s=(0,i._)((0,u.useState)(!1),2),a=s[0],d=s[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(ee.Vq,{canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:a,style:{width:"auto"},onClose:function(){return d(!1)},children:[(0,r.jsx)(ee.fK,{icon:"repo",label:"Filter code locations"}),(0,r.jsx)(en.e,{options:n,onBrowse:function(){return d(!1)},onToggle:o,selected:t}),(0,r.jsx)(ee.cN,{children:(0,r.jsx)(c.x,{padding:{top:8},children:(0,r.jsx)(l.zx,{intent:"none",onClick:function(){return d(!1)},children:"Done"})})})]}),(0,r.jsx)(l.zx,{outlined:!0,icon:(0,r.jsx)(g.JO,{name:"folder"}),rightIcon:(0,r.jsx)(g.JO,{name:"expand_more"}),onClick:function(){return d(!0)},children:"".concat(t.length," of ").concat(n.length)})]})},er=t(83568),eo=t(65435),ei=t(15282),useHourWindow=function(e){var n=(0,u.useCallback)(function(n){switch(n){case"1":case"6":case"12":case"24":return n;default:return e}},[e]),t=(0,i._)((0,ei.U)("dagster.run-timeline-hour-window",n),2),r=t[0],o=t[1],s=(0,u.useCallback)(function(n){o(n||e)},[e,o]);return(0,u.useMemo)(function(){return[r,s]},[r,s])},es=t(87612),ea=t(82550),el=t(60138),ec=t(6315),eu=t(38917),ed=t(16413),ev=t(61935);function NextTick_templateObject(){var e=(0,h._)(["\n  fragment ScheduleFutureTicksFragment on Schedule {\n    id\n    executionTimezone\n    scheduleState {\n      id\n      status\n    }\n    futureTicks(cursor: $tickCursor, until: $ticksUntil) {\n      results {\n        timestamp\n      }\n    }\n  }\n"]);return NextTick_templateObject=function(){return e},e}var eh=(0,el.Ps)(NextTick_templateObject()),ef=t(44254);function useRunsForTimeline_templateObject(){var e=(0,h._)(["\n  query RunTimelineQuery(\n    $inProgressFilter: RunsFilter!\n    $terminatedFilter: RunsFilter!\n    $tickCursor: Float\n    $ticksUntil: Float\n  ) {\n    unterminated: runsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    terminated: runsOrError(filter: $terminatedFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return useRunsForTimeline_templateObject=function(){return e},e}var useRunsForTimeline=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,i._)(e,2),r=t[0],o=t[1],s=r/1e3,a=o/1e3,l=(0,f.a)(ep,{notifyOnNetworkStatusChange:!0,fetchPolicy:"no-cache",variables:{inProgressFilter:(0,v._)((0,d._)({},n),{statuses:[ev.VOA.CANCELING,ev.VOA.STARTED],createdBefore:a}),terminatedFilter:(0,v._)((0,d._)({},n),{statuses:Array.from(ec.cv),createdBefore:a,updatedAfter:s}),tickCursor:s,ticksUntil:a}}),c=l.data,h=l.previousData,p=l.loading&&!c,x=c||h||{},m=x.unterminated,j=x.terminated,g=x.workspaceOrError,y=(0,u.useMemo)(function(){var e={},n=Date.now();return(0,ea._)((null==m?void 0:m.__typename)==="Runs"?m.results:[]).concat((0,ea._)((null==j?void 0:j.__typename)==="Runs"?j.results:[])).forEach(function(t){if(t.startTime&&t.repositoryOrigin&&(0,ed.a)({start:r,end:o},{start:1e3*t.startTime,end:t.endTime?1e3*t.endTime:n})){var i=makeJobKey({name:t.repositoryOrigin.repositoryName,location:t.repositoryOrigin.repositoryLocationName},t.pipelineName);e[i]=(0,ea._)(e[i]||[]).concat([{id:t.id,status:t.status,startTime:1e3*t.startTime,endTime:t.endTime?1e3*t.endTime:n}])}}),e},[o,m,j,r]),w=(0,u.useMemo)(function(){if(!g||"Workspace"!==g.__typename)return[];var e=[],n=!0,t=!1,i=void 0;try{for(var s,a=g.locationEntries[Symbol.iterator]();!(n=(s=a.next()).done);n=!0)!function(){var n=s.value;if("WorkspaceLocationEntry"===n.__typename&&(null===(c=n.locationOrLoadError)||void 0===c?void 0:c.__typename)==="RepositoryLocation"){var t=Date.now(),i=!0,a=!1,l=void 0;try{for(var c,u,d=n.locationOrLoadError.repositories[Symbol.iterator]();!(i=(u=d.next()).done);i=!0)!function(){var i=u.value,s=(0,$.kQ)(i.name,n.locationOrLoadError.name),a=!0,l=!1,c=void 0;try{for(var d,v=i.pipelines[Symbol.iterator]();!(a=(d=v.next()).done);a=!0)!function(){var n=d.value,a=(i.schedules||[]).filter(function(e){return e.pipelineName===n.name}),l=[],c=!0,u=!1,v=void 0;try{for(var h,f=a[Symbol.iterator]();!(c=(h=f.next()).done);c=!0)!function(){var e=h.value;e.scheduleState.status===ev.ynu.RUNNING&&e.futureTicks.results.forEach(function(n){var i=n.timestamp,s=1e3*i;s>t&&(0,ed.a)({start:r,end:o},{start:s,end:s})&&l.push({id:"".concat(e.pipelineName,"-future-run-").concat(i),status:"SCHEDULED",startTime:s,endTime:s+5e3})})}()}catch(e){u=!0,v=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw v}}var p=(0,N.pv)(n.name),x=makeJobKey(s,n.name),m=p?"Ad hoc materializations":n.name,j=y[x]||[];if(l.length||j.length){var g=(0,ea._)(j).concat((0,ea._)(l));if(p){var w,b=e.find(function(e){return"asset"===e.jobType&&e.repoAddress===s});if(b)return(w=b.runs).push.apply(w,(0,ea._)(g))}e.push({key:x,jobName:m,jobType:p?"asset":"job",repoAddress:s,path:(0,J.jT)({repoName:s.name,repoLocation:s.location,pipelineName:n.name,isJob:n.isJob}),runs:(0,ea._)(j).concat((0,ea._)(l))})}}()}catch(e){l=!0,c=e}finally{try{a||null==v.return||v.return()}finally{if(l)throw c}}}()}catch(e){a=!0,l=e}finally{try{i||null==d.return||d.return()}finally{if(a)throw l}}}}()}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}var l=e.reduce(function(e,n){var t,r=n.runs.map(function(e){return e.startTime});return(0,v._)((0,d._)({},e),(0,es._)({},n.key,(t=Math).min.apply(t,(0,ea._)(r))))},{});return e.sort(function(e,n){return l[e.key]-l[n.key]})},[g,y,r,o]);return(0,u.useMemo)(function(){return{jobs:w,initialLoading:p,queryData:l}},[p,w,l])},makeJobKey=function(e,n){return"".concat(n,"-").concat((0,ef.Uz)(e))},ep=(0,el.Ps)(useRunsForTimeline_templateObject(),eu.$X,eh),hourWindowToOffset=function(e){switch(e){case"1":return 36e5;case"6":return 216e5;case"12":return 432e5;case"24":return 864e5}},OverviewTimelineRoot=function(e){var n=e.Header,t=e.TabButton;(0,T.Px)(),(0,F.j)("Overview | Timeline");var o=(0,er.se)("OverviewTimelineRoot"),s=u.useContext(et.C5),a=s.allRepos,d=s.visibleRepos,v=(0,i._)(useHourWindow("12"),2),h=v[0],f=v[1],p=(0,i._)(u.useState(function(){return Date.now()}),2),m=p[0],j=p[1],g=(0,i._)(u.useState(function(){return 0}),2),y=g[0],w=g[1],b=(0,i._)((0,P.q)({queryKey:"search",defaults:{search:""}}),2),O=b[0],_=b[1];u.useEffect(function(){j(Date.now());var e=setInterval(function(){j(Date.now())},6e4);return function(){clearInterval(e)}},[h]);var R=u.useCallback(function(){w(function(e){return e-hourWindowToOffset(h)})},[h]),k=u.useCallback(function(){w(function(e){return e+hourWindowToOffset(h)})},[h]),A=u.useCallback(function(){w(0)},[]),S=u.useMemo(function(){return[m-36e5*Number(h)+y,m+36e5+y]},[h,m,y]),N=useRunsForTimeline(S),E=N.jobs,L=N.initialLoading,I=N.queryData,z=(0,C.C4)(I,C.dT);u.useEffect(function(){L||o.endTrace()},[L,o]);var M=u.useMemo(function(){var e=O.toLocaleLowerCase().trim(),n=d.flatMap(function(n){var t=(0,$.kQ)(n.repository.name,n.repositoryLocation.name);return n.repository.pipelines.filter(function(n){return n.name.toLocaleLowerCase().includes(e)}).map(function(e){return makeJobKey(t,e.name)})});return new Set(n)},[d,O]),W=u.useMemo(function(){return E.filter(function(e){var n=e.key;return M.has(n)})},[E,M]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{refreshState:z}),(0,r.jsxs)(c.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[(0,r.jsx)(t,{selected:"timeline"}),a.length>1&&(0,r.jsx)(RepoFilterButton,{}),(0,r.jsx)(x.oi,{icon:"search",value:O,onChange:function(e){return _(e.target.value)},placeholder:"Filter by job name…",style:{width:"200px"}})]}),(0,r.jsxs)(c.x,{flex:{direction:"row",gap:16,alignItems:"center"},children:[(0,r.jsx)(Z.h,{activeItems:new Set([h]),buttons:[{id:"1",label:"1hr"},{id:"6",label:"6hr"},{id:"12",label:"12hr"},{id:"24",label:"24hr"}],onClick:function(e){return f(e)}}),(0,r.jsxs)(c.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,r.jsx)(l.zx,{onClick:R,children:"←"}),(0,r.jsx)(l.zx,{onClick:A,children:"Now"}),(0,r.jsx)(l.zx,{onClick:k,children:"→"})]})]})]}),(0,r.jsx)(Y.S,{region:"timeline",children:(0,r.jsx)(eo.q,{loading:L,range:S,jobs:W})})]})},ex=t(46928),OverviewActivityRoot=function(){(0,T.Px)(),(0,F.j)("Overview | Activity");var e=u.useCallback(function(e){var n=e.refreshState;return(0,r.jsx)(s.m,{title:(0,r.jsx)(a.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"activity",refreshState:n})})},[]),n=(0,i._)((0,ei.U)("overview-activity-tab",function(e){return["timeline","assets"].includes(e)?e:"timeline"}),2),t=n[0],d=n[1],v=u.useCallback(function(e){var n=e.selected;return t!==n&&d(n),(0,r.jsxs)(l.zH,{children:[(0,r.jsx)(ex.Q1,{$active:"timeline"===n,to:"/overview/activity/timeline",children:"Timeline"}),(0,r.jsx)(ex.Q1,{$active:"assets"===n,to:"/overview/activity/assets",children:"Assets"})]})},[t,d]);return(0,r.jsx)(c.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:(0,r.jsxs)(o.rs,{children:[(0,r.jsx)(o.AW,{path:"/overview/activity/assets",children:(0,r.jsx)(OverviewAssetsRoot,{Header:e,TabButton:v})}),(0,r.jsx)(o.AW,{path:"/overview/activity/timeline",children:(0,r.jsx)(OverviewTimelineRoot,{Header:e,TabButton:v})}),(0,r.jsx)(o.AW,{path:"*",render:u.useCallback(function(){return"timeline"===t?(0,r.jsx)(o.l_,{to:"/overview/activity/timeline"}):(0,r.jsx)(o.l_,{to:"/overview/activity/assets"})},[t])})]})})},em=t(92364),ej=t(43180),eg=t(68884),ey=t(77277),ew=t(42885),eb=t(9901),eO=t(86839),OverviewJobsTable=function(e){var n=e.repos,t=(0,u.useRef)(null),o=(0,u.useMemo)(function(){return n.map(function(e){var n=e.repoAddress;return(0,ef.Uz)(n)})},[n]),i=(0,ew.N)(eg.y,o),s=i.expandedKeys,a=i.onToggle,l=i.onToggleAll,c=(0,u.useMemo)(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.jobs;e.push({type:"header",repoAddress:t,jobCount:r.length});var o=(0,ef.Uz)(t);s.includes(o)&&r.forEach(function(n){var r=n.isJob,o=n.name;e.push({type:"job",repoAddress:t,isJob:r,name:o})})}),e},[n,s]),d=(0,ey.w)(n.map(function(e){return e.repoAddress.name})),v=(0,O.MG)({count:c.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=c[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),h=v.getTotalSize(),f=v.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eb.I,{}),(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsx)(W.W2,{ref:t,children:(0,r.jsx)(W.Nh,{$totalHeight:h,children:f.map(function(e){var n=e.index,t=e.key,o=e.size,i=e.start,u=c[n];return"header"===u.type?(0,r.jsx)(eO.vG,{repoAddress:u.repoAddress,height:o,start:i,onToggle:a,onToggleAll:l,expanded:s.includes((0,ef.Uz)(u.repoAddress)),showLocation:d.has(u.repoAddress.name),rightElement:(0,r.jsx)(ej.u,{content:1===u.jobCount?"1 job":"".concat(u.jobCount," jobs"),placement:"top",children:(0,r.jsx)(y.V,{children:u.jobCount})})},t):(0,r.jsx)(eb.b,{name:u.name,isJob:u.isJob,repoAddress:u.repoAddress,height:o,start:i},t)})})})})]})},e_=t(44392),eR=t(89191),ek=t(91195),eC=t(58298);function OverviewJobsRoot_templateObject(){var e=(0,h._)(["\n  query OverviewJobsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return OverviewJobsRoot_templateObject=function(){return e},e}var OverviewJobsRoot=function(){(0,T.Px)(),(0,F.j)("Overview | Jobs");var e=(0,u.useContext)(et.C5),n=e.allRepos,t=e.visibleRepos,o=e.loading,l=(0,i._)((0,P.q)({queryKey:"search",defaults:{search:""}}),2),d=l[0],v=l[1],h=n.length,j=(0,f.a)(eT,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),g=j.data,y=j.loading,w=(0,C.C4)(j,C.dT),b=(0,u.useMemo)(function(){var e=(0,eR.S)(t);return buildBuckets(g).filter(function(n){var t=n.repoAddress;return e.has((0,ef.Uz)(t))})},[g,t]),O=d.trim().toLocaleLowerCase(),_=O.length>0,R=(0,u.useMemo)(function(){var e=O.toLocaleLowerCase();return b.map(function(n){return{repoAddress:n.repoAddress,jobs:n.jobs.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.jobs.length>0})},[b,O]),k=o&&!h||y&&!g;return(0,r.jsxs)(c.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(s.m,{title:(0,r.jsx)(a.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"jobs",refreshState:w})}),(0,r.jsxs)(c.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[h>1?(0,r.jsx)(RepoFilterButton,{}):null,(0,r.jsx)(x.oi,{icon:"search",value:d,rightElement:k?(0,r.jsx)(eC.W,{tooltipContent:"Loading jobs…"}):void 0,onChange:function(e){return v(e.target.value)},placeholder:"Filter by job name…",style:{width:"340px"}})]}),y&&!h?(0,r.jsx)(c.x,{padding:64,children:(0,r.jsx)(p.$,{purpose:"page"})}):function(){if(y&&!g)return(0,r.jsx)(c.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(p.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:m.$()},children:"Loading jobs…"})]})});var e=n.length>t.length;return R.length?(0,r.jsx)(OverviewJobsTable,{repos:R}):_?(0,r.jsx)(c.x,{padding:{top:20},children:(0,r.jsx)(em.t,{icon:"search",title:"No matching jobs",description:e?(0,r.jsxs)("div",{children:["No jobs matching ",(0,r.jsx)("strong",{children:d})," were found in the selected code locations"]}):(0,r.jsxs)("div",{children:["No jobs matching ",(0,r.jsx)("strong",{children:d})," were found in your definitions"]})})}):(0,r.jsx)(c.x,{padding:{top:20},children:(0,r.jsx)(em.t,{icon:"search",title:"No jobs",description:e?"No jobs were found in the selected code locations":"No jobs were found in your definitions"})})}()]})},buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,o=!1,i=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var v,h=l.repositories[Symbol.iterator]();!(c=(v=h.next()).done);c=!0){var f=v.value,p=f.name,x=f.pipelines,m=(0,$.kQ)(p,l.name),j=x.filter(function(e){var n=e.name;return!(0,N.pv)(n)}).map(function(e){return{isJob:e.isJob,name:e.name}});j.length>0&&t.push({repoAddress:m,jobs:j})}}catch(e){u=!0,d=e}finally{try{c||null==h.return||h.return()}finally{if(u)throw d}}}}}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return(0,e_.S)(t)},eT=(0,el.Ps)(OverviewJobsRoot_templateObject(),ek.B),eA=t(98319),OverviewResourcesTable=function(e){var n=e.repos,t=(0,u.useRef)(null),o=(0,u.useMemo)(function(){return n.map(function(e){var n=e.repoAddress;return(0,ef.Uz)(n)})},[n]),i=(0,ew.N)(eg.y,o),s=i.expandedKeys,a=i.onToggle,l=i.onToggleAll,c=(0,u.useMemo)(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.resources;e.push({type:"header",repoAddress:t,resourceCount:r.length});var o=(0,ef.Uz)(t);s.includes(o)&&r.forEach(function(n){e.push((0,d._)({type:"resource",repoAddress:t},n))})}),e},[n,s]),v=(0,ey.w)(n.map(function(e){return e.repoAddress.name})),h=(0,O.MG)({count:c.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=c[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),f=h.getTotalSize(),p=h.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eA.f,{}),(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsx)(W.W2,{ref:t,children:(0,r.jsx)(W.Nh,{$totalHeight:f,children:p.map(function(e){var n=e.index,t=e.key,o=e.size,i=e.start,u=c[n];return"header"===u.type?(0,r.jsx)(eO.vG,{repoAddress:u.repoAddress,height:o,start:i,onToggle:a,onToggleAll:l,expanded:s.includes((0,ef.Uz)(u.repoAddress)),showLocation:v.has(u.repoAddress.name),rightElement:(0,r.jsx)(ej.u,{content:1===u.resourceCount?"1 resource":"".concat(u.resourceCount," resources"),placement:"top",children:(0,r.jsx)(y.V,{children:u.resourceCount})})},t):(0,r.jsx)(eA.K,(0,d._)({height:o,start:i},u),t)})})})})]})},eS=t(76588);function OverviewResourcesRoot_templateObject(){var e=(0,h._)(["\n  query OverviewResourcesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                allTopLevelResourceDetails {\n                  id\n                  ...ResourceEntryFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return OverviewResourcesRoot_templateObject=function(){return e},e}var OverviewResourcesRoot=function(){(0,T.Px)(),(0,F.j)("Overview | Resources");var e=(0,u.useContext)(et.C5),n=e.allRepos,t=e.visibleRepos,o=e.loading,l=(0,i._)((0,P.q)({queryKey:"search",defaults:{search:""}}),2),d=l[0],v=l[1],h=n.length,j=(0,f.a)(eN,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),g=j.data,y=j.loading,w=(0,C.C4)(j,C.dT),b=(0,u.useMemo)(function(){var e=(0,eR.S)(t);return OverviewResourcesRoot_buildBuckets(g).filter(function(n){var t=n.repoAddress;return e.has((0,ef.Uz)(t))})},[g,t]),O=d.trim().toLocaleLowerCase(),_=O.length>0,R=(0,u.useMemo)(function(){var e=O.toLocaleLowerCase();return b.map(function(n){return{repoAddress:n.repoAddress,resources:n.resources.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.resources.length>0})},[b,O]),k=o&&!h||y&&!g;return(0,r.jsxs)(c.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(s.m,{title:(0,r.jsx)(a.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"resources",refreshState:w})}),(0,r.jsxs)(c.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[h>1?(0,r.jsx)(RepoFilterButton,{}):null,(0,r.jsx)(x.oi,{icon:"search",value:d,rightElement:k?(0,r.jsx)(eC.W,{tooltipContent:"Loading resources…"}):void 0,onChange:function(e){return v(e.target.value)},placeholder:"Filter by resource name…",style:{width:"340px"}})]}),y&&!h?(0,r.jsx)(c.x,{padding:64,children:(0,r.jsx)(p.$,{purpose:"page"})}):function(){if(y&&!g)return(0,r.jsx)(c.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(p.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:m.$()},children:"Loading resources…"})]})});var e=n.length>t.length;return R.length?(0,r.jsx)(OverviewResourcesTable,{repos:R}):_?(0,r.jsx)(c.x,{padding:{top:20},children:(0,r.jsx)(em.t,{icon:"search",title:"No matching resources",description:e?(0,r.jsxs)("div",{children:["No resources matching ",(0,r.jsx)("strong",{children:d})," were found in the selected code locations"]}):(0,r.jsxs)("div",{children:["No resources matching ",(0,r.jsx)("strong",{children:d})," were found in your definitions"]})})}):(0,r.jsx)(c.x,{padding:{top:20},children:(0,r.jsx)(em.t,{icon:"search",title:"No resources",description:e?"No resources were found in the selected code locations":"No resources were found in your definitions"})})}()]})},OverviewResourcesRoot_buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,o=!1,i=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var v,h=l.repositories[Symbol.iterator]();!(c=(v=h.next()).done);c=!0){var f=v.value,p=f.name,x=f.allTopLevelResourceDetails,m=(0,$.kQ)(p,l.name);x.length>0&&t.push({repoAddress:m,resources:x})}}catch(e){u=!0,d=e}finally{try{c||null==h.return||h.return()}finally{if(u)throw d}}}}}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return(0,e_.S)(t)},eN=(0,el.Ps)(OverviewResourcesRoot_templateObject(),ek.B,eS.L),eE=t(71569),OverviewSchedulesRoot=function(){return(0,T.Px)(),(0,F.j)("Overview | Schedules"),(0,r.jsxs)(c.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(s.m,{title:(0,r.jsx)(a.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"schedules"})}),(0,r.jsx)(eE.z,{})]})},eL=t(57070),OverviewSensorsRoot=function(){return(0,T.Px)(),(0,F.j)("Overview | Sensors"),(0,r.jsxs)(c.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(s.m,{title:(0,r.jsx)(a.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"sensors"})}),(0,r.jsx)(eL.n,{})]})},eI=t(28888),ez=t(81967),eF=t(46032),AutomaterializationRoot=function(){var e=(0,Q.I)();switch(e){case"unknown":return(0,r.jsx)("div",{});case"has-global-amp":return(0,r.jsx)(GlobalAutomaterializationRoot,{});case"has-sensor-amp":return(0,r.jsx)(o.l_,{to:"/overview/sensors"});default:(0,eF.UT)(e)}},GlobalAutomaterializationRoot=function(){return(0,T.Px)(),(0,F.j)("Overview | Auto-materialize"),(0,r.jsxs)(eI.T,{children:[(0,r.jsx)(s.m,{title:(0,r.jsx)(a.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"amp"})}),(0,r.jsx)(ez.$,{})]})},eP=t(95881),InstanceBackfillsRoot=function(){return(0,T.Px)(),(0,F.j)("Overview | Backfills"),(0,r.jsxs)(eI.T,{children:[(0,r.jsx)(s.m,{title:(0,r.jsx)(a.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"backfills"})}),(0,r.jsx)(eP.A,{})]})},eM=t(42006),OverviewRoot=function(){return(0,r.jsxs)(o.rs,{children:[(0,r.jsx)(o.AW,{path:"/overview/activity",children:(0,r.jsx)(OverviewActivityRoot,{})}),(0,r.jsx)(o.AW,{path:"/overview/jobs",children:(0,r.jsx)(OverviewJobsRoot,{})}),(0,r.jsx)(o.AW,{path:"/overview/schedules",children:(0,r.jsx)(OverviewSchedulesRoot,{})}),(0,r.jsx)(o.AW,{path:"/overview/sensors",children:(0,r.jsx)(OverviewSensorsRoot,{})}),(0,r.jsx)(o.AW,{path:"/overview/automation",children:(0,r.jsx)(AutomaterializationRoot,{})}),(0,r.jsx)(o.AW,{path:"/overview/backfills/:backfillId",children:(0,r.jsx)(eM.t4,{})}),(0,r.jsx)(o.AW,{path:"/overview/backfills",exact:!0,children:(0,r.jsx)(InstanceBackfillsRoot,{})}),(0,r.jsx)(o.AW,{path:"/overview/resources",children:(0,r.jsx)(OverviewResourcesRoot,{})}),(0,r.jsx)(o.AW,{path:"*",render:function(){return(0,r.jsx)(o.l_,{to:"/overview/activity"})}})]})},eW=OverviewRoot}}]);
//# sourceMappingURL=298.d75eece96c565cac.js.map